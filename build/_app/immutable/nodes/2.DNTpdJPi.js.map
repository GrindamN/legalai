{"version":3,"file":"2.DNTpdJPi.js","sources":["../../../../../../node_modules/idb/build/wrap-idb-value.js","../../../../../../node_modules/idb/build/index.js","../../../../../../src/lib/components/chat/Settings/Account/UpdatePassword.svelte","../../../../../../src/lib/components/icons/Plus.svelte","../../../../../../src/lib/components/chat/Settings/Account.svelte","../../../../../../src/lib/components/chat/Settings/About.svelte","../../../../../../src/lib/components/chat/Settings/General.svelte","../../../../../../src/lib/components/chat/Settings/Interface.svelte","../../../../../../src/lib/components/chat/Settings/Audio.svelte","../../../../../../src/lib/components/chat/Settings/Chats.svelte","../../../../../../src/lib/components/icons/User.svelte","../../../../../../src/lib/components/chat/Settings/Personalization/AddMemoryModal.svelte","../../../../../../src/lib/components/chat/Settings/Personalization/EditMemoryModal.svelte","../../../../../../src/lib/components/chat/Settings/Personalization/ManageModal.svelte","../../../../../../src/lib/components/chat/Settings/Personalization.svelte","../../../../../../src/lib/components/chat/SettingsModal.svelte","../../../../../../src/lib/components/layout/Sidebar/ArchivedChatsModal.svelte","../../../../../../src/lib/components/icons/Pencil.svelte","../../../../../../src/lib/components/icons/Bookmark.svelte","../../../../../../src/lib/components/icons/BookmarkSlash.svelte","../../../../../../src/lib/components/layout/Sidebar/ChatMenu.svelte","../../../../../../src/lib/components/layout/Sidebar/ChatItem.svelte","../../../../../../src/lib/components/common/Loader.svelte","../../../../../../src/lib/components/layout/Sidebar.svelte","../../../../../../node_modules/svelte-confetti/dist/Confetti.svelte","../../../../../../src/lib/components/ChangelogModal.svelte","../../../../../../src/lib/components/layout/Overlay/AccountPending.svelte","../../../../../../src/routes/(app)/+layout.svelte"],"sourcesContent":["const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","<script lang=\"ts\">\r\n\timport { getContext } from 'svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { updateUserPassword } from '$lib/apis/auths';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet show = false;\r\n\tlet currentPassword = '';\r\n\tlet newPassword = '';\r\n\tlet newPasswordConfirm = '';\r\n\r\n\tconst updatePasswordHandler = async () => {\r\n\t\tif (newPassword === newPasswordConfirm) {\r\n\t\t\tconst res = await updateUserPassword(localStorage.token, currentPassword, newPassword).catch(\r\n\t\t\t\t(error) => {\r\n\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\ttoast.success($i18n.t('Successfully updated.'));\r\n\t\t\t}\r\n\r\n\t\t\tcurrentPassword = '';\r\n\t\t\tnewPassword = '';\r\n\t\t\tnewPasswordConfirm = '';\r\n\t\t} else {\r\n\t\t\ttoast.error(\r\n\t\t\t\t`The passwords you entered don't quite match. Please double-check and try again.`\r\n\t\t\t);\r\n\t\t\tnewPassword = '';\r\n\t\t\tnewPasswordConfirm = '';\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<form\r\n\tclass=\"flex flex-col text-sm\"\r\n\ton:submit|preventDefault={() => {\r\n\t\tupdatePasswordHandler();\r\n\t}}\r\n>\r\n\t<div class=\"flex justify-between items-center text-sm\">\r\n\t\t<div class=\"  font-medium\">{$i18n.t('Change Password')}</div>\r\n\t\t<button\r\n\t\t\tclass=\" text-xs font-medium text-gray-500\"\r\n\t\t\ttype=\"button\"\r\n\t\t\ton:click={() => {\r\n\t\t\t\tshow = !show;\r\n\t\t\t}}>{show ? $i18n.t('Hide') : $i18n.t('Show')}</button\r\n\t\t>\r\n\t</div>\r\n\r\n\t{#if show}\r\n\t\t<div class=\" py-2.5 space-y-1.5\">\r\n\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t<div class=\" mb-1 text-xs text-gray-500\">{$i18n.t('Current Password')}</div>\r\n\r\n\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"w-full rounded py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-800 outline-none\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tbind:value={currentPassword}\r\n\t\t\t\t\t\tautocomplete=\"current-password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t<div class=\" mb-1 text-xs text-gray-500\">{$i18n.t('New Password')}</div>\r\n\r\n\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"w-full rounded py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-800 outline-none\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tbind:value={newPassword}\r\n\t\t\t\t\t\tautocomplete=\"new-password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t<div class=\" mb-1 text-xs text-gray-500\">{$i18n.t('Confirm Password')}</div>\r\n\r\n\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"w-full rounded py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-800 outline-none\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tbind:value={newPasswordConfirm}\r\n\t\t\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"mt-3 flex justify-end\">\r\n\t\t\t<button\r\n\t\t\t\tclass=\" px-4 py-2 text-xs bg-gray-800 hover:bg-gray-900 dark:bg-gray-700 dark:hover:bg-gray-800 text-gray-100 transition rounded-md font-medium\"\r\n\t\t\t>\r\n\t\t\t\t{$i18n.t('Update password')}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t{/if}\r\n</form>\r\n","<script lang=\"ts\">\r\n\texport let className = 'w-4 h-4';\r\n\texport let strokeWidth = '1.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\r\n</svg>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { onMount, getContext } from 'svelte';\r\n\r\n\timport { user } from '$lib/stores';\r\n\timport { updateUserProfile, createAPIKey, getAPIKey } from '$lib/apis/auths';\r\n\r\n\timport UpdatePassword from './Account/UpdatePassword.svelte';\r\n\timport { getGravatarUrl } from '$lib/apis/utils';\r\n\timport { generateInitialsImage, canvasPixelTest } from '$lib/utils';\r\n\timport { copyToClipboard } from '$lib/utils';\r\n\timport Plus from '$lib/components/icons/Plus.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport SensitiveInput from '$lib/components/common/SensitiveInput.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveHandler: Function;\r\n\r\n\tlet profileImageUrl = '';\r\n\tlet name = '';\r\n\r\n\tlet showAPIKeys = false;\r\n\r\n\tlet JWTTokenCopied = false;\r\n\r\n\tlet APIKey = '';\r\n\tlet APIKeyCopied = false;\r\n\r\n\tlet profileImageInputElement: HTMLInputElement;\r\n\r\n\tconst submitHandler = async () => {\r\n\t\tif (name !== $user.name) {\r\n\t\t\tif (profileImageUrl === generateInitialsImage($user.name) || profileImageUrl === '') {\r\n\t\t\t\tprofileImageUrl = generateInitialsImage(name);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst updatedUser = await updateUserProfile(localStorage.token, name, profileImageUrl).catch(\r\n\t\t\t(error) => {\r\n\t\t\t\ttoast.error(error);\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tif (updatedUser) {\r\n\t\t\tawait user.set(updatedUser);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tconst createAPIKeyHandler = async () => {\r\n\t\tAPIKey = await createAPIKey(localStorage.token);\r\n\t\tif (APIKey) {\r\n\t\t\ttoast.success($i18n.t('API Key created.'));\r\n\t\t} else {\r\n\t\t\ttoast.error($i18n.t('Failed to create API Key.'));\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tname = $user.name;\r\n\t\tprofileImageUrl = $user.profile_image_url;\r\n\r\n\t\tAPIKey = await getAPIKey(localStorage.token).catch((error) => {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn '';\r\n\t\t});\r\n\t});\r\n</script>\r\n\r\n<div class=\"flex flex-col h-full justify-between text-sm\">\r\n\t<div class=\" space-y-3 pr-1.5 overflow-y-scroll max-h-[25rem]\">\r\n\t\t<input\r\n\t\t\tid=\"profile-image-input\"\r\n\t\t\tbind:this={profileImageInputElement}\r\n\t\t\ttype=\"file\"\r\n\t\t\thidden\r\n\t\t\taccept=\"image/*\"\r\n\t\t\ton:change={(e) => {\r\n\t\t\t\tconst files = profileImageInputElement.files ?? [];\r\n\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\treader.onload = (event) => {\r\n\t\t\t\t\tlet originalImageUrl = `${event.target.result}`;\r\n\r\n\t\t\t\t\tconst img = new Image();\r\n\t\t\t\t\timg.src = originalImageUrl;\r\n\r\n\t\t\t\t\timg.onload = function () {\r\n\t\t\t\t\t\tconst canvas = document.createElement('canvas');\r\n\t\t\t\t\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\t\t\t// Calculate the aspect ratio of the image\r\n\t\t\t\t\t\tconst aspectRatio = img.width / img.height;\r\n\r\n\t\t\t\t\t\t// Calculate the new width and height to fit within 100x100\r\n\t\t\t\t\t\tlet newWidth, newHeight;\r\n\t\t\t\t\t\tif (aspectRatio > 1) {\r\n\t\t\t\t\t\t\tnewWidth = 100 * aspectRatio;\r\n\t\t\t\t\t\t\tnewHeight = 100;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewWidth = 100;\r\n\t\t\t\t\t\t\tnewHeight = 100 / aspectRatio;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Set the canvas size\r\n\t\t\t\t\t\tcanvas.width = 100;\r\n\t\t\t\t\t\tcanvas.height = 100;\r\n\r\n\t\t\t\t\t\t// Calculate the position to center the image\r\n\t\t\t\t\t\tconst offsetX = (100 - newWidth) / 2;\r\n\t\t\t\t\t\tconst offsetY = (100 - newHeight) / 2;\r\n\r\n\t\t\t\t\t\t// Draw the image on the canvas\r\n\t\t\t\t\t\tctx.drawImage(img, offsetX, offsetY, newWidth, newHeight);\r\n\r\n\t\t\t\t\t\t// Get the base64 representation of the compressed image\r\n\t\t\t\t\t\tconst compressedSrc = canvas.toDataURL('image/jpeg');\r\n\r\n\t\t\t\t\t\t// Display the compressed image\r\n\t\t\t\t\t\tprofileImageUrl = compressedSrc;\r\n\r\n\t\t\t\t\t\tprofileImageInputElement.files = null;\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tfiles.length > 0 &&\r\n\t\t\t\t\t['image/gif', 'image/webp', 'image/jpeg', 'image/png'].includes(files[0]['type'])\r\n\t\t\t\t) {\r\n\t\t\t\t\treader.readAsDataURL(files[0]);\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\r\n\t\t<div class=\"space-y-1\">\r\n\t\t\t<!-- <div class=\" text-sm font-medium\">{$i18n.t('Account')}</div> -->\r\n\r\n\t\t\t<div class=\"flex space-x-5\">\r\n\t\t\t\t<div class=\"flex flex-col\">\r\n\t\t\t\t\t<div class=\"self-center mt-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"relative rounded-full dark:bg-gray-700\"\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tprofileImageInputElement.click();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={profileImageUrl !== '' ? profileImageUrl : generateInitialsImage(name)}\r\n\t\t\t\t\t\t\t\talt=\"profile\"\r\n\t\t\t\t\t\t\t\tclass=\" rounded-full size-16 object-cover\"\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"absolute flex justify-center rounded-full bottom-0 left-0 right-0 top-0 h-full w-full overflow-hidden bg-gray-700 bg-fixed opacity-0 transition duration-300 ease-in-out hover:opacity-50\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div class=\"my-auto text-gray-100\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"flex-1 flex flex-col self-center gap-0.5\">\r\n\t\t\t\t\t<div class=\" mb-0.5 text-sm font-medium\">{$i18n.t('Profile Image')}</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" text-xs text-center text-gray-800 dark:text-gray-400 rounded-full px-4 py-0.5 bg-gray-100 dark:bg-gray-850\"\r\n\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\tif (canvasPixelTest()) {\r\n\t\t\t\t\t\t\t\t\tprofileImageUrl = generateInitialsImage(name);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttoast.info(\r\n\t\t\t\t\t\t\t\t\t\t$i18n.t(\r\n\t\t\t\t\t\t\t\t\t\t\t'Fingerprint spoofing detected: Unable to use initials as avatar. Defaulting to default profile image.'\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tduration: 1000 * 10\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}>{$i18n.t('Use Initials')}</button\r\n\t\t\t\t\t\t>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" text-xs text-center text-gray-800 dark:text-gray-400 rounded-full px-4 py-0.5 bg-gray-100 dark:bg-gray-850\"\r\n\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\tconst url = await getGravatarUrl($user.email);\r\n\r\n\t\t\t\t\t\t\t\tprofileImageUrl = url;\r\n\t\t\t\t\t\t\t}}>{$i18n.t('Use Gravatar')}</button\r\n\t\t\t\t\t\t>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" text-xs text-center text-gray-800 dark:text-gray-400 rounded-lg px-2 py-1\"\r\n\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\tprofileImageUrl = '/user.png';\r\n\t\t\t\t\t\t\t}}>{$i18n.t('Remove')}</button\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"pt-0.5\">\r\n\t\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t\t<div class=\" mb-1 text-xs font-medium\">{$i18n.t('Name')}</div>\r\n\r\n\t\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tbind:value={name}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"py-0.5\">\r\n\t\t\t<UpdatePassword />\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-850 my-4\" />\r\n\r\n\t\t<div class=\"flex justify-between items-center text-sm\">\r\n\t\t\t<div class=\"  font-medium\">{$i18n.t('API keys')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\" text-xs font-medium text-gray-500\"\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshowAPIKeys = !showAPIKeys;\r\n\t\t\t\t}}>{showAPIKeys ? $i18n.t('Hide') : $i18n.t('Show')}</button\r\n\t\t\t>\r\n\t\t</div>\r\n\r\n\t\t{#if showAPIKeys}\r\n\t\t\t<div class=\"flex flex-col gap-4\">\r\n\t\t\t\t<div class=\"justify-between w-full\">\r\n\t\t\t\t\t<div class=\"flex justify-between w-full\">\r\n\t\t\t\t\t\t<div class=\"self-center text-xs font-medium\">{$i18n.t('JWT Token')}</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex mt-2\">\r\n\t\t\t\t\t\t<SensitiveInput value={localStorage.token} readOnly={true} />\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"ml-1.5 px-1.5 py-1 dark:hover:bg-gray-850 transition rounded-lg\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tcopyToClipboard(localStorage.token);\r\n\t\t\t\t\t\t\t\tJWTTokenCopied = true;\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tJWTTokenCopied = false;\r\n\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{#if JWTTokenCopied}\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M11.986 3H12a2 2 0 0 1 2 2v6a2 2 0 0 1-1.5 1.937V7A2.5 2.5 0 0 0 10 4.5H4.063A2 2 0 0 1 6 3h.014A2.25 2.25 0 0 1 8.25 1h1.5a2.25 2.25 0 0 1 2.236 2ZM10.5 4v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V4h3Z\"\r\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M3 6a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H3Zm1.75 2.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5h-3.5ZM4 11.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z\"\r\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"justify-between w-full\">\r\n\t\t\t\t\t<div class=\"flex justify-between w-full\">\r\n\t\t\t\t\t\t<div class=\"self-center text-xs font-medium\">{$i18n.t('API Key')}</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex mt-2\">\r\n\t\t\t\t\t\t{#if APIKey}\r\n\t\t\t\t\t\t\t<SensitiveInput value={APIKey} readOnly={true} />\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"ml-1.5 px-1.5 py-1 dark:hover:bg-gray-850 transition rounded-lg\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\tcopyToClipboard(APIKey);\r\n\t\t\t\t\t\t\t\t\tAPIKeyCopied = true;\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tAPIKeyCopied = false;\r\n\t\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{#if APIKeyCopied}\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M11.986 3H12a2 2 0 0 1 2 2v6a2 2 0 0 1-1.5 1.937V7A2.5 2.5 0 0 0 10 4.5H4.063A2 2 0 0 1 6 3h.014A2.25 2.25 0 0 1 8.25 1h1.5a2.25 2.25 0 0 1 2.236 2ZM10.5 4v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V4h3Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M3 6a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H3Zm1.75 2.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5h-3.5ZM4 11.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Create new key')}>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\" px-1.5 py-1 dark:hover:bg-gray-850transition rounded-lg\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\tcreateAPIKeyHandler();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"flex gap-1.5 items-center font-medium px-3.5 py-1.5 rounded-lg bg-gray-100/70 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-850 transition\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\tcreateAPIKeyHandler();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Plus strokeWidth=\"2\" className=\" size-3.5\" />\r\n\r\n\t\t\t\t\t\t\t\t{$i18n.t('Create new secret key')}</button\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\"  px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ton:click={async () => {\r\n\t\t\t\tconst res = await submitHandler();\r\n\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tsaveHandler();\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { getVersionUpdates } from '$lib/apis';\r\n\timport { getOllamaVersion } from '$lib/apis/ollama';\r\n\timport { WEBUI_BUILD_HASH, WEBUI_VERSION } from '$lib/constants';\r\n\timport { WEBUI_NAME, config, showChangelog } from '$lib/stores';\r\n\timport { compareVersion } from '$lib/utils';\r\n\timport { onMount, getContext } from 'svelte';\r\n\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet ollamaVersion = '';\r\n\r\n\tlet updateAvailable = null;\r\n\tlet version = {\r\n\t\tcurrent: '',\r\n\t\tlatest: ''\r\n\t};\r\n\r\n\tconst checkForVersionUpdates = async () => {\r\n\t\tupdateAvailable = null;\r\n\t\tversion = await getVersionUpdates(localStorage.token).catch((error) => {\r\n\t\t\treturn {\r\n\t\t\t\tcurrent: WEBUI_VERSION,\r\n\t\t\t\tlatest: WEBUI_VERSION\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tconsole.log(version);\r\n\r\n\t\tupdateAvailable = compareVersion(version.latest, version.current);\r\n\t\tconsole.log(updateAvailable);\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tollamaVersion = await getOllamaVersion(localStorage.token).catch((error) => {\r\n\t\t\treturn '';\r\n\t\t});\r\n\r\n\t\tcheckForVersionUpdates();\r\n\t});\r\n</script>\r\n\r\n<div class=\"flex flex-col h-full justify-between space-y-3 text-sm mb-6\">\r\n\t<div class=\" space-y-3\">\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-2.5 text-sm font-medium flex space-x-2 items-center\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{$WEBUI_NAME}\r\n\t\t\t\t\t{$i18n.t('Version')}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"flex w-full justify-between items-center\">\r\n\t\t\t\t<div class=\"flex flex-col text-xs text-gray-700 dark:text-gray-200\">\r\n\t\t\t\t\t<div class=\"flex gap-1\">\r\n\t\t\t\t\t\t<Tooltip content={WEBUI_BUILD_HASH}>\r\n\t\t\t\t\t\t\tv{WEBUI_VERSION}\r\n\t\t\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref=\"https://github.com/open-webui/open-webui/releases/tag/v{version.latest}\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{updateAvailable === null\r\n\t\t\t\t\t\t\t\t? $i18n.t('Checking for updates...')\r\n\t\t\t\t\t\t\t\t: updateAvailable\r\n\t\t\t\t\t\t\t\t\t? `(v${version.latest} ${$i18n.t('available!')})`\r\n\t\t\t\t\t\t\t\t\t: $i18n.t('(latest)')}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\" underline flex items-center space-x-1 text-xs text-gray-500 dark:text-gray-500\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tshowChangelog.set(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div>{$i18n.t(\"See what's new\")}</div>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" text-xs px-3 py-1.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-lg font-medium\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tcheckForVersionUpdates();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{$i18n.t('Check for updates')}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t{#if ollamaVersion}\r\n\t\t\t<hr class=\" dark:border-gray-850\" />\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Ollama Version')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1 text-xs text-gray-700 dark:text-gray-200\">\r\n\t\t\t\t\t\t{ollamaVersion ?? 'N/A'}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\r\n\t\t<hr class=\" dark:border-gray-850\" />\r\n\r\n\t\t<div class=\"flex space-x-1\">\r\n\t\t\t<a href=\"https://discord.gg/5rJgQTnV4s\" target=\"_blank\">\r\n\t\t\t\t<img\r\n\t\t\t\t\talt=\"Discord\"\r\n\t\t\t\t\tsrc=\"https://img.shields.io/badge/Discord-Open_WebUI-blue?logo=discord&logoColor=white\"\r\n\t\t\t\t/>\r\n\t\t\t</a>\r\n\r\n\t\t\t<a href=\"https://twitter.com/OpenWebUI\" target=\"_blank\">\r\n\t\t\t\t<img\r\n\t\t\t\t\talt=\"X (formerly Twitter) Follow\"\r\n\t\t\t\t\tsrc=\"https://img.shields.io/twitter/follow/OpenWebUI\"\r\n\t\t\t\t/>\r\n\t\t\t</a>\r\n\r\n\t\t\t<a href=\"https://github.com/open-webui/open-webui\" target=\"_blank\">\r\n\t\t\t\t<img\r\n\t\t\t\t\talt=\"Github Repo\"\r\n\t\t\t\t\tsrc=\"https://img.shields.io/github/stars/open-webui/open-webui?style=social&label=Star us on Github\"\r\n\t\t\t\t/>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"mt-2 text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t{#if !$WEBUI_NAME.includes('Open WebUI')}\r\n\t\t\t\t<span class=\" text-gray-500 dark:text-gray-300 font-medium\">{$WEBUI_NAME}</span> -\r\n\t\t\t{/if}\r\n\t\t\t{$i18n.t('Created by')}\r\n\t\t\t<a\r\n\t\t\t\tclass=\" text-gray-500 dark:text-gray-300 font-medium\"\r\n\t\t\t\thref=\"https://github.com/tjbck\"\r\n\t\t\t\ttarget=\"_blank\">Timothy J. Baek</a\r\n\t\t\t>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\r\n\timport { getLanguages } from '$lib/i18n';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport { models, settings, theme, user } from '$lib/stores';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\timport AdvancedParams from './Advanced/AdvancedParams.svelte';\r\n\r\n\texport let saveSettings: Function;\r\n\texport let getModels: Function;\r\n\r\n\t// General\r\n\tlet themes = ['dark', 'light', 'rose-pine dark', 'rose-pine-dawn light', 'oled-dark'];\r\n\tlet selectedTheme = 'system';\r\n\r\n\tlet languages: Awaited<ReturnType<typeof getLanguages>> = [];\r\n\tlet lang = $i18n.language;\r\n\tlet notificationEnabled = false;\r\n\tlet system = '';\r\n\r\n\tlet showAdvanced = false;\r\n\r\n\tconst toggleNotification = async () => {\r\n\t\tconst permission = await Notification.requestPermission();\r\n\r\n\t\tif (permission === 'granted') {\r\n\t\t\tnotificationEnabled = !notificationEnabled;\r\n\t\t\tsaveSettings({ notificationEnabled: notificationEnabled });\r\n\t\t} else {\r\n\t\t\ttoast.error(\r\n\t\t\t\t$i18n.t(\r\n\t\t\t\t\t'Response notifications cannot be activated as the website permissions have been denied. Please visit your browser settings to grant the necessary access.'\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\t// Advanced\r\n\tlet requestFormat = '';\r\n\tlet keepAlive: string | null = null;\r\n\r\n\tlet params = {\r\n\t\t// Advanced\r\n\t\tseed: null,\r\n\t\ttemperature: null,\r\n\t\tfrequency_penalty: null,\r\n\t\trepeat_last_n: null,\r\n\t\tmirostat: null,\r\n\t\tmirostat_eta: null,\r\n\t\tmirostat_tau: null,\r\n\t\ttop_k: null,\r\n\t\ttop_p: null,\r\n\t\tstop: null,\r\n\t\ttfs_z: null,\r\n\t\tnum_ctx: null,\r\n\t\tnum_batch: null,\r\n\t\tnum_keep: null,\r\n\t\tmax_tokens: null,\r\n\t\tnum_gpu: null\r\n\t};\r\n\r\n\tconst toggleRequestFormat = async () => {\r\n\t\tif (requestFormat === '') {\r\n\t\t\trequestFormat = 'json';\r\n\t\t} else {\r\n\t\t\trequestFormat = '';\r\n\t\t}\r\n\r\n\t\tsaveSettings({ requestFormat: requestFormat !== '' ? requestFormat : undefined });\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tselectedTheme = localStorage.theme ?? 'system';\r\n\r\n\t\tlanguages = await getLanguages();\r\n\r\n\t\tnotificationEnabled = $settings.notificationEnabled ?? false;\r\n\t\tsystem = $settings.system ?? '';\r\n\r\n\t\trequestFormat = $settings.requestFormat ?? '';\r\n\t\tkeepAlive = $settings.keepAlive ?? null;\r\n\r\n\t\tparams = { ...params, ...$settings.params };\r\n\t\tparams.stop = $settings?.params?.stop ? ($settings?.params?.stop ?? []).join(',') : null;\r\n\t});\r\n\r\n\tconst applyTheme = (_theme: string) => {\r\n\t\tlet themeToApply = _theme === 'oled-dark' ? 'dark' : _theme;\r\n\r\n\t\tif (_theme === 'system') {\r\n\t\t\tthemeToApply = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n\t\t}\r\n\r\n\t\tif (themeToApply === 'dark' && !_theme.includes('oled')) {\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-800', '#333');\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-850', '#262626');\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-900', '#171717');\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-950', '#0d0d0d');\r\n\t\t}\r\n\r\n\t\tthemes\r\n\t\t\t.filter((e) => e !== themeToApply)\r\n\t\t\t.forEach((e) => {\r\n\t\t\t\te.split(' ').forEach((e) => {\r\n\t\t\t\t\tdocument.documentElement.classList.remove(e);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tthemeToApply.split(' ').forEach((e) => {\r\n\t\t\tdocument.documentElement.classList.add(e);\r\n\t\t});\r\n\r\n\t\tconsole.log(_theme);\r\n\t};\r\n\r\n\tconst themeChangeHandler = (_theme: string) => {\r\n\t\ttheme.set(_theme);\r\n\t\tlocalStorage.setItem('theme', _theme);\r\n\t\tif (_theme.includes('oled')) {\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-800', '#101010');\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-850', '#050505');\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-900', '#000000');\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-950', '#000000');\r\n\t\t\tdocument.documentElement.classList.add('dark');\r\n\t\t}\r\n\t\tapplyTheme(_theme);\r\n\t};\r\n</script>\r\n\r\n<div class=\"flex flex-col h-full justify-between text-sm\">\r\n\t<div class=\"  pr-1.5 overflow-y-scroll max-h-[25rem]\">\r\n\t\t<div class=\"\">\r\n\t\t\t<div class=\" mb-1 text-sm font-medium\">{$i18n.t('WebUI Settings')}</div>\r\n\r\n\t\t\t<div class=\"flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Theme')}</div>\r\n\t\t\t\t<div class=\"flex items-center relative\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\" dark:bg-gray-900 w-fit pr-8 rounded py-2 px-2 text-xs bg-transparent outline-none text-right\"\r\n\t\t\t\t\t\tbind:value={selectedTheme}\r\n\t\t\t\t\t\tplaceholder=\"Select a theme\"\r\n\t\t\t\t\t\ton:change={() => themeChangeHandler(selectedTheme)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"system\">‚öôÔ∏è {$i18n.t('System')}</option>\r\n\t\t\t\t\t\t<option value=\"dark\">üåë {$i18n.t('Dark')}</option>\r\n\t\t\t\t\t\t<option value=\"oled-dark\">üåÉ {$i18n.t('OLED Dark')}</option>\r\n\t\t\t\t\t\t<option value=\"light\">‚òÄÔ∏è {$i18n.t('Light')}</option>\r\n\t\t\t\t\t\t<option value=\"her\">üå∑ Her</option>\r\n\t\t\t\t\t\t<!-- <option value=\"rose-pine dark\">ü™ª {$i18n.t('Ros√© Pine')}</option>\r\n\t\t\t\t\t\t<option value=\"rose-pine-dawn light\">üå∑ {$i18n.t('Ros√© Pine Dawn')}</option> -->\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\" flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Language')}</div>\r\n\t\t\t\t<div class=\"flex items-center relative\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\" dark:bg-gray-900 w-fit pr-8 rounded py-2 px-2 text-xs bg-transparent outline-none text-right\"\r\n\t\t\t\t\t\tbind:value={lang}\r\n\t\t\t\t\t\tplaceholder=\"Select a language\"\r\n\t\t\t\t\t\ton:change={(e) => {\r\n\t\t\t\t\t\t\t$i18n.changeLanguage(lang);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#each languages as language}\r\n\t\t\t\t\t\t\t<option value={language['code']}>{language['title']}</option>\r\n\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{#if $i18n.language === 'en-US'}\r\n\t\t\t\t<div class=\"mb-2 text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t\tCouldn't find your language?\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tclass=\" text-gray-300 font-medium underline\"\r\n\t\t\t\t\t\thref=\"https://github.com/open-webui/open-webui/blob/main/docs/CONTRIBUTING.md#-translations-and-internationalization\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tHelp us translate Open WebUI!\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Notifications')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleNotification();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if notificationEnabled === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-850 my-3\" />\r\n\r\n\t\t<div>\r\n\t\t\t<div class=\" my-2.5 text-sm font-medium\">{$i18n.t('System Prompt')}</div>\r\n\t\t\t<textarea\r\n\t\t\t\tbind:value={system}\r\n\t\t\t\tclass=\"w-full rounded-lg p-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none resize-none\"\r\n\t\t\t\trows=\"4\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"mt-2 space-y-3 pr-1.5\">\r\n\t\t\t<div class=\"flex justify-between items-center text-sm\">\r\n\t\t\t\t<div class=\"  font-medium\">{$i18n.t('Advanced Parameters')}</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" text-xs font-medium text-gray-500\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tshowAdvanced = !showAdvanced;\r\n\t\t\t\t\t}}>{showAdvanced ? $i18n.t('Hide') : $i18n.t('Show')}</button\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\r\n\t\t\t{#if showAdvanced}\r\n\t\t\t\t<AdvancedParams admin={$user?.role === 'admin'} bind:params />\r\n\t\t\t\t<hr class=\" dark:border-gray-850\" />\r\n\r\n\t\t\t\t<div class=\" py-1 w-full justify-between\">\r\n\t\t\t\t\t<div class=\"flex w-full justify-between\">\r\n\t\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Keep Alive')}</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tkeepAlive = keepAlive === null ? '5m' : null;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{#if keepAlive === null}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('Default')} </span>\r\n\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('Custom')} </span>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{#if keepAlive !== null}\r\n\t\t\t\t\t\t<div class=\"flex mt-1 space-x-2\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t(\"e.g. '30s','10m'. Valid time units are 's', 'm', 'h'.\")}\r\n\t\t\t\t\t\t\t\tbind:value={keepAlive}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\" py-1 flex w-full justify-between\">\r\n\t\t\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Request Mode')}</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\ttoggleRequestFormat();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{#if requestFormat === ''}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('Default')} </span>\r\n\t\t\t\t\t\t\t{:else if requestFormat === 'json'}\r\n\t\t\t\t\t\t\t\t<!-- <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            viewBox=\"0 0 20 20\"\r\n                            fill=\"currentColor\"\r\n                            class=\"w-4 h-4 self-center\"\r\n                        >\r\n                            <path\r\n                                d=\"M10 2a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 2zM10 15a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 15zM10 7a3 3 0 100 6 3 3 0 000-6zM15.657 5.404a.75.75 0 10-1.06-1.06l-1.061 1.06a.75.75 0 001.06 1.06l1.06-1.06zM6.464 14.596a.75.75 0 10-1.06-1.06l-1.06 1.06a.75.75 0 001.06 1.06l1.06-1.06zM18 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0118 10zM5 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 015 10zM14.596 15.657a.75.75 0 001.06-1.06l-1.06-1.061a.75.75 0 10-1.06 1.06l1.06 1.06zM5.404 6.464a.75.75 0 001.06-1.06l-1.06-1.06a.75.75 0 10-1.061 1.06l1.06 1.06z\"\r\n                            />\r\n                        </svg> -->\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('JSON')} </span>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\"  px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ton:click={() => {\r\n\t\t\t\tsaveSettings({\r\n\t\t\t\t\tsystem: system !== '' ? system : undefined,\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tseed: (params.seed !== null ? params.seed : undefined) ?? undefined,\r\n\t\t\t\t\t\tstop: params.stop ? params.stop.split(',').filter((e) => e) : undefined,\r\n\t\t\t\t\t\ttemperature: params.temperature !== null ? params.temperature : undefined,\r\n\t\t\t\t\t\tfrequency_penalty:\r\n\t\t\t\t\t\t\tparams.frequency_penalty !== null ? params.frequency_penalty : undefined,\r\n\t\t\t\t\t\trepeat_last_n: params.repeat_last_n !== null ? params.repeat_last_n : undefined,\r\n\t\t\t\t\t\tmirostat: params.mirostat !== null ? params.mirostat : undefined,\r\n\t\t\t\t\t\tmirostat_eta: params.mirostat_eta !== null ? params.mirostat_eta : undefined,\r\n\t\t\t\t\t\tmirostat_tau: params.mirostat_tau !== null ? params.mirostat_tau : undefined,\r\n\t\t\t\t\t\ttop_k: params.top_k !== null ? params.top_k : undefined,\r\n\t\t\t\t\t\ttop_p: params.top_p !== null ? params.top_p : undefined,\r\n\t\t\t\t\t\ttfs_z: params.tfs_z !== null ? params.tfs_z : undefined,\r\n\t\t\t\t\t\tnum_ctx: params.num_ctx !== null ? params.num_ctx : undefined,\r\n\t\t\t\t\t\tnum_batch: params.num_batch !== null ? params.num_batch : undefined,\r\n\t\t\t\t\t\tnum_keep: params.num_keep !== null ? params.num_keep : undefined,\r\n\t\t\t\t\t\tmax_tokens: params.max_tokens !== null ? params.max_tokens : undefined,\r\n\t\t\t\t\t\tuse_mmap: params.use_mmap !== null ? params.use_mmap : undefined,\r\n\t\t\t\t\t\tuse_mlock: params.use_mlock !== null ? params.use_mlock : undefined,\r\n\t\t\t\t\t\tnum_thread: params.num_thread !== null ? params.num_thread : undefined,\r\n\t\t\t\t\t\tnum_gpu: params.num_gpu !== null ? params.num_gpu : undefined\r\n\t\t\t\t\t},\r\n\t\t\t\t\tkeepAlive: keepAlive ? (isNaN(keepAlive) ? keepAlive : parseInt(keepAlive)) : undefined\r\n\t\t\t\t});\r\n\t\t\t\tdispatch('save');\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { getBackendConfig } from '$lib/apis';\r\n\timport { setDefaultPromptSuggestions } from '$lib/apis/configs';\r\n\timport { config, models, settings, user } from '$lib/stores';\r\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport { updateUserInfo } from '$lib/apis/users';\r\n\timport { getUserPosition } from '$lib/utils';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveSettings: Function;\r\n\r\n\tlet backgroundImageUrl = null;\r\n\tlet inputFiles = null;\r\n\tlet filesInputElement;\r\n\r\n\t// Addons\r\n\tlet titleAutoGenerate = true;\r\n\tlet responseAutoCopy = false;\r\n\tlet widescreenMode = false;\r\n\tlet splitLargeChunks = false;\r\n\tlet scrollOnBranchChange = true;\r\n\tlet userLocation = false;\r\n\r\n\t// Interface\r\n\tlet defaultModelId = '';\r\n\tlet showUsername = false;\r\n\r\n\tlet chatBubble = true;\r\n\tlet chatDirection: 'LTR' | 'RTL' = 'LTR';\r\n\r\n\tlet showEmojiInCall = false;\r\n\tlet voiceInterruption = false;\r\n\tlet hapticFeedback = false;\r\n\r\n\tconst toggleSplitLargeChunks = async () => {\r\n\t\tsplitLargeChunks = !splitLargeChunks;\r\n\t\tsaveSettings({ splitLargeChunks: splitLargeChunks });\r\n\t};\r\n\r\n\tconst togglesScrollOnBranchChange = async () => {\r\n\t\tscrollOnBranchChange = !scrollOnBranchChange;\r\n\t\tsaveSettings({ scrollOnBranchChange: scrollOnBranchChange });\r\n\t};\r\n\r\n\tconst togglewidescreenMode = async () => {\r\n\t\twidescreenMode = !widescreenMode;\r\n\t\tsaveSettings({ widescreenMode: widescreenMode });\r\n\t};\r\n\r\n\tconst toggleChatBubble = async () => {\r\n\t\tchatBubble = !chatBubble;\r\n\t\tsaveSettings({ chatBubble: chatBubble });\r\n\t};\r\n\r\n\tconst toggleShowUsername = async () => {\r\n\t\tshowUsername = !showUsername;\r\n\t\tsaveSettings({ showUsername: showUsername });\r\n\t};\r\n\r\n\tconst toggleEmojiInCall = async () => {\r\n\t\tshowEmojiInCall = !showEmojiInCall;\r\n\t\tsaveSettings({ showEmojiInCall: showEmojiInCall });\r\n\t};\r\n\r\n\tconst toggleVoiceInterruption = async () => {\r\n\t\tvoiceInterruption = !voiceInterruption;\r\n\t\tsaveSettings({ voiceInterruption: voiceInterruption });\r\n\t};\r\n\r\n\tconst toggleHapticFeedback = async () => {\r\n\t\thapticFeedback = !hapticFeedback;\r\n\t\tsaveSettings({ hapticFeedback: hapticFeedback });\r\n\t};\r\n\r\n\tconst toggleUserLocation = async () => {\r\n\t\tuserLocation = !userLocation;\r\n\r\n\t\tif (userLocation) {\r\n\t\t\tconst position = await getUserPosition().catch((error) => {\r\n\t\t\t\ttoast.error(error.message);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (position) {\r\n\t\t\t\tawait updateUserInfo(localStorage.token, { location: position });\r\n\t\t\t\ttoast.success($i18n.t('User location successfully retrieved.'));\r\n\t\t\t} else {\r\n\t\t\t\tuserLocation = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsaveSettings({ userLocation });\r\n\t};\r\n\r\n\tconst toggleTitleAutoGenerate = async () => {\r\n\t\ttitleAutoGenerate = !titleAutoGenerate;\r\n\t\tsaveSettings({\r\n\t\t\ttitle: {\r\n\t\t\t\t...$settings.title,\r\n\t\t\t\tauto: titleAutoGenerate\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst toggleResponseAutoCopy = async () => {\r\n\t\tconst permission = await navigator.clipboard\r\n\t\t\t.readText()\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn 'granted';\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\treturn '';\r\n\t\t\t});\r\n\r\n\t\tconsole.log(permission);\r\n\r\n\t\tif (permission === 'granted') {\r\n\t\t\tresponseAutoCopy = !responseAutoCopy;\r\n\t\t\tsaveSettings({ responseAutoCopy: responseAutoCopy });\r\n\t\t} else {\r\n\t\t\ttoast.error(\r\n\t\t\t\t$i18n.t(\r\n\t\t\t\t\t'Clipboard write permission denied. Please check your browser settings to grant the necessary access.'\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tconst toggleChangeChatDirection = async () => {\r\n\t\tchatDirection = chatDirection === 'LTR' ? 'RTL' : 'LTR';\r\n\t\tsaveSettings({ chatDirection });\r\n\t};\r\n\r\n\tconst updateInterfaceHandler = async () => {\r\n\t\tsaveSettings({\r\n\t\t\tmodels: [defaultModelId]\r\n\t\t});\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\ttitleAutoGenerate = $settings?.title?.auto ?? true;\r\n\r\n\t\tresponseAutoCopy = $settings.responseAutoCopy ?? false;\r\n\t\tshowUsername = $settings.showUsername ?? false;\r\n\r\n\t\tshowEmojiInCall = $settings.showEmojiInCall ?? false;\r\n\t\tvoiceInterruption = $settings.voiceInterruption ?? false;\r\n\r\n\t\tchatBubble = $settings.chatBubble ?? true;\r\n\t\twidescreenMode = $settings.widescreenMode ?? false;\r\n\t\tsplitLargeChunks = $settings.splitLargeChunks ?? false;\r\n\t\tscrollOnBranchChange = $settings.scrollOnBranchChange ?? true;\r\n\t\tchatDirection = $settings.chatDirection ?? 'LTR';\r\n\t\tuserLocation = $settings.userLocation ?? false;\r\n\r\n\t\thapticFeedback = $settings.hapticFeedback ?? false;\r\n\r\n\t\tdefaultModelId = $settings?.models?.at(0) ?? '';\r\n\t\tif ($config?.default_models) {\r\n\t\t\tdefaultModelId = $config.default_models.split(',')[0];\r\n\t\t}\r\n\r\n\t\tbackgroundImageUrl = $settings.backgroundImageUrl ?? null;\r\n\t});\r\n</script>\r\n\r\n<form\r\n\tclass=\"flex flex-col h-full justify-between space-y-3 text-sm\"\r\n\ton:submit|preventDefault={() => {\r\n\t\tupdateInterfaceHandler();\r\n\t\tdispatch('save');\r\n\t}}\r\n>\r\n\t<input\r\n\t\tbind:this={filesInputElement}\r\n\t\tbind:files={inputFiles}\r\n\t\ttype=\"file\"\r\n\t\thidden\r\n\t\taccept=\"image/*\"\r\n\t\ton:change={() => {\r\n\t\t\tlet reader = new FileReader();\r\n\t\t\treader.onload = (event) => {\r\n\t\t\t\tlet originalImageUrl = `${event.target.result}`;\r\n\r\n\t\t\t\tbackgroundImageUrl = originalImageUrl;\r\n\t\t\t\tsaveSettings({ backgroundImageUrl });\r\n\t\t\t};\r\n\r\n\t\t\tif (\r\n\t\t\t\tinputFiles &&\r\n\t\t\t\tinputFiles.length > 0 &&\r\n\t\t\t\t['image/gif', 'image/webp', 'image/jpeg', 'image/png'].includes(inputFiles[0]['type'])\r\n\t\t\t) {\r\n\t\t\t\treader.readAsDataURL(inputFiles[0]);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Unsupported File Type '${inputFiles[0]['type']}'.`);\r\n\t\t\t\tinputFiles = null;\r\n\t\t\t}\r\n\t\t}}\r\n\t/>\r\n\r\n\t<div class=\" space-y-3 pr-1.5 overflow-y-scroll max-h-[25rem] scrollbar-hidden\">\r\n\t\t<div class=\" space-y-1 mb-3\">\r\n\t\t\t<div class=\"mb-2\">\r\n\t\t\t\t<div class=\"flex justify-between items-center text-xs\">\r\n\t\t\t\t\t<div class=\" text-sm font-medium\">{$i18n.t('Default Model')}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"flex-1 mr-2\">\r\n\t\t\t\t<select\r\n\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\tbind:value={defaultModelId}\r\n\t\t\t\t\tplaceholder=\"Select a model\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<option value=\"\" disabled selected>{$i18n.t('Select a model')}</option>\r\n\t\t\t\t\t{#each $models.filter((model) => model.id) as model}\r\n\t\t\t\t\t\t<option value={model.id} class=\"bg-gray-100 dark:bg-gray-700\">{model.name}</option>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<hr class=\" dark:border-gray-850\" />\r\n\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-1.5 text-sm font-medium\">{$i18n.t('UI')}</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">{$i18n.t('Chat Bubble UI')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleChatBubble();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if chatBubble === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{#if !$settings.chatBubble}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t\t<div class=\" self-center text-xs\">\r\n\t\t\t\t\t\t\t{$i18n.t('Display the username instead of You in the Chat')}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\ttoggleShowUsername();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{#if showUsername === true}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">{$i18n.t('Widescreen Mode')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttogglewidescreenMode();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if widescreenMode === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">{$i18n.t('Chat direction')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={toggleChangeChatDirection}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if chatDirection === 'LTR'}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('LTR')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('RTL')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">\r\n\t\t\t\t\t\t{$i18n.t('Fluidly stream large external response chunks')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleSplitLargeChunks();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if splitLargeChunks === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">\r\n\t\t\t\t\t\t{$i18n.t('Scroll to bottom when switching between branches')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttogglesScrollOnBranchChange();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if scrollOnBranchChange === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">\r\n\t\t\t\t\t\t{$i18n.t('Chat Background Image')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tif (backgroundImageUrl !== null) {\r\n\t\t\t\t\t\t\t\tbackgroundImageUrl = null;\r\n\t\t\t\t\t\t\t\tsaveSettings({ backgroundImageUrl });\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfilesInputElement.click();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if backgroundImageUrl !== null}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Reset')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Upload')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\" my-1.5 text-sm font-medium\">{$i18n.t('Chat')}</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">{$i18n.t('Title Auto-Generation')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleTitleAutoGenerate();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if titleAutoGenerate === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">\r\n\t\t\t\t\t\t{$i18n.t('Response AutoCopy to Clipboard')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleResponseAutoCopy();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if responseAutoCopy === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">{$i18n.t('Allow User Location')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleUserLocation();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if userLocation === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">{$i18n.t('Haptic Feedback')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleHapticFeedback();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if hapticFeedback === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\" my-1.5 text-sm font-medium\">{$i18n.t('Voice')}</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">{$i18n.t('Allow Voice Interruption in Call')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleVoiceInterruption();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if voiceInterruption === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs\">{$i18n.t('Display Emoji in Call')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleEmojiInCall();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if showEmojiInCall === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ttype=\"submit\"\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</form>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\r\n\r\n\timport { user, settings, config } from '$lib/stores';\r\n\timport { getVoices as _getVoices } from '$lib/apis/audio';\r\n\r\n\timport Switch from '$lib/components/common/Switch.svelte';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveSettings: Function;\r\n\r\n\t// Audio\r\n\tlet conversationMode = false;\r\n\tlet speechAutoSend = false;\r\n\tlet responseAutoPlayback = false;\r\n\tlet nonLocalVoices = false;\r\n\r\n\tlet STTEngine = '';\r\n\r\n\tlet voices = [];\r\n\tlet voice = '';\r\n\r\n\tconst getVoices = async () => {\r\n\t\tif ($config.audio.tts.engine === '') {\r\n\t\t\tconst getVoicesLoop = setInterval(async () => {\r\n\t\t\t\tvoices = await speechSynthesis.getVoices();\r\n\r\n\t\t\t\t// do your loop\r\n\t\t\t\tif (voices.length > 0) {\r\n\t\t\t\t\tclearInterval(getVoicesLoop);\r\n\t\t\t\t}\r\n\t\t\t}, 100);\r\n\t\t} else {\r\n\t\t\tconst res = await _getVoices(localStorage.token).catch((e) => {\r\n\t\t\t\ttoast.error(e);\r\n\t\t\t});\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tvoices = res.voices;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst toggleResponseAutoPlayback = async () => {\r\n\t\tresponseAutoPlayback = !responseAutoPlayback;\r\n\t\tsaveSettings({ responseAutoPlayback: responseAutoPlayback });\r\n\t};\r\n\r\n\tconst toggleSpeechAutoSend = async () => {\r\n\t\tspeechAutoSend = !speechAutoSend;\r\n\t\tsaveSettings({ speechAutoSend: speechAutoSend });\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tconversationMode = $settings.conversationMode ?? false;\r\n\t\tspeechAutoSend = $settings.speechAutoSend ?? false;\r\n\t\tresponseAutoPlayback = $settings.responseAutoPlayback ?? false;\r\n\r\n\t\tSTTEngine = $settings?.audio?.stt?.engine ?? '';\r\n\r\n\t\tif ($settings?.audio?.tts?.defaultVoice === $config.audio.tts.voice) {\r\n\t\t\tvoice = $settings?.audio?.tts?.voice ?? $config.audio.tts.voice ?? '';\r\n\t\t} else {\r\n\t\t\tvoice = $config.audio.tts.voice ?? '';\r\n\t\t}\r\n\r\n\t\tnonLocalVoices = $settings.audio?.tts?.nonLocalVoices ?? false;\r\n\r\n\t\tawait getVoices();\r\n\t});\r\n</script>\r\n\r\n<form\r\n\tclass=\"flex flex-col h-full justify-between space-y-3 text-sm\"\r\n\ton:submit|preventDefault={async () => {\r\n\t\tsaveSettings({\r\n\t\t\taudio: {\r\n\t\t\t\tstt: {\r\n\t\t\t\t\tengine: STTEngine !== '' ? STTEngine : undefined\r\n\t\t\t\t},\r\n\t\t\t\ttts: {\r\n\t\t\t\t\tvoice: voice !== '' ? voice : undefined,\r\n\t\t\t\t\tdefaultVoice: $config?.audio?.tts?.voice ?? '',\r\n\t\t\t\t\tnonLocalVoices: $config.audio.tts.engine === '' ? nonLocalVoices : undefined\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdispatch('save');\r\n\t}}\r\n>\r\n\t<div class=\" space-y-3 pr-1.5 overflow-y-scroll max-h-[25rem]\">\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-1 text-sm font-medium\">{$i18n.t('STT Settings')}</div>\r\n\r\n\t\t\t{#if $config.audio.stt.engine !== 'web'}\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Speech-to-Text Engine')}</div>\r\n\t\t\t\t\t<div class=\"flex items-center relative\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclass=\"dark:bg-gray-900 w-fit pr-8 rounded px-2 p-1 text-xs bg-transparent outline-none text-right\"\r\n\t\t\t\t\t\t\tbind:value={STTEngine}\r\n\t\t\t\t\t\t\tplaceholder=\"Select an engine\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"\">{$i18n.t('Default')}</option>\r\n\t\t\t\t\t\t\t<option value=\"web\">{$i18n.t('Web API')}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">\r\n\t\t\t\t\t{$i18n.t('Instant Auto-Send After Voice Transcription')}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\ttoggleSpeechAutoSend();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{#if speechAutoSend === true}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-1 text-sm font-medium\">{$i18n.t('TTS Settings')}</div>\r\n\r\n\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Auto-playback response')}</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\ttoggleResponseAutoPlayback();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{#if responseAutoPlayback === true}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-850\" />\r\n\r\n\t\t{#if $config.audio.tts.engine === ''}\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Set Voice')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\tbind:value={voice}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"\" selected={voice !== ''}>{$i18n.t('Default')}</option>\r\n\t\t\t\t\t\t\t{#each voices.filter((v) => nonLocalVoices || v.localService === true) as _voice}\r\n\t\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\t\tvalue={_voice.name}\r\n\t\t\t\t\t\t\t\t\tclass=\"bg-gray-100 dark:bg-gray-700\"\r\n\t\t\t\t\t\t\t\t\tselected={voice === _voice.name}>{_voice.name}</option\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"flex items-center justify-between my-1.5\">\r\n\t\t\t\t\t<div class=\"text-xs\">\r\n\t\t\t\t\t\t{$i18n.t('Allow non-local voices')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"mt-1\">\r\n\t\t\t\t\t\t<Switch bind:state={nonLocalVoices} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{:else if $config.audio.tts.engine !== ''}\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Set Voice')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tlist=\"voice-list\"\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\tbind:value={voice}\r\n\t\t\t\t\t\t\tplaceholder=\"Select a voice\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<datalist id=\"voice-list\">\r\n\t\t\t\t\t\t\t{#each voices as voice}\r\n\t\t\t\t\t\t\t\t<option value={voice.id}>{voice.name}</option>\r\n\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t</datalist>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ttype=\"submit\"\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</form>\r\n","<script lang=\"ts\">\r\n\timport fileSaver from 'file-saver';\r\n\tconst { saveAs } = fileSaver;\r\n\r\n\timport { chats, user, settings, scrollPaginationEnabled, currentChatPage } from '$lib/stores';\r\n\r\n\timport {\r\n\t\tarchiveAllChats,\r\n\t\tcreateNewChat,\r\n\t\tdeleteAllChats,\r\n\t\tgetAllChats,\r\n\t\tgetAllUserChats,\r\n\t\tgetChatList\r\n\t} from '$lib/apis/chats';\r\n\timport { getImportOrigin, convertOpenAIChats } from '$lib/utils';\r\n\timport { onMount, getContext } from 'svelte';\r\n\timport { goto } from '$app/navigation';\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveSettings: Function;\r\n\r\n\t// Chats\r\n\tlet importFiles;\r\n\r\n\tlet showArchiveConfirm = false;\r\n\tlet showDeleteConfirm = false;\r\n\r\n\tlet chatImportInputElement: HTMLInputElement;\r\n\r\n\t$: if (importFiles) {\r\n\t\tconsole.log(importFiles);\r\n\r\n\t\tlet reader = new FileReader();\r\n\t\treader.onload = (event) => {\r\n\t\t\tlet chats = JSON.parse(event.target.result);\r\n\t\t\tconsole.log(chats);\r\n\t\t\tif (getImportOrigin(chats) == 'openai') {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tchats = convertOpenAIChats(chats);\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log('Unable to import chats:', error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\timportChats(chats);\r\n\t\t};\r\n\r\n\t\tif (importFiles.length > 0) {\r\n\t\t\treader.readAsText(importFiles[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tconst importChats = async (_chats) => {\r\n\t\tfor (const chat of _chats) {\r\n\t\t\tconsole.log(chat);\r\n\r\n\t\t\tif (chat.chat) {\r\n\t\t\t\tawait createNewChat(localStorage.token, chat.chat);\r\n\t\t\t} else {\r\n\t\t\t\tawait createNewChat(localStorage.token, chat);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcurrentChatPage.set(1);\r\n\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\r\n\t\tscrollPaginationEnabled.set(true);\r\n\t};\r\n\r\n\tconst exportChats = async () => {\r\n\t\tlet blob = new Blob([JSON.stringify(await getAllChats(localStorage.token))], {\r\n\t\t\ttype: 'application/json'\r\n\t\t});\r\n\t\tsaveAs(blob, `chat-export-${Date.now()}.json`);\r\n\t};\r\n\r\n\tconst archiveAllChatsHandler = async () => {\r\n\t\tawait goto('/');\r\n\t\tawait archiveAllChats(localStorage.token).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t});\r\n\r\n\t\tcurrentChatPage.set(1);\r\n\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\r\n\t\tscrollPaginationEnabled.set(true);\r\n\t};\r\n\r\n\tconst deleteAllChatsHandler = async () => {\r\n\t\tawait goto('/');\r\n\t\tawait deleteAllChats(localStorage.token).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t});\r\n\r\n\t\tcurrentChatPage.set(1);\r\n\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\r\n\t\tscrollPaginationEnabled.set(true);\r\n\t};\r\n</script>\r\n\r\n<div class=\"flex flex-col h-full justify-between space-y-3 text-sm max-h-[22rem]\">\r\n\t<div class=\" space-y-2\">\r\n\t\t<div class=\"flex flex-col\">\r\n\t\t\t<input\r\n\t\t\t\tid=\"chat-import-input\"\r\n\t\t\t\tbind:this={chatImportInputElement}\r\n\t\t\t\tbind:files={importFiles}\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\taccept=\".json\"\r\n\t\t\t\thidden\r\n\t\t\t/>\r\n\t\t\t<button\r\n\t\t\t\tclass=\" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tchatImportInputElement.click();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z\"\r\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Import Chats')}</div>\r\n\t\t\t</button>\r\n\t\t\t<button\r\n\t\t\t\tclass=\" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\texportChats();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 3.5a.75.75 0 0 1 .75.75v2.69l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06l.72.72V6.25A.75.75 0 0 1 8 5.5Z\"\r\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Export Chats')}</div>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-850\" />\r\n\r\n\t\t<div class=\"flex flex-col\">\r\n\t\t\t{#if showArchiveConfirm}\r\n\t\t\t\t<div class=\"flex justify-between rounded-md items-center py-2 px-3.5 w-full transition\">\r\n\t\t\t\t\t<div class=\"flex items-center space-x-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path d=\"M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z\" />\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM5.72 7.47a.75.75 0 0 1 1.06 0L8 8.69l1.22-1.22a.75.75 0 1 1 1.06 1.06L9.06 9.75l1.22 1.22a.75.75 0 1 1-1.06 1.06L8 10.81l-1.22 1.22a.75.75 0 0 1-1.06-1.06l1.22-1.22-1.22-1.22a.75.75 0 0 1 0-1.06Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t<span>{$i18n.t('Are you sure?')}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex space-x-1.5 items-center\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"hover:text-white transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tarchiveAllChatsHandler();\r\n\t\t\t\t\t\t\t\tshowArchiveConfirm = false;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"hover:text-white transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tshowArchiveConfirm = false;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{:else}\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tshowArchiveConfirm = true;\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"size-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087Zm6.163 3.75A.75.75 0 0 1 10 12h4a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.75-.75Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Archive All Chats')}</div>\r\n\t\t\t\t</button>\r\n\t\t\t{/if}\r\n\r\n\t\t\t{#if showDeleteConfirm}\r\n\t\t\t\t<div class=\"flex justify-between rounded-md items-center py-2 px-3.5 w-full transition\">\r\n\t\t\t\t\t<div class=\"flex items-center space-x-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path d=\"M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z\" />\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM5.72 7.47a.75.75 0 0 1 1.06 0L8 8.69l1.22-1.22a.75.75 0 1 1 1.06 1.06L9.06 9.75l1.22 1.22a.75.75 0 1 1-1.06 1.06L8 10.81l-1.22 1.22a.75.75 0 0 1-1.06-1.06l1.22-1.22-1.22-1.22a.75.75 0 0 1 0-1.06Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t<span>{$i18n.t('Are you sure?')}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex space-x-1.5 items-center\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"hover:text-white transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tdeleteAllChatsHandler();\r\n\t\t\t\t\t\t\t\tshowDeleteConfirm = false;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"hover:text-white transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tshowDeleteConfirm = false;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{:else}\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tshowDeleteConfirm = true;\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm7 7a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1 0-1.5h4.5A.75.75 0 0 1 11 9Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Delete All Chats')}</div>\r\n\t\t\t\t</button>\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\texport let className = 'w-4 h-4';\r\n</script>\r\n\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class={className}>\r\n\t<path\r\n\t\tfill-rule=\"evenodd\"\r\n\t\td=\"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z\"\r\n\t\tclip-rule=\"evenodd\"\r\n\t/>\r\n</svg>\r\n","<script>\r\n\timport { createEventDispatcher, getContext } from 'svelte';\r\n\r\n\timport Modal from '$lib/components/common/Modal.svelte';\r\n\timport { addNewMemory, updateMemoryById } from '$lib/apis/memories';\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\texport let show;\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet loading = false;\r\n\tlet content = '';\r\n\r\n\tconst submitHandler = async () => {\r\n\t\tloading = true;\r\n\r\n\t\tconst res = await addNewMemory(localStorage.token, content).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\tconsole.log(res);\r\n\t\t\ttoast.success($i18n.t('Memory added successfully'));\r\n\t\t\tcontent = '';\r\n\t\t\tshow = false;\r\n\t\t\tdispatch('save');\r\n\t\t}\r\n\r\n\t\tloading = false;\r\n\t};\r\n</script>\r\n\r\n<Modal bind:show size=\"sm\">\r\n\t<div>\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">\r\n\t\t\t\t{$i18n.t('Add Memory')}\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200\">\r\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\r\n\t\t\t\t<form\r\n\t\t\t\t\tclass=\"flex flex-col w-full\"\r\n\t\t\t\t\ton:submit|preventDefault={() => {\r\n\t\t\t\t\t\tsubmitHandler();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tbind:value={content}\r\n\t\t\t\t\t\t\tclass=\" bg-transparent w-full text-sm resize-none rounded-xl p-3 outline outline-1 outline-gray-100 dark:outline-gray-800\"\r\n\t\t\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter a detail about yourself for your LLMs to recall')}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div class=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t‚ìò {$i18n.t('Refer to yourself as \"User\" (e.g., \"User is learning Spanish\")')}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex justify-end pt-1 text-sm font-medium\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-3xl flex flex-row space-x-1 items-center {loading\r\n\t\t\t\t\t\t\t\t? ' cursor-not-allowed'\r\n\t\t\t\t\t\t\t\t: ''}\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{$i18n.t('Add')}\r\n\r\n\t\t\t\t\t\t\t{#if loading}\r\n\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t><style>\r\n\t\t\t\t\t\t\t\t\t\t\t.spinner_ajPY {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttransform-origin: center;\r\n\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\r\n\t\t\t\t\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</style><path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\r\n\t\t\t\t\t\t\t\t\t\t\topacity=\".25\"\r\n\t\t\t\t\t\t\t\t\t\t/><path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\r\n\t\t\t\t\t\t\t\t\t\t/></svg\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n","<script>\r\n\timport { createEventDispatcher, getContext } from 'svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\timport { updateMemoryById } from '$lib/apis/memories';\r\n\r\n\timport Modal from '$lib/components/common/Modal.svelte';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\texport let show;\r\n\texport let memory = {};\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet loading = false;\r\n\tlet content = '';\r\n\r\n\t$: if (show) {\r\n\t\tsetContent();\r\n\t}\r\n\r\n\tconst setContent = () => {\r\n\t\tcontent = memory.content;\r\n\t};\r\n\r\n\tconst submitHandler = async () => {\r\n\t\tloading = true;\r\n\r\n\t\tconst res = await updateMemoryById(localStorage.token, memory.id, content).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\tconsole.log(res);\r\n\t\t\ttoast.success($i18n.t('Memory updated successfully'));\r\n\t\t\tdispatch('save');\r\n\t\t\tshow = false;\r\n\t\t}\r\n\r\n\t\tloading = false;\r\n\t};\r\n</script>\r\n\r\n<Modal bind:show size=\"sm\">\r\n\t<div>\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">\r\n\t\t\t\t{$i18n.t('Edit Memory')}\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200\">\r\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\r\n\t\t\t\t<form\r\n\t\t\t\t\tclass=\"flex flex-col w-full\"\r\n\t\t\t\t\ton:submit|preventDefault={() => {\r\n\t\t\t\t\t\tsubmitHandler();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tbind:value={content}\r\n\t\t\t\t\t\t\tclass=\" bg-transparent w-full text-sm resize-none rounded-xl p-3 outline outline-1 outline-gray-100 dark:outline-gray-800\"\r\n\t\t\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter a detail about yourself for your LLMs to recall')}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div class=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t‚ìò {$i18n.t('Refer to yourself as \"User\" (e.g., \"User is learning Spanish\")')}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex justify-end pt-1 text-sm font-medium\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-3xl flex flex-row space-x-1 items-center {loading\r\n\t\t\t\t\t\t\t\t? ' cursor-not-allowed'\r\n\t\t\t\t\t\t\t\t: ''}\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{$i18n.t('Update')}\r\n\r\n\t\t\t\t\t\t\t{#if loading}\r\n\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t><style>\r\n\t\t\t\t\t\t\t\t\t\t\t.spinner_ajPY {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttransform-origin: center;\r\n\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\r\n\t\t\t\t\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</style><path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\r\n\t\t\t\t\t\t\t\t\t\t\topacity=\".25\"\r\n\t\t\t\t\t\t\t\t\t\t/><path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\r\n\t\t\t\t\t\t\t\t\t\t/></svg\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport dayjs from 'dayjs';\r\n\timport { getContext, createEventDispatcher } from 'svelte';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport Modal from '$lib/components/common/Modal.svelte';\r\n\timport AddMemoryModal from './AddMemoryModal.svelte';\r\n\timport { deleteMemoriesByUserId, deleteMemoryById, getMemories } from '$lib/apis/memories';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport { error } from '@sveltejs/kit';\r\n\timport EditMemoryModal from './EditMemoryModal.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n\r\n\tlet memories = [];\r\n\tlet loading = true;\r\n\r\n\tlet showAddMemoryModal = false;\r\n\tlet showEditMemoryModal = false;\r\n\r\n\tlet selectedMemory = null;\r\n\r\n\t$: if (show && memories.length === 0 && loading) {\r\n\t\t(async () => {\r\n\t\t\tmemories = await getMemories(localStorage.token);\r\n\t\t\tloading = false;\r\n\t\t})();\r\n\t}\r\n</script>\r\n\r\n<Modal size=\"xl\" bind:show>\r\n\t<div>\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Memory')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col w-full px-5 pb-5 dark:text-gray-200\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6 h-[28rem] max-h-screen outline outline-1 rounded-xl outline-gray-100 dark:outline-gray-800 mb-4 mt-1\"\r\n\t\t\t>\r\n\t\t\t\t{#if memories.length > 0}\r\n\t\t\t\t\t<div class=\"text-left text-sm w-full mb-4 overflow-y-scroll\">\r\n\t\t\t\t\t\t<div class=\"relative overflow-x-auto\">\r\n\t\t\t\t\t\t\t<table class=\"w-full text-sm text-left text-gray-600 dark:text-gray-400 table-auto\">\r\n\t\t\t\t\t\t\t\t<thead\r\n\t\t\t\t\t\t\t\t\tclass=\"text-xs text-gray-700 uppercase bg-transparent dark:text-gray-200 border-b-2 dark:border-gray-800\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2\"> {$i18n.t('Name')} </th>\r\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2 hidden md:flex\">\r\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Last Modified')}\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2 text-right\" />\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t{#each memories as memory}\r\n\t\t\t\t\t\t\t\t\t\t<tr class=\"border-b dark:border-gray-800 items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"px-3 py-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"line-clamp-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{memory.content}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td class=\" px-3 py-1 hidden md:flex h-[2.5rem]\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"my-auto whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{dayjs(memory.updated_at * 1000).format(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$i18n.t('MMMM DD, YYYY hh:mm:ss A')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"px-3 py-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex justify-end w-full\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Edit\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedMemory = memory;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowEditMemoryModal = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4 s-FoVA_WMOgxUD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t><path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"s-FoVA_WMOgxUD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/></svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Delete\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst res = await deleteMemoryById(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.token,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmemory.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.success($i18n.t('Memory deleted successfully'));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmemories = await getMemories(localStorage.token);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{:else}\r\n\t\t\t\t\t<div class=\"text-center flex h-full text-sm w-full\">\r\n\t\t\t\t\t\t<div class=\" my-auto pb-10 px-4 w-full text-gray-500\">\r\n\t\t\t\t\t\t\t{$i18n.t('Memories accessible by LLMs will be shown here.')}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"flex text-sm font-medium gap-1.5\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tshowAddMemoryModal = true;\r\n\t\t\t\t\t}}>{$i18n.t('Add Memory')}</button\r\n\t\t\t\t>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" px-3.5 py-1.5 font-medium text-red-500 hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-red-300 dark:outline-red-800 rounded-3xl\"\r\n\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\tconst res = await deleteMemoriesByUserId(localStorage.token).catch((error) => {\r\n\t\t\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Memory cleared successfully'));\r\n\t\t\t\t\t\t\tmemories = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}>{$i18n.t('Clear memory')}</button\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n\r\n<AddMemoryModal\r\n\tbind:show={showAddMemoryModal}\r\n\ton:save={async () => {\r\n\t\tmemories = await getMemories(localStorage.token);\r\n\t}}\r\n/>\r\n\r\n<EditMemoryModal\r\n\tbind:show={showEditMemoryModal}\r\n\tmemory={selectedMemory}\r\n\ton:save={async () => {\r\n\t\tmemories = await getMemories(localStorage.token);\r\n\t}}\r\n/>\r\n","<script lang=\"ts\">\r\n\timport { getBackendConfig } from '$lib/apis';\r\n\timport { setDefaultPromptSuggestions } from '$lib/apis/configs';\r\n\timport Switch from '$lib/components/common/Switch.svelte';\r\n\timport { config, models, settings, user } from '$lib/stores';\r\n\timport { createEventDispatcher, onMount, getContext, tick } from 'svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport ManageModal from './Personalization/ManageModal.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveSettings: Function;\r\n\r\n\tlet showManageModal = false;\r\n\r\n\t// Addons\r\n\tlet enableMemory = false;\r\n\r\n\tonMount(async () => {\r\n\t\tenableMemory = $settings?.memory ?? false;\r\n\t});\r\n</script>\r\n\r\n<ManageModal bind:show={showManageModal} />\r\n\r\n<form\r\n\tclass=\"flex flex-col h-full justify-between space-y-3 text-sm\"\r\n\ton:submit|preventDefault={() => {\r\n\t\tdispatch('save');\r\n\t}}\r\n>\r\n\t<div class=\"  pr-1.5 py-1 overflow-y-scroll max-h-[25rem]\">\r\n\t\t<div>\r\n\t\t\t<div class=\"flex items-center justify-between mb-1\">\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\tcontent={$i18n.t(\r\n\t\t\t\t\t\t'This is an experimental feature, it may not function as expected and is subject to change at any time.'\r\n\t\t\t\t\t)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"text-sm font-medium\">\r\n\t\t\t\t\t\t{$i18n.t('Memory')}\r\n\r\n\t\t\t\t\t\t<span class=\" text-xs text-gray-500\">({$i18n.t('Experimental')})</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t<Switch\r\n\t\t\t\t\t\tbind:state={enableMemory}\r\n\t\t\t\t\t\ton:change={async () => {\r\n\t\t\t\t\t\t\tsaveSettings({ memory: enableMemory });\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">\r\n\t\t\t<div>\r\n\t\t\t\t{$i18n.t(\r\n\t\t\t\t\t\"You can personalize your interactions with LLMs by adding memories through the 'Manage' button below, making them more helpful and tailored to you.\"\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- <div class=\"mt-3\">\r\n\t\t\t\tTo understand what LLM remembers or teach it something new, just chat with it:\r\n\r\n\t\t\t\t<div>- ‚ÄúRemember that I like concise responses.‚Äù</div>\r\n\t\t\t\t<div>- ‚ÄúI just got a puppy!‚Äù</div>\r\n\t\t\t\t<div>- ‚ÄúWhat do you remember about me?‚Äù</div>\r\n\t\t\t\t<div>- ‚ÄúWhere did we leave off on my last project?‚Äù</div>\r\n\t\t\t</div> -->\r\n\t\t</div>\r\n\r\n\t\t<div class=\"mt-3 mb-1 ml-1\">\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\" px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshowManageModal = true;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{$i18n.t('Manage')}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ttype=\"submit\"\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</form>\r\n","<script lang=\"ts\">\r\n\timport { getContext, tick } from 'svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { models, settings, user } from '$lib/stores';\r\n\timport { updateUserSettings } from '$lib/apis/users';\r\n\timport { getModels as _getModels } from '$lib/apis';\r\n\timport { goto } from '$app/navigation';\r\n\r\n\timport Modal from '../common/Modal.svelte';\r\n\timport Account from './Settings/Account.svelte';\r\n\timport About from './Settings/About.svelte';\r\n\timport General from './Settings/General.svelte';\r\n\timport Interface from './Settings/Interface.svelte';\r\n\timport Audio from './Settings/Audio.svelte';\r\n\timport Chats from './Settings/Chats.svelte';\r\n\timport User from '../icons/User.svelte';\r\n\timport Personalization from './Settings/Personalization.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n\r\n\tconst saveSettings = async (updated) => {\r\n\t\tconsole.log(updated);\r\n\t\tawait settings.set({ ...$settings, ...updated });\r\n\t\tawait models.set(await getModels());\r\n\t\tawait updateUserSettings(localStorage.token, { ui: $settings });\r\n\t};\r\n\r\n\tconst getModels = async () => {\r\n\t\treturn await _getModels(localStorage.token);\r\n\t};\r\n\r\n\tlet selectedTab = 'general';\r\n\r\n\t// Function to handle sideways scrolling\r\n\tconst scrollHandler = (event) => {\r\n\t\tconst settingsTabsContainer = document.getElementById('settings-tabs-container');\r\n\t\tif (settingsTabsContainer) {\r\n\t\t\tevent.preventDefault(); // Prevent default vertical scrolling\r\n\t\t\tsettingsTabsContainer.scrollLeft += event.deltaY; // Scroll sideways\r\n\t\t}\r\n\t};\r\n\r\n\tconst addScrollListener = async () => {\r\n\t\tawait tick();\r\n\t\tconst settingsTabsContainer = document.getElementById('settings-tabs-container');\r\n\t\tif (settingsTabsContainer) {\r\n\t\t\tsettingsTabsContainer.addEventListener('wheel', scrollHandler);\r\n\t\t}\r\n\t};\r\n\r\n\tconst removeScrollListener = async () => {\r\n\t\tawait tick();\r\n\t\tconst settingsTabsContainer = document.getElementById('settings-tabs-container');\r\n\t\tif (settingsTabsContainer) {\r\n\t\t\tsettingsTabsContainer.removeEventListener('wheel', scrollHandler);\r\n\t\t}\r\n\t};\r\n\r\n\t$: if (show) {\r\n\t\taddScrollListener();\r\n\t} else {\r\n\t\tremoveScrollListener();\r\n\t}\r\n</script>\r\n\r\n<Modal bind:show>\r\n\t<div class=\"text-gray-700 dark:text-gray-100\">\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Settings')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col md:flex-row w-full p-4 md:space-x-4\">\r\n\t\t\t<div\r\n\t\t\t\tid=\"settings-tabs-container\"\r\n\t\t\t\tclass=\"tabs flex flex-row overflow-x-auto space-x-1 md:space-x-0 md:space-y-1 md:flex-col flex-1 md:flex-none md:w-40 dark:text-gray-200 text-xs text-left mb-3 md:mb-0\"\r\n\t\t\t>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\r\n\t\t\t\t\t'general'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-800'\r\n\t\t\t\t\t\t: ' hover:bg-gray-100 dark:hover:bg-gray-850'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'general';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M8.34 1.804A1 1 0 019.32 1h1.36a1 1 0 01.98.804l.295 1.473c.497.144.971.342 1.416.587l1.25-.834a1 1 0 011.262.125l.962.962a1 1 0 01.125 1.262l-.834 1.25c.245.445.443.919.587 1.416l1.473.294a1 1 0 01.804.98v1.361a1 1 0 01-.804.98l-1.473.295a6.95 6.95 0 01-.587 1.416l.834 1.25a1 1 0 01-.125 1.262l-.962.962a1 1 0 01-1.262.125l-1.25-.834a6.953 6.953 0 01-1.416.587l-.294 1.473a1 1 0 01-.98.804H9.32a1 1 0 01-.98-.804l-.295-1.473a6.957 6.957 0 01-1.416-.587l-1.25.834a1 1 0 01-1.262-.125l-.962-.962a1 1 0 01-.125-1.262l.834-1.25a6.957 6.957 0 01-.587-1.416l-1.473-.294A1 1 0 011 10.68V9.32a1 1 0 01.804-.98l1.473-.295c.144-.497.342-.971.587-1.416l-.834-1.25a1 1 0 01.125-1.262l.962-.962A1 1 0 015.38 3.03l1.25.834a6.957 6.957 0 011.416-.587l.294-1.473zM13 10a3 3 0 11-6 0 3 3 0 016 0z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('General')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\r\n\t\t\t\t\t'interface'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-800'\r\n\t\t\t\t\t\t: ' hover:bg-gray-100 dark:hover:bg-gray-850'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'interface';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M2 4.25A2.25 2.25 0 0 1 4.25 2h7.5A2.25 2.25 0 0 1 14 4.25v5.5A2.25 2.25 0 0 1 11.75 12h-1.312c.1.128.21.248.328.36a.75.75 0 0 1 .234.545v.345a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-.345a.75.75 0 0 1 .234-.545c.118-.111.228-.232.328-.36H4.25A2.25 2.25 0 0 1 2 9.75v-5.5Zm2.25-.75a.75.75 0 0 0-.75.75v4.5c0 .414.336.75.75.75h7.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 0 0-.75-.75h-7.5Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Interface')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\r\n\t\t\t\t\t'personalization'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-800'\r\n\t\t\t\t\t\t: ' hover:bg-gray-100 dark:hover:bg-gray-850'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'personalization';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<User />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Personalization')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\r\n\t\t\t\t\t'audio'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-800'\r\n\t\t\t\t\t\t: ' hover:bg-gray-100 dark:hover:bg-gray-850'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'audio';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M7.557 2.066A.75.75 0 0 1 8 2.75v10.5a.75.75 0 0 1-1.248.56L3.59 11H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.59l3.162-2.81a.75.75 0 0 1 .805-.124ZM12.95 3.05a.75.75 0 1 0-1.06 1.06 5.5 5.5 0 0 1 0 7.78.75.75 0 1 0 1.06 1.06 7 7 0 0 0 0-9.9Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M10.828 5.172a.75.75 0 1 0-1.06 1.06 2.5 2.5 0 0 1 0 3.536.75.75 0 1 0 1.06 1.06 4 4 0 0 0 0-5.656Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Audio')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\r\n\t\t\t\t\t'chats'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-800'\r\n\t\t\t\t\t\t: ' hover:bg-gray-100 dark:hover:bg-gray-850'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'chats';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M8 2C4.262 2 1 4.57 1 8c0 1.86.98 3.486 2.455 4.566a3.472 3.472 0 0 1-.469 1.26.75.75 0 0 0 .713 1.14 6.961 6.961 0 0 0 3.06-1.06c.403.062.818.094 1.241.094 3.738 0 7-2.57 7-6s-3.262-6-7-6ZM5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm7-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Chats')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\r\n\t\t\t\t\t'account'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-800'\r\n\t\t\t\t\t\t: ' hover:bg-gray-100 dark:hover:bg-gray-850'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'account';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-5-2a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM8 9c-1.825 0-3.422.977-4.295 2.437A5.49 5.49 0 0 0 8 13.5a5.49 5.49 0 0 0 4.294-2.063A4.997 4.997 0 0 0 8 9Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Account')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t{#if $user.role === 'admin'}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\r\n\t\t\t\t\t\t'admin'\r\n\t\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-800'\r\n\t\t\t\t\t\t\t: ' hover:bg-gray-100 dark:hover:bg-gray-850'}\"\r\n\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\tawait goto('/admin/settings');\r\n\t\t\t\t\t\t\tshow = false;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"size-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\td=\"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z\"\r\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Admin Settings')}</div>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t{/if}\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-left transition {selectedTab ===\r\n\t\t\t\t\t'about'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-800'\r\n\t\t\t\t\t\t: ' hover:bg-gray-100 dark:hover:bg-gray-850'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'about';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('About')}</div>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"flex-1 md:min-h-[28rem]\">\r\n\t\t\t\t{#if selectedTab === 'general'}\r\n\t\t\t\t\t<General\r\n\t\t\t\t\t\t{getModels}\r\n\t\t\t\t\t\t{saveSettings}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'interface'}\r\n\t\t\t\t\t<Interface\r\n\t\t\t\t\t\t{saveSettings}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'personalization'}\r\n\t\t\t\t\t<Personalization\r\n\t\t\t\t\t\t{saveSettings}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'audio'}\r\n\t\t\t\t\t<Audio\r\n\t\t\t\t\t\t{saveSettings}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'chats'}\r\n\t\t\t\t\t<Chats {saveSettings} />\r\n\t\t\t\t{:else if selectedTab === 'account'}\r\n\t\t\t\t\t<Account\r\n\t\t\t\t\t\tsaveHandler={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'about'}\r\n\t\t\t\t\t<About />\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n\r\n<style>\r\n\tinput::-webkit-outer-spin-button,\r\n\tinput::-webkit-inner-spin-button {\r\n\t\t/* display: none; <- Crashes Chrome on hover */\r\n\t\t-webkit-appearance: none;\r\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\r\n\t}\r\n\r\n\t.tabs::-webkit-scrollbar {\r\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\r\n\t}\r\n\r\n\t.tabs {\r\n\t\t-ms-overflow-style: none; /* IE and Edge */\r\n\t\tscrollbar-width: none; /* Firefox */\r\n\t}\r\n\r\n\tinput[type='number'] {\r\n\t\t-moz-appearance: textfield; /* Firefox */\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport fileSaver from 'file-saver';\r\n\tconst { saveAs } = fileSaver;\r\n\timport { toast } from 'svelte-sonner';\r\n\timport dayjs from 'dayjs';\r\n\timport { getContext, createEventDispatcher } from 'svelte';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport Modal from '$lib/components/common/Modal.svelte';\r\n\timport {\r\n\t\tarchiveChatById,\r\n\t\tdeleteChatById,\r\n\t\tgetAllArchivedChats,\r\n\t\tgetArchivedChatList\r\n\t} from '$lib/apis/chats';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n\r\n\tlet searchValue = '';\r\n\r\n\tlet chats = [];\r\n\r\n\tconst unarchiveChatHandler = async (chatId) => {\r\n\t\tconst res = await archiveChatById(localStorage.token, chatId).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t});\r\n\r\n\t\tchats = await getArchivedChatList(localStorage.token);\r\n\r\n\t\tdispatch('change');\r\n\t};\r\n\r\n\tconst deleteChatHandler = async (chatId) => {\r\n\t\tconst res = await deleteChatById(localStorage.token, chatId).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t});\r\n\r\n\t\tchats = await getArchivedChatList(localStorage.token);\r\n\t};\r\n\r\n\tconst exportChatsHandler = async () => {\r\n\t\tconst chats = await getAllArchivedChats(localStorage.token);\r\n\t\tlet blob = new Blob([JSON.stringify(chats)], {\r\n\t\t\ttype: 'application/json'\r\n\t\t});\r\n\t\tsaveAs(blob, `archived-chat-export-${Date.now()}.json`);\r\n\t};\r\n\r\n\t$: if (show) {\r\n\t\t(async () => {\r\n\t\t\tchats = await getArchivedChatList(localStorage.token);\r\n\t\t})();\r\n\t}\r\n</script>\r\n\r\n<Modal size=\"lg\" bind:show>\r\n\t<div>\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Archived Chats')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col w-full px-5 pb-4 dark:text-gray-200\">\r\n\t\t\t<div class=\" flex w-full mt-2 space-x-2\">\r\n\t\t\t\t<div class=\"flex flex-1\">\r\n\t\t\t\t\t<div class=\" self-center ml-1 mr-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\" w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent\"\r\n\t\t\t\t\t\tbind:value={searchValue}\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Search Chats')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<hr class=\" dark:border-gray-850 my-2\" />\r\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\r\n\t\t\t\t{#if chats.length > 0}\r\n\t\t\t\t\t<div class=\"w-full\">\r\n\t\t\t\t\t\t<div class=\"text-left text-sm w-full mb-3 max-h-[22rem] overflow-y-scroll\">\r\n\t\t\t\t\t\t\t<div class=\"relative overflow-x-auto\">\r\n\t\t\t\t\t\t\t\t<table class=\"w-full text-sm text-left text-gray-600 dark:text-gray-400 table-auto\">\r\n\t\t\t\t\t\t\t\t\t<thead\r\n\t\t\t\t\t\t\t\t\t\tclass=\"text-xs text-gray-700 uppercase bg-transparent dark:text-gray-200 border-b-2 dark:border-gray-800\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2\"> {$i18n.t('Name')} </th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2 hidden md:flex\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Created At')}\r\n\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2 text-right\" />\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t{#each chats.filter((c) => searchValue === '' || c.title\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(searchValue.toLowerCase())) as chat, idx}\r\n\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent {idx !== chats.length - 1 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'border-b'} dark:bg-gray-900 dark:border-gray-850 text-xs\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"px-3 py-1 w-2/3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"/c/{chat.id}\" target=\"_blank\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" underline line-clamp-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{chat.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td class=\" px-3 py-1 hidden md:flex h-[2.5rem]\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"my-auto\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{dayjs(chat.created_at * 1000).format($i18n.t('MMMM DD, YYYY HH:mm'))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"px-3 py-1 text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex justify-end w-full\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Unarchive Chat\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tunarchiveChatHandler(chat.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Delete Chat\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteChatHandler(chat.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex flex-wrap text-sm font-medium gap-1.5 mt-2 m-1\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\" px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\texportChatsHandler();\r\n\t\t\t\t\t\t\t\t}}>Export All Archived Chats</button\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{:else}\r\n\t\t\t\t\t<div class=\"text-left text-sm w-full mb-8\">\r\n\t\t\t\t\t\t{$i18n.t('You have no archived conversations.')}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n","<script lang=\"ts\">\r\n\texport let className = 'w-4 h-4';\r\n\texport let strokeWidth = '1.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tstroke-linecap=\"round\"\r\n\t\tstroke-linejoin=\"round\"\r\n\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\texport let className = 'w-4 h-4';\r\n\texport let strokeWidth = '1.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tstroke-linecap=\"round\"\r\n\t\tstroke-linejoin=\"round\"\r\n\t\td=\"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\texport let className = 'w-4 h-4';\r\n\texport let strokeWidth = '1.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tstroke-linecap=\"round\"\r\n\t\tstroke-linejoin=\"round\"\r\n\t\td=\"m3 3 1.664 1.664M21 21l-1.5-1.5m-5.485-1.242L12 17.25 4.5 21V8.742m.164-4.078a2.15 2.15 0 0 1 1.743-1.342 48.507 48.507 0 0 1 11.186 0c1.1.128 1.907 1.077 1.907 2.185V19.5M4.664 4.664 19.5 19.5\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\timport { DropdownMenu } from 'bits-ui';\r\n\timport { flyAndScale } from '$lib/utils/transitions';\r\n\timport { getContext, createEventDispatcher } from 'svelte';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\r\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\r\n\timport Pencil from '$lib/components/icons/Pencil.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport Tags from '$lib/components/chat/Tags.svelte';\r\n\timport Share from '$lib/components/icons/Share.svelte';\r\n\timport ArchiveBox from '$lib/components/icons/ArchiveBox.svelte';\r\n\timport DocumentDuplicate from '$lib/components/icons/DocumentDuplicate.svelte';\r\n\timport Bookmark from '$lib/components/icons/Bookmark.svelte';\r\n\timport BookmarkSlash from '$lib/components/icons/BookmarkSlash.svelte';\r\n\timport { addTagById, deleteTagById, getTagsById } from '$lib/apis/chats';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let shareHandler: Function;\r\n\texport let cloneChatHandler: Function;\r\n\texport let archiveChatHandler: Function;\r\n\texport let renameHandler: Function;\r\n\texport let deleteHandler: Function;\r\n\texport let onClose: Function;\r\n\r\n\texport let chatId = '';\r\n\r\n\tlet show = false;\r\n\tlet pinned = false;\r\n\r\n\tconst pinHandler = async () => {\r\n\t\tif (pinned) {\r\n\t\t\tawait deleteTagById(localStorage.token, chatId, 'pinned');\r\n\t\t} else {\r\n\t\t\tawait addTagById(localStorage.token, chatId, 'pinned');\r\n\t\t}\r\n\t\tdispatch('change');\r\n\t};\r\n\r\n\tconst checkPinned = async () => {\r\n\t\tpinned = (\r\n\t\t\tawait getTagsById(localStorage.token, chatId).catch(async (error) => {\r\n\t\t\t\treturn [];\r\n\t\t\t})\r\n\t\t).find((tag) => tag.name === 'pinned');\r\n\t};\r\n\r\n\t$: if (show) {\r\n\t\tcheckPinned();\r\n\t}\r\n</script>\r\n\r\n<Dropdown\r\n\tbind:show\r\n\ton:change={(e) => {\r\n\t\tif (e.detail === false) {\r\n\t\t\tonClose();\r\n\t\t}\r\n\t}}\r\n>\r\n\t<Tooltip content={$i18n.t('More')}>\r\n\t\t<slot />\r\n\t</Tooltip>\r\n\r\n\t<div slot=\"content\">\r\n\t\t<DropdownMenu.Content\r\n\t\t\tclass=\"w-full max-w-[180px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow\"\r\n\t\t\tsideOffset={-2}\r\n\t\t\tside=\"bottom\"\r\n\t\t\talign=\"start\"\r\n\t\t\ttransition={flyAndScale}\r\n\t\t>\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tpinHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{#if pinned}\r\n\t\t\t\t\t<BookmarkSlash strokeWidth=\"2\" />\r\n\t\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Unpin')}</div>\r\n\t\t\t\t{:else}\r\n\t\t\t\t\t<Bookmark strokeWidth=\"2\" />\r\n\t\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Pin')}</div>\r\n\t\t\t\t{/if}\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\trenameHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Pencil strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Rename')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tcloneChatHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<DocumentDuplicate strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Clone')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tarchiveChatHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<ArchiveBox strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Archive')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshareHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Share />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Share')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tdeleteHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<GarbageBin strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Delete')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<hr class=\"border-gray-100 dark:border-gray-800 mt-2.5 mb-1.5\" />\r\n\r\n\t\t\t<div class=\"flex p-1\">\r\n\t\t\t\t<Tags\r\n\t\t\t\t\t{chatId}\r\n\t\t\t\t\ton:close={() => {\r\n\t\t\t\t\t\tshow = false;\r\n\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</DropdownMenu.Content>\r\n\t</div>\r\n</Dropdown>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { goto, invalidate, invalidateAll } from '$app/navigation';\r\n\timport { onMount, getContext, createEventDispatcher, tick } from 'svelte';\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport {\r\n\t\tarchiveChatById,\r\n\t\tcloneChatById,\r\n\t\tdeleteChatById,\r\n\t\tgetChatList,\r\n\t\tgetChatListByTagName,\r\n\t\tupdateChatById\r\n\t} from '$lib/apis/chats';\r\n\timport { chatId, chats, mobile, pinnedChats, showSidebar, currentChatPage } from '$lib/stores';\r\n\r\n\timport ChatMenu from './ChatMenu.svelte';\r\n\timport ShareChatModal from '$lib/components/chat/ShareChatModal.svelte';\r\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport ArchiveBox from '$lib/components/icons/ArchiveBox.svelte';\r\n\r\n\texport let chat;\r\n\texport let selected = false;\r\n\texport let shiftKey = false;\r\n\r\n\tlet mouseOver = false;\r\n\r\n\tlet showShareChatModal = false;\r\n\tlet confirmEdit = false;\r\n\r\n\tlet chatTitle = chat.title;\r\n\r\n\tconst editChatTitle = async (id, _title) => {\r\n\t\tif (_title === '') {\r\n\t\t\ttoast.error($i18n.t('Title cannot be an empty string.'));\r\n\t\t} else {\r\n\t\t\tawait updateChatById(localStorage.token, id, {\r\n\t\t\t\ttitle: _title\r\n\t\t\t});\r\n\r\n\t\t\tcurrentChatPage.set(1);\r\n\t\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\r\n\t\t\tawait pinnedChats.set(await getChatListByTagName(localStorage.token, 'pinned'));\r\n\t\t}\r\n\t};\r\n\r\n\tconst cloneChatHandler = async (id) => {\r\n\t\tconst res = await cloneChatById(localStorage.token, id).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\tgoto(`/c/${res.id}`);\r\n\r\n\t\t\tcurrentChatPage.set(1);\r\n\t\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\r\n\t\t\tawait pinnedChats.set(await getChatListByTagName(localStorage.token, 'pinned'));\r\n\t\t}\r\n\t};\r\n\r\n\tconst archiveChatHandler = async (id) => {\r\n\t\tawait archiveChatById(localStorage.token, id);\r\n\r\n\t\tcurrentChatPage.set(1);\r\n\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\r\n\t\tawait pinnedChats.set(await getChatListByTagName(localStorage.token, 'pinned'));\r\n\t};\r\n\r\n\tconst focusEdit = async (node: HTMLInputElement) => {\r\n\t\tnode.focus();\r\n\t};\r\n</script>\r\n\r\n<ShareChatModal bind:show={showShareChatModal} chatId={chat.id} />\r\n\r\n<div class=\" w-full pr-2 relative group\">\r\n\t{#if confirmEdit}\r\n\t\t<div\r\n\t\t\tclass=\" w-full flex justify-between rounded-xl px-3 py-2 {chat.id === $chatId || confirmEdit\r\n\t\t\t\t? 'bg-gray-200 dark:bg-gray-900'\r\n\t\t\t\t: selected\r\n\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-950'\r\n\t\t\t\t\t: 'group-hover:bg-gray-100 dark:group-hover:bg-gray-950'}  whitespace-nowrap text-ellipsis\"\r\n\t\t>\r\n\t\t\t<input\r\n\t\t\t\tuse:focusEdit\r\n\t\t\t\tbind:value={chatTitle}\r\n\t\t\t\tclass=\" bg-transparent w-full outline-none mr-10\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t{:else}\r\n\t\t<a\r\n\t\t\tclass=\" w-full flex justify-between rounded-xl px-3 py-2 {chat.id === $chatId || confirmEdit\r\n\t\t\t\t? 'bg-gray-200 dark:bg-gray-900'\r\n\t\t\t\t: selected\r\n\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-950'\r\n\t\t\t\t\t: ' group-hover:bg-gray-100 dark:group-hover:bg-gray-950'}  whitespace-nowrap text-ellipsis\"\r\n\t\t\thref=\"/c/{chat.id}\"\r\n\t\t\ton:click={() => {\r\n\t\t\t\tdispatch('select');\r\n\r\n\t\t\t\tif ($mobile) {\r\n\t\t\t\t\tshowSidebar.set(false);\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\ton:dblclick={() => {\r\n\t\t\t\tchatTitle = chat.title;\r\n\t\t\t\tconfirmEdit = true;\r\n\t\t\t}}\r\n\t\t\ton:mouseenter={(e) => {\r\n\t\t\t\tmouseOver = true;\r\n\t\t\t}}\r\n\t\t\ton:mouseleave={(e) => {\r\n\t\t\t\tmouseOver = false;\r\n\t\t\t}}\r\n\t\t\ton:focus={(e) => {}}\r\n\t\t\tdraggable=\"false\"\r\n\t\t>\r\n\t\t\t<div class=\" flex self-center flex-1 w-full\">\r\n\t\t\t\t<div class=\" text-left self-center overflow-hidden w-full h-[20px]\">\r\n\t\t\t\t\t{chat.title}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a>\r\n\t{/if}\r\n\r\n\t<!-- svelte-ignore a11y-no-static-element-interactions -->\r\n\t<div\r\n\t\tclass=\"\r\n        {chat.id === $chatId || confirmEdit\r\n\t\t\t? 'from-gray-200 dark:from-gray-900'\r\n\t\t\t: selected\r\n\t\t\t\t? 'from-gray-100 dark:from-gray-950'\r\n\t\t\t\t: 'invisible group-hover:visible from-gray-100 dark:from-gray-950'}\r\n            absolute right-[10px] top-[6px] py-1 pr-2 pl-5 bg-gradient-to-l from-80%\r\n\r\n              to-transparent\"\r\n\t\ton:mouseenter={(e) => {\r\n\t\t\tmouseOver = true;\r\n\t\t}}\r\n\t\ton:mouseleave={(e) => {\r\n\t\t\tmouseOver = false;\r\n\t\t}}\r\n\t>\r\n\t\t{#if confirmEdit}\r\n\t\t\t<div class=\"flex self-center space-x-1.5 z-10\">\r\n\t\t\t\t<Tooltip content={$i18n.t('Confirm')}>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\teditChatTitle(chat.id, chatTitle);\r\n\t\t\t\t\t\t\tconfirmEdit = false;\r\n\t\t\t\t\t\t\tchatTitle = '';\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t<Tooltip content={$i18n.t('Cancel')}>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tconfirmEdit = false;\r\n\t\t\t\t\t\t\tchatTitle = '';\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</div>\r\n\t\t{:else if shiftKey && mouseOver}\r\n\t\t\t<div class=\" flex items-center self-center space-x-1.5\">\r\n\t\t\t\t<Tooltip content={$i18n.t('Archive')} className=\"flex items-center\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tarchiveChatHandler(chat.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ArchiveBox className=\"size-4  translate-y-[0.5px]\" strokeWidth=\"2\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t<Tooltip content={$i18n.t('Delete')}>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tdispatch('delete', 'shift');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<GarbageBin strokeWidth=\"2\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</div>\r\n\t\t{:else}\r\n\t\t\t<div class=\"flex self-center space-x-1 z-10\">\r\n\t\t\t\t<ChatMenu\r\n\t\t\t\t\tchatId={chat.id}\r\n\t\t\t\t\tcloneChatHandler={() => {\r\n\t\t\t\t\t\tcloneChatHandler(chat.id);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tshareHandler={() => {\r\n\t\t\t\t\t\tshowShareChatModal = true;\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tarchiveChatHandler={() => {\r\n\t\t\t\t\t\tarchiveChatHandler(chat.id);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trenameHandler={() => {\r\n\t\t\t\t\t\tchatTitle = chat.title;\r\n\r\n\t\t\t\t\t\tconfirmEdit = true;\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdeleteHandler={() => {\r\n\t\t\t\t\t\tdispatch('delete');\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClose={() => {\r\n\t\t\t\t\t\tdispatch('unselect');\r\n\t\t\t\t\t}}\r\n\t\t\t\t\ton:change={async () => {\r\n\t\t\t\t\t\tawait pinnedChats.set(await getChatListByTagName(localStorage.token, 'pinned'));\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\taria-label=\"Chat Menu\"\r\n\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tdispatch('select');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M2 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM6.5 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12.5 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</ChatMenu>\r\n\r\n\t\t\t\t{#if chat.id === $chatId}\r\n\t\t\t\t\t<!-- Shortcut support using \"delete-chat-button\" id -->\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tid=\"delete-chat-button\"\r\n\t\t\t\t\t\tclass=\"hidden\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tdispatch('delete');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M2 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM6.5 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12.5 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { createEventDispatcher, onMount } from 'svelte';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tlet loaderElement: HTMLElement;\r\n\r\n\tonMount(() => {\r\n\t\tconst observer = new IntersectionObserver(\r\n\t\t\t(entries, observer) => {\r\n\t\t\t\tentries.forEach((entry) => {\r\n\t\t\t\t\tif (entry.isIntersecting) {\r\n\t\t\t\t\t\tdispatch('visible');\r\n\t\t\t\t\t\t// observer.unobserve(loaderElement); // Stop observing until content is loaded\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\troot: null, // viewport\r\n\t\t\t\trootMargin: '0px',\r\n\t\t\t\tthreshold: 0.1 // When 10% of the loader is visible\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tobserver.observe(loaderElement);\r\n\t});\r\n</script>\r\n\r\n<div bind:this={loaderElement}>\r\n\t<slot />\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { goto } from '$app/navigation';\r\n\timport {\r\n\t\tuser,\r\n\t\tchats,\r\n\t\tsettings,\r\n\t\tshowSettings,\r\n\t\tchatId,\r\n\t\ttags,\r\n\t\tshowSidebar,\r\n\t\tmobile,\r\n\t\tshowArchivedChats,\r\n\t\tpinnedChats,\r\n\t\tscrollPaginationEnabled,\r\n\t\tcurrentChatPage,\r\n\t\ttemporaryChatEnabled\r\n\t} from '$lib/stores';\r\n\timport { onMount, getContext, tick } from 'svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\timport { updateUserSettings } from '$lib/apis/users';\r\n\timport {\r\n\t\tdeleteChatById,\r\n\t\tgetChatList,\r\n\t\tgetChatById,\r\n\t\tgetChatListByTagName,\r\n\t\tupdateChatById,\r\n\t\tgetAllChatTags,\r\n\t\tarchiveChatById,\r\n\t\tcloneChatById\r\n\t} from '$lib/apis/chats';\r\n\timport { WEBUI_BASE_URL } from '$lib/constants';\r\n\r\n\timport ArchivedChatsModal from './Sidebar/ArchivedChatsModal.svelte';\r\n\timport UserMenu from './Sidebar/UserMenu.svelte';\r\n\timport ChatItem from './Sidebar/ChatItem.svelte';\r\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\r\n\timport Spinner from '../common/Spinner.svelte';\r\n\timport Loader from '../common/Loader.svelte';\r\n\r\n\tconst BREAKPOINT = 768;\r\n\r\n\tlet navElement;\r\n\tlet search = '';\r\n\r\n\tlet shiftKey = false;\r\n\r\n\tlet selectedChatId = null;\r\n\tlet deleteChat = null;\r\n\r\n\tlet showDeleteConfirm = false;\r\n\tlet showDropdown = false;\r\n\r\n\tlet filteredChatList = [];\r\n\r\n\t// Pagination variables\r\n\tlet chatListLoading = false;\r\n\tlet allChatsLoaded = false;\r\n\r\n\t$: filteredChatList = $chats.filter((chat) => {\r\n\t\tif (search === '') {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tlet title = chat.title.toLowerCase();\r\n\t\t\tconst query = search.toLowerCase();\r\n\r\n\t\t\tlet contentMatches = false;\r\n\t\t\t// Access the messages within chat.chat.messages\r\n\t\t\tif (chat.chat && chat.chat.messages && Array.isArray(chat.chat.messages)) {\r\n\t\t\t\tcontentMatches = chat.chat.messages.some((message) => {\r\n\t\t\t\t\t// Check if message.content exists and includes the search query\r\n\t\t\t\t\treturn message.content && message.content.toLowerCase().includes(query);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn title.includes(query) || contentMatches;\r\n\t\t}\r\n\t});\r\n\r\n\tconst enablePagination = async () => {\r\n\t\t// Reset pagination variables\r\n\t\tcurrentChatPage.set(1);\r\n\t\tallChatsLoaded = false;\r\n\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\r\n\r\n\t\t// Enable pagination\r\n\t\tscrollPaginationEnabled.set(true);\r\n\t};\r\n\r\n\tconst loadMoreChats = async () => {\r\n\t\tchatListLoading = true;\r\n\r\n\t\tcurrentChatPage.set($currentChatPage + 1);\r\n\t\tconst newChatList = await getChatList(localStorage.token, $currentChatPage);\r\n\r\n\t\t// once the bottom of the list has been reached (no results) there is no need to continue querying\r\n\t\tallChatsLoaded = newChatList.length === 0;\r\n\t\tawait chats.set([...$chats, ...newChatList]);\r\n\r\n\t\tchatListLoading = false;\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tmobile.subscribe((e) => {\r\n\t\t\tif ($showSidebar && e) {\r\n\t\t\t\tshowSidebar.set(false);\r\n\t\t\t}\r\n\r\n\t\t\tif (!$showSidebar && !e) {\r\n\t\t\t\tshowSidebar.set(true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tshowSidebar.set(window.innerWidth > BREAKPOINT);\r\n\t\tawait pinnedChats.set(await getChatListByTagName(localStorage.token, 'pinned'));\r\n\t\tawait enablePagination();\r\n\r\n\t\tlet touchstart;\r\n\t\tlet touchend;\r\n\r\n\t\tfunction checkDirection() {\r\n\t\t\tconst screenWidth = window.innerWidth;\r\n\t\t\tconst swipeDistance = Math.abs(touchend.screenX - touchstart.screenX);\r\n\t\t\tif (touchstart.clientX < 40 && swipeDistance >= screenWidth / 8) {\r\n\t\t\t\tif (touchend.screenX < touchstart.screenX) {\r\n\t\t\t\t\tshowSidebar.set(false);\r\n\t\t\t\t}\r\n\t\t\t\tif (touchend.screenX > touchstart.screenX) {\r\n\t\t\t\t\tshowSidebar.set(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst onTouchStart = (e) => {\r\n\t\t\ttouchstart = e.changedTouches[0];\r\n\t\t\tconsole.log(touchstart.clientX);\r\n\t\t};\r\n\r\n\t\tconst onTouchEnd = (e) => {\r\n\t\t\ttouchend = e.changedTouches[0];\r\n\t\t\tcheckDirection();\r\n\t\t};\r\n\r\n\t\tconst onKeyDown = (e) => {\r\n\t\t\tif (e.key === 'Shift') {\r\n\t\t\t\tshiftKey = true;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst onKeyUp = (e) => {\r\n\t\t\tif (e.key === 'Shift') {\r\n\t\t\t\tshiftKey = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst onFocus = () => {};\r\n\r\n\t\tconst onBlur = () => {\r\n\t\t\tshiftKey = false;\r\n\t\t\tselectedChatId = null;\r\n\t\t};\r\n\r\n\t\twindow.addEventListener('keydown', onKeyDown);\r\n\t\twindow.addEventListener('keyup', onKeyUp);\r\n\r\n\t\twindow.addEventListener('touchstart', onTouchStart);\r\n\t\twindow.addEventListener('touchend', onTouchEnd);\r\n\r\n\t\twindow.addEventListener('focus', onFocus);\r\n\t\twindow.addEventListener('blur', onBlur);\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('keydown', onKeyDown);\r\n\t\t\twindow.removeEventListener('keyup', onKeyUp);\r\n\r\n\t\t\twindow.removeEventListener('touchstart', onTouchStart);\r\n\t\t\twindow.removeEventListener('touchend', onTouchEnd);\r\n\r\n\t\t\twindow.removeEventListener('focus', onFocus);\r\n\t\t\twindow.removeEventListener('blur', onBlur);\r\n\t\t};\r\n\t});\r\n\r\n\t// Helper function to fetch and add chat content to each chat\r\n\tconst enrichChatsWithContent = async (chatList) => {\r\n\t\tconst enrichedChats = await Promise.all(\r\n\t\t\tchatList.map(async (chat) => {\r\n\t\t\t\tconst chatDetails = await getChatById(localStorage.token, chat.id).catch((error) => null); // Handle error or non-existent chat gracefully\r\n\t\t\t\tif (chatDetails) {\r\n\t\t\t\t\tchat.chat = chatDetails.chat; // Assuming chatDetails.chat contains the chat content\r\n\t\t\t\t}\r\n\t\t\t\treturn chat;\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\tawait chats.set(enrichedChats);\r\n\t};\r\n\r\n\tconst saveSettings = async (updated) => {\r\n\t\tawait settings.set({ ...$settings, ...updated });\r\n\t\tawait updateUserSettings(localStorage.token, { ui: $settings });\r\n\t\tlocation.href = '/';\r\n\t};\r\n\r\n\tconst deleteChatHandler = async (id) => {\r\n\t\tconst res = await deleteChatById(localStorage.token, id).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\tif ($chatId === id) {\r\n\t\t\t\tawait chatId.set('');\r\n\t\t\t\tawait tick();\r\n\t\t\t\tgoto('/');\r\n\t\t\t}\r\n\r\n\t\t\tallChatsLoaded = false;\r\n\t\t\tcurrentChatPage.set(1);\r\n\t\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\r\n\r\n\t\t\tawait pinnedChats.set(await getChatListByTagName(localStorage.token, 'pinned'));\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<ArchivedChatsModal\r\n\tbind:show={$showArchivedChats}\r\n\ton:change={async () => {\r\n\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t}}\r\n/>\r\n\r\n<DeleteConfirmDialog\r\n\tbind:show={showDeleteConfirm}\r\n\ttitle={$i18n.t('Delete chat?')}\r\n\ton:confirm={() => {\r\n\t\tdeleteChatHandler(deleteChat.id);\r\n\t}}\r\n>\r\n\t<div class=\" text-sm text-gray-500\">\r\n\t\t{$i18n.t('This will delete')} <span class=\"  font-semibold\">{deleteChat.title}</span>.\r\n\t</div>\r\n</DeleteConfirmDialog>\r\n\r\n<!-- svelte-ignore a11y-no-static-element-interactions -->\r\n\r\n{#if $showSidebar}\r\n\t<div\r\n\t\tclass=\" fixed md:hidden z-40 top-0 right-0 left-0 bottom-0 bg-black/60 w-full min-h-screen h-screen flex justify-center overflow-hidden overscroll-contain\"\r\n\t\ton:mousedown={() => {\r\n\t\t\tshowSidebar.set(!$showSidebar);\r\n\t\t}}\r\n\t/>\r\n{/if}\r\n\r\n<div\r\n\tbind:this={navElement}\r\n\tid=\"sidebar\"\r\n\tclass=\"h-screen max-h-[100dvh] min-h-screen select-none {$showSidebar\r\n\t\t? 'md:relative w-[260px]'\r\n\t\t: '-translate-x-[260px] w-[0px]'} bg-gray-50 text-gray-900 dark:bg-gray-950 dark:text-gray-200 text-sm transition fixed z-50 top-0 left-0\r\n        \"\r\n\tdata-state={$showSidebar}\r\n>\r\n\t<div\r\n\t\tclass=\"py-2.5 my-auto flex flex-col justify-between h-screen max-h-[100dvh] w-[260px] z-50 {$showSidebar\r\n\t\t\t? ''\r\n\t\t\t: 'invisible'}\"\r\n\t>\r\n\t\t<div class=\"px-2.5 flex justify-between space-x-1 text-gray-600 dark:text-gray-400\">\r\n\t\t\t<a\r\n\t\t\t\tid=\"sidebar-new-chat-button\"\r\n\t\t\t\tclass=\"flex flex-1 justify-between rounded-xl px-2 h-full hover:bg-gray-100 dark:hover:bg-gray-900 transition\"\r\n\t\t\t\thref=\"/\"\r\n\t\t\t\tdraggable=\"false\"\r\n\t\t\t\ton:click={async () => {\r\n\t\t\t\t\tselectedChatId = null;\r\n\t\t\t\t\tawait goto('/');\r\n\t\t\t\t\tconst newChatButton = document.getElementById('new-chat-button');\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnewChatButton?.click();\r\n\t\t\t\t\t\tif ($mobile) {\r\n\t\t\t\t\t\t\tshowSidebar.set(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\"self-center mx-1.5\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tcrossorigin=\"anonymous\"\r\n\t\t\t\t\t\tsrc=\"{WEBUI_BASE_URL}/static/favicon.png\"\r\n\t\t\t\t\t\tclass=\" size-6 -translate-x-1.5 rounded-full\"\r\n\t\t\t\t\t\talt=\"logo\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\" self-center font-medium text-sm text-gray-850 dark:text-white font-primary\">\r\n\t\t\t\t\t{$i18n.t('New Chat')}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"self-center ml-auto\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"size-5\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\td=\"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\td=\"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\r\n\t\t\t<button\r\n\t\t\t\tclass=\" cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-900 transition\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshowSidebar.set(!$showSidebar);\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" m-auto self-center\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"size-5\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\td=\"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t{#if $user?.role === 'admin'}\r\n\t\t\t<div class=\"px-2.5 flex justify-center text-gray-800 dark:text-gray-200\">\r\n\t\t\t\t<a\r\n\t\t\t\t\tclass=\"flex-grow flex space-x-3 rounded-xl px-2.5 py-2 hover:bg-gray-100 dark:hover:bg-gray-900 transition\"\r\n\t\t\t\t\thref=\"/workspace\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedChatId = null;\r\n\t\t\t\t\t\tchatId.set('');\r\n\r\n\t\t\t\t\t\tif ($mobile) {\r\n\t\t\t\t\t\t\tshowSidebar.set(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdraggable=\"false\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"self-center\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"size-[1.1rem]\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\td=\"M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 0 0 2.25-2.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v2.25A2.25 2.25 0 0 0 6 10.5Zm0 9.75h2.25A2.25 2.25 0 0 0 10.5 18v-2.25a2.25 2.25 0 0 0-2.25-2.25H6a2.25 2.25 0 0 0-2.25 2.25V18A2.25 2.25 0 0 0 6 20.25Zm9.75-9.75H18a2.25 2.25 0 0 0 2.25-2.25V6A2.25 2.25 0 0 0 18 3.75h-2.25A2.25 2.25 0 0 0 13.5 6v2.25a2.25 2.25 0 0 0 2.25 2.25Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex self-center\">\r\n\t\t\t\t\t\t<div class=\" self-center font-medium text-sm font-primary\">{$i18n.t('Workspace')}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\r\n\t\t<div class=\"relative flex flex-col flex-1 overflow-y-auto\">\r\n\t\t\t{#if $temporaryChatEnabled}\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"absolute z-40 w-full h-full bg-gray-50/90 dark:bg-black/90 flex justify-center\"\r\n\t\t\t\t></div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div class=\"px-2 mt-0.5 mb-2 flex justify-center space-x-2\">\r\n\t\t\t\t<div class=\"flex w-full rounded-xl\" id=\"chat-search\">\r\n\t\t\t\t\t<div class=\"self-center pl-3 py-2 rounded-l-xl bg-transparent\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"w-full rounded-r-xl py-1.5 pl-2.5 pr-4 text-sm bg-transparent dark:text-gray-300 outline-none\"\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Search')}\r\n\t\t\t\t\t\tbind:value={search}\r\n\t\t\t\t\t\ton:focus={async () => {\r\n\t\t\t\t\t\t\t// TODO: migrate backend for more scalable search mechanism\r\n\t\t\t\t\t\t\tscrollPaginationEnabled.set(false);\r\n\t\t\t\t\t\t\tawait chats.set(await getChatList(localStorage.token)); // when searching, load all chats\r\n\t\t\t\t\t\t\tenrichChatsWithContent($chats);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{#if $tags.filter((t) => t.name !== 'pinned').length > 0}\r\n\t\t\t\t<div class=\"px-2.5 mb-2 flex gap-1 flex-wrap\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"px-2.5 text-xs font-medium bg-gray-50 dark:bg-gray-900 dark:hover:bg-gray-800 transition rounded-full\"\r\n\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\tawait enablePagination();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{$i18n.t('all')}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{#each $tags.filter((t) => t.name !== 'pinned') as tag}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"px-2.5 text-xs font-medium bg-gray-50 dark:bg-gray-900 dark:hover:bg-gray-800 transition rounded-full\"\r\n\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\tscrollPaginationEnabled.set(false);\r\n\t\t\t\t\t\t\t\tlet chatIds = await getChatListByTagName(localStorage.token, tag.name);\r\n\t\t\t\t\t\t\t\tif (chatIds.length === 0) {\r\n\t\t\t\t\t\t\t\t\tawait tags.set(await getAllChatTags(localStorage.token));\r\n\r\n\t\t\t\t\t\t\t\t\t// if the tag we deleted is no longer a valid tag, return to main chat list view\r\n\t\t\t\t\t\t\t\t\tawait enablePagination();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tawait chats.set(chatIds);\r\n\r\n\t\t\t\t\t\t\t\tchatListLoading = false;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{tag.name}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t{#if $pinnedChats.length > 0}\r\n\t\t\t\t<div class=\"pl-2 py-2 flex flex-col space-y-1\">\r\n\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t<div class=\"w-full pl-2.5 text-xs text-gray-500 dark:text-gray-500 font-medium pb-1.5\">\r\n\t\t\t\t\t\t\t{$i18n.t('Pinned')}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{#each $pinnedChats as chat, idx}\r\n\t\t\t\t\t\t\t<ChatItem\r\n\t\t\t\t\t\t\t\t{chat}\r\n\t\t\t\t\t\t\t\t{shiftKey}\r\n\t\t\t\t\t\t\t\tselected={selectedChatId === chat.id}\r\n\t\t\t\t\t\t\t\ton:select={() => {\r\n\t\t\t\t\t\t\t\t\tselectedChatId = chat.id;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ton:unselect={() => {\r\n\t\t\t\t\t\t\t\t\tselectedChatId = null;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ton:delete={(e) => {\r\n\t\t\t\t\t\t\t\t\tif ((e?.detail ?? '') === 'shift') {\r\n\t\t\t\t\t\t\t\t\t\tdeleteChatHandler(chat.id);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tdeleteChat = chat;\r\n\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div class=\"pl-2 my-2 flex-1 flex flex-col space-y-1 overflow-y-auto scrollbar-hidden\">\r\n\t\t\t\t{#each filteredChatList as chat, idx}\r\n\t\t\t\t\t{#if idx === 0 || (idx > 0 && chat.time_range !== filteredChatList[idx - 1].time_range)}\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"w-full pl-2.5 text-xs text-gray-500 dark:text-gray-500 font-medium {idx === 0\r\n\t\t\t\t\t\t\t\t? ''\r\n\t\t\t\t\t\t\t\t: 'pt-5'} pb-0.5\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{$i18n.t(chat.time_range)}\r\n\t\t\t\t\t\t\t<!-- localisation keys for time_range to be recognized from the i18next parser (so they don't get automatically removed):\r\n\t\t\t\t\t\t\t{$i18n.t('Today')}\r\n\t\t\t\t\t\t\t{$i18n.t('Yesterday')}\r\n\t\t\t\t\t\t\t{$i18n.t('Previous 7 days')}\r\n\t\t\t\t\t\t\t{$i18n.t('Previous 30 days')}\r\n\t\t\t\t\t\t\t{$i18n.t('January')}\r\n\t\t\t\t\t\t\t{$i18n.t('February')}\r\n\t\t\t\t\t\t\t{$i18n.t('March')}\r\n\t\t\t\t\t\t\t{$i18n.t('April')}\r\n\t\t\t\t\t\t\t{$i18n.t('May')}\r\n\t\t\t\t\t\t\t{$i18n.t('June')}\r\n\t\t\t\t\t\t\t{$i18n.t('July')}\r\n\t\t\t\t\t\t\t{$i18n.t('August')}\r\n\t\t\t\t\t\t\t{$i18n.t('September')}\r\n\t\t\t\t\t\t\t{$i18n.t('October')}\r\n\t\t\t\t\t\t\t{$i18n.t('November')}\r\n\t\t\t\t\t\t\t{$i18n.t('December')}\r\n\t\t\t\t\t\t\t-->\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/if}\r\n\r\n\t\t\t\t\t<ChatItem\r\n\t\t\t\t\t\t{chat}\r\n\t\t\t\t\t\t{shiftKey}\r\n\t\t\t\t\t\tselected={selectedChatId === chat.id}\r\n\t\t\t\t\t\ton:select={() => {\r\n\t\t\t\t\t\t\tselectedChatId = chat.id;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ton:unselect={() => {\r\n\t\t\t\t\t\t\tselectedChatId = null;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ton:delete={(e) => {\r\n\t\t\t\t\t\t\tif ((e?.detail ?? '') === 'shift') {\r\n\t\t\t\t\t\t\t\tdeleteChatHandler(chat.id);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdeleteChat = chat;\r\n\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{/each}\r\n\r\n\t\t\t\t{#if $scrollPaginationEnabled && !allChatsLoaded}\r\n\t\t\t\t\t<Loader\r\n\t\t\t\t\t\ton:visible={(e) => {\r\n\t\t\t\t\t\t\tif (!chatListLoading) {\r\n\t\t\t\t\t\t\t\tloadMoreChats();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\"w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2\">\r\n\t\t\t\t\t\t\t<Spinner className=\" size-4\" />\r\n\t\t\t\t\t\t\t<div class=\" \">Loading...</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Loader>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"px-2.5\">\r\n\t\t\t<!-- <hr class=\" border-gray-900 mb-1 w-full\" /> -->\r\n\r\n\t\t\t<div class=\"flex flex-col font-primary\">\r\n\t\t\t\t{#if $user !== undefined}\r\n\t\t\t\t\t<UserMenu\r\n\t\t\t\t\t\trole={$user.role}\r\n\t\t\t\t\t\ton:show={(e) => {\r\n\t\t\t\t\t\t\tif (e.detail === 'archived-chat') {\r\n\t\t\t\t\t\t\t\tshowArchivedChats.set(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" flex rounded-xl py-3 px-3.5 w-full hover:bg-gray-100 dark:hover:bg-gray-900 transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tshowDropdown = !showDropdown;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={$user.profile_image_url}\r\n\t\t\t\t\t\t\t\t\tclass=\" max-w-[30px] object-cover rounded-full\"\r\n\t\t\t\t\t\t\t\t\talt=\"User profile\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\" self-center font-medium\">{$user.name}</div>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</UserMenu>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<style>\r\n\t.scrollbar-hidden:active::-webkit-scrollbar-thumb,\r\n\t.scrollbar-hidden:focus::-webkit-scrollbar-thumb,\r\n\t.scrollbar-hidden:hover::-webkit-scrollbar-thumb {\r\n\t\tvisibility: visible;\r\n\t}\r\n\t.scrollbar-hidden::-webkit-scrollbar-thumb {\r\n\t\tvisibility: hidden;\r\n\t}\r\n</style>\r\n","<script>\r\n  import { onMount } from \"svelte\"\r\n\r\n  export let size = 10\r\n  export let x = [-0.5, 0.5]\r\n  export let y = [0.25, 1]\r\n  export let duration = 2000\r\n  export let infinite = false\r\n  export let delay = [0, 50]\r\n  export let colorRange = [0, 360]\r\n  export let colorArray = []\r\n  export let amount = 50\r\n  export let iterationCount = 1\r\n  export let fallDistance = \"100px\"\r\n  export let rounded = false\r\n  export let cone = false\r\n  export let noGravity = false\r\n  export let xSpread = 0.15\r\n  export let destroyOnComplete = true\r\n\r\n  let complete = false\r\n\r\n  onMount(() => {\r\n    if (!destroyOnComplete || infinite || iterationCount == \"infinite\") return\r\n\r\n    setTimeout(() => complete = true, (duration + delay[1]) * iterationCount)\r\n  })\r\n\r\n  function randomBetween(min, max) {\r\n    return Math.random() * (max - min) + min\r\n  }\r\n\r\n  function getColor() {\r\n    if (colorArray.length) return colorArray[Math.round(Math.random() * (colorArray.length - 1))]\r\n    else return `hsl(${Math.round(randomBetween(colorRange[0], colorRange[1]))}, 75%, 50%)`\r\n  }\r\n</script>\r\n\r\n{#if !complete}\r\n  <div class=\"confetti-holder\" class:rounded class:cone class:no-gravity={noGravity}>\r\n    {#each { length: amount } as _}\r\n      <div\r\n        class=\"confetti\"\r\n        style=\"\r\n        --fall-distance: {fallDistance};\r\n        --size: {size}px;\r\n        --color: {getColor()};\r\n        --skew: {randomBetween(-45, 45)}deg,{randomBetween(-45, 45)}deg;\r\n        --rotation-xyz: {randomBetween(-10, 10)}, {randomBetween(-10, 10)}, {randomBetween(-10, 10)};\r\n        --rotation-deg: {randomBetween(0, 360)}deg;\r\n        --translate-y-multiplier: {randomBetween(y[0], y[1])};\r\n        --translate-x-multiplier: {randomBetween(x[0], x[1])};\r\n        --scale: {0.1 * randomBetween(2, 10)};\r\n        --transition-duration: {infinite ? `calc(${duration}ms * var(--scale))` : `${duration}ms`};\r\n        --transition-delay: {randomBetween(delay[0], delay[1])}ms;\r\n        --transition-iteration-count: {infinite ? 'infinite' : iterationCount};\r\n        --x-spread: {(1 - xSpread)}\" />\r\n    {/each}\r\n  </div>\r\n{/if}\r\n\r\n<style>\r\n  .confetti-holder {\r\n    position: relative;\r\n  }\r\n\r\n  @keyframes rotate {\r\n    0% {\r\n      transform: skew(var(--skew)) rotate3d(var(--full-rotation));\r\n    }\r\n\r\n    100% {\r\n      transform: skew(var(--skew)) rotate3d(var(--rotation-xyz), calc(var(--rotation-deg) + 360deg));\r\n    }\r\n  }\r\n\r\n  @keyframes translate {\r\n    0% {\r\n      opacity: 1;\r\n    }\r\n\r\n    8% {\r\n      transform: translateY(calc(var(--translate-y) * 0.95)) translateX(calc(var(--translate-x) * (var(--x-spread) * 0.9)));\r\n      opacity: 1;\r\n    }\r\n\r\n    12% {\r\n      transform: translateY(var(--translate-y)) translateX(calc(var(--translate-x) * (var(--x-spread) * 0.95)));\r\n      opacity: 1;\r\n    }\r\n\r\n    16% {\r\n      transform: translateY(var(--translate-y)) translateX(calc(var(--translate-x) * var(--x-spread)));\r\n      opacity: 1;\r\n    }\r\n\r\n    100% {\r\n      transform: translateY(calc(var(--translate-y) + var(--fall-distance))) translateX(var(--translate-x));\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  @keyframes no-gravity-translate {\r\n    0% {\r\n      opacity: 1;\r\n    }\r\n\r\n    100% {\r\n      transform: translateY(var(--translate-y)) translateX(var(--translate-x));\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  .confetti {\r\n    --translate-y: calc(-200px * var(--translate-y-multiplier));\r\n    --translate-x: calc(200px * var(--translate-x-multiplier));\r\n    position: absolute;\r\n    height: calc(var(--size) * var(--scale));\r\n    width: calc(var(--size) * var(--scale));\r\n    animation: translate var(--transition-duration) var(--transition-delay) var(--transition-iteration-count) linear;\r\n    opacity: 0;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .confetti::before {\r\n    --full-rotation: var(--rotation-xyz), var(--rotation-deg);\r\n    content: '';\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: var(--color);\r\n    background-size: contain;\r\n    transform: skew(var(--skew)) rotate3d(var(--full-rotation));\r\n    animation: rotate var(--transition-duration) var(--transition-delay) var(--transition-iteration-count) linear;\r\n  }\r\n\r\n  .rounded .confetti::before {\r\n    border-radius: 50%;\r\n  }\r\n\r\n  .cone .confetti {\r\n    --translate-x: calc(200px * var(--translate-y-multiplier) * var(--translate-x-multiplier));\r\n  }\r\n\r\n  .no-gravity .confetti {\r\n    animation-name: no-gravity-translate;\r\n    animation-timing-function: ease-out;\r\n  }\r\n\r\n  @media (prefers-reduced-motion) {\r\n    .confetti,\r\n    .confetti::before {\r\n      animation: none;\r\n    }\r\n  }\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { onMount, getContext } from 'svelte';\r\n\timport { Confetti } from 'svelte-confetti';\r\n\r\n\timport { WEBUI_NAME, config } from '$lib/stores';\r\n\r\n\timport { WEBUI_VERSION } from '$lib/constants';\r\n\timport { getChangelog } from '$lib/apis';\r\n\r\n\timport Modal from './common/Modal.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n\r\n\tlet changelog = null;\r\n\r\n\tonMount(async () => {\r\n\t\tconst res = await getChangelog();\r\n\t\tchangelog = res;\r\n\t});\r\n</script>\r\n\r\n<Modal bind:show>\r\n\t<div class=\"px-5 pt-4 dark:text-gray-300 text-gray-700\">\r\n\t\t<div class=\"flex justify-between items-start\">\r\n\t\t\t<div class=\"text-xl font-semibold\">\r\n\t\t\t\t{$i18n.t('What‚Äôs New in')}\r\n\t\t\t\t{$WEBUI_NAME}\r\n\t\t\t\t<Confetti x={[-1, -0.25]} y={[0, 0.5]} />\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tlocalStorage.version = $config.version;\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class=\"flex items-center mt-1\">\r\n\t\t\t<div class=\"text-sm dark:text-gray-200\">{$i18n.t('Release Notes')}</div>\r\n\t\t\t<div class=\"flex self-center w-[1px] h-6 mx-2.5 bg-gray-200 dark:bg-gray-700\" />\r\n\t\t\t<div class=\"text-sm dark:text-gray-200\">\r\n\t\t\t\tv{WEBUI_VERSION}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\" w-full p-4 px-5 text-gray-700 dark:text-gray-100\">\r\n\t\t<div class=\" overflow-y-scroll max-h-80 scrollbar-hidden\">\r\n\t\t\t<div class=\"mb-3\">\r\n\t\t\t\t{#if changelog}\r\n\t\t\t\t\t{#each Object.keys(changelog) as version}\r\n\t\t\t\t\t\t<div class=\" mb-3 pr-2\">\r\n\t\t\t\t\t\t\t<div class=\"font-semibold text-xl mb-1 dark:text-white\">\r\n\t\t\t\t\t\t\t\tv{version} - {changelog[version].date}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<hr class=\" dark:border-gray-800 my-2\" />\r\n\r\n\t\t\t\t\t\t\t{#each Object.keys(changelog[version]).filter((section) => section !== 'date') as section}\r\n\t\t\t\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclass=\"font-semibold uppercase text-xs {section === 'added'\r\n\t\t\t\t\t\t\t\t\t\t\t? 'text-white bg-blue-600'\r\n\t\t\t\t\t\t\t\t\t\t\t: section === 'fixed'\r\n\t\t\t\t\t\t\t\t\t\t\t\t? 'text-white bg-green-600'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: section === 'changed'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'text-white bg-yellow-600'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: section === 'removed'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'text-white bg-red-600'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}  w-fit px-3 rounded-full my-2.5\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{section}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"my-2.5 px-1.5\">\r\n\t\t\t\t\t\t\t\t\t\t{#each Object.keys(changelog[version][section]) as item}\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-sm mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"font-semibold uppercase\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{changelog[version][section][item].title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"mb-2 mt-1\">{changelog[version][section][item].content}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\r\n\t\t\t<button\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tlocalStorage.version = $config.version;\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\t>\r\n\t\t\t\t<span class=\"relative\">{$i18n.t(\"Okay, Let's Go!\")}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n","<script lang=\"ts\">\r\n\timport { getAdminDetails } from '$lib/apis/auths';\r\n\timport { onMount, tick, getContext } from 'svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet adminDetails = null;\r\n\r\n\tonMount(async () => {\r\n\t\tadminDetails = await getAdminDetails(localStorage.token).catch((err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t\treturn null;\r\n\t\t});\r\n\t});\r\n</script>\r\n\r\n<div class=\"fixed w-full h-full flex z-[999]\">\r\n\t<div\r\n\t\tclass=\"absolute w-full h-full backdrop-blur-lg bg-white/10 dark:bg-gray-900/50 flex justify-center\"\r\n\t>\r\n\t\t<div class=\"m-auto pb-10 flex flex-col justify-center\">\r\n\t\t\t<div class=\"max-w-md\">\r\n\t\t\t\t<div class=\"text-center dark:text-white text-2xl font-medium z-50\">\r\n\t\t\t\t\t{$i18n.t('Account Activation Pending')}<br />\r\n\t\t\t\t\t{$i18n.t('Contact Admin for WebUI Access')}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\" mt-4 text-center text-sm dark:text-gray-200 w-full\">\r\n\t\t\t\t\t{$i18n.t('Your account status is currently pending activation.')}<br />\r\n\t\t\t\t\t{$i18n.t(\r\n\t\t\t\t\t\t'To access the WebUI, please reach out to the administrator. Admins can manage user statuses from the Admin Panel.'\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{#if adminDetails}\r\n\t\t\t\t\t<div class=\"mt-4 text-sm font-medium text-center\">\r\n\t\t\t\t\t\t<div>{$i18n.t('Admin')}: {adminDetails.name} ({adminDetails.email})</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\r\n\t\t\t\t<div class=\" mt-6 mx-auto relative group w-fit\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"relative z-20 flex px-5 py-2 rounded-full bg-white border border-gray-100 dark:border-none hover:bg-gray-100 text-gray-700 transition font-medium text-sm\"\r\n\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\tlocation.href = '/';\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{$i18n.t('Check Again')}\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"text-xs text-center w-full mt-2 text-gray-400 underline\"\r\n\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\tlocalStorage.removeItem('token');\r\n\t\t\t\t\t\t\tlocation.href = '/auth';\r\n\t\t\t\t\t\t}}>{$i18n.t('Sign Out')}</button\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { onMount, tick, getContext } from 'svelte';\r\n\timport { openDB, deleteDB } from 'idb';\r\n\timport fileSaver from 'file-saver';\r\n\timport mermaid from 'mermaid';\r\n\r\n\tconst { saveAs } = fileSaver;\r\n\r\n\timport { goto } from '$app/navigation';\r\n\r\n\timport { getModels as _getModels } from '$lib/apis';\r\n\timport { getAllChatTags } from '$lib/apis/chats';\r\n\r\n\timport { getPrompts } from '$lib/apis/prompts';\r\n\timport { getDocs } from '$lib/apis/documents';\r\n\timport { getTools } from '$lib/apis/tools';\r\n\r\n\timport { getBanners } from '$lib/apis/configs';\r\n\timport { getUserSettings } from '$lib/apis/users';\r\n\r\n\timport {\r\n\t\tuser,\r\n\t\tshowSettings,\r\n\t\tsettings,\r\n\t\tmodels,\r\n\t\tprompts,\r\n\t\tdocuments,\r\n\t\ttags,\r\n\t\tbanners,\r\n\t\tshowChangelog,\r\n\t\tconfig,\r\n\t\tshowCallOverlay,\r\n\t\ttools,\r\n\t\tfunctions,\r\n\t\ttemporaryChatEnabled\r\n\t} from '$lib/stores';\r\n\r\n\timport SettingsModal from '$lib/components/chat/SettingsModal.svelte';\r\n\timport Sidebar from '$lib/components/layout/Sidebar.svelte';\r\n\timport ChangelogModal from '$lib/components/ChangelogModal.svelte';\r\n\timport AccountPending from '$lib/components/layout/Overlay/AccountPending.svelte';\r\n\timport { getFunctions } from '$lib/apis/functions';\r\n\timport { page } from '$app/stores';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet loaded = false;\r\n\tlet DB = null;\r\n\tlet localDBChats = [];\r\n\r\n\tconst getModels = async () => {\r\n\t\treturn _getModels(localStorage.token);\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tif ($user === undefined) {\r\n\t\t\tawait goto('/auth');\r\n\t\t} else if (['user', 'admin'].includes($user.role)) {\r\n\t\t\ttry {\r\n\t\t\t\t// Check if IndexedDB exists\r\n\t\t\t\tDB = await openDB('Chats', 1);\r\n\r\n\t\t\t\tif (DB) {\r\n\t\t\t\t\tconst chats = await DB.getAllFromIndex('chats', 'timestamp');\r\n\t\t\t\t\tlocalDBChats = chats.map((item, idx) => chats[chats.length - 1 - idx]);\r\n\r\n\t\t\t\t\tif (localDBChats.length === 0) {\r\n\t\t\t\t\t\tawait deleteDB('Chats');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(DB);\r\n\t\t\t} catch (error) {\r\n\t\t\t\t// IndexedDB Not Found\r\n\t\t\t}\r\n\r\n\t\t\tconst userSettings = await getUserSettings(localStorage.token).catch((error) => {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (userSettings) {\r\n\t\t\t\tsettings.set(userSettings.ui);\r\n\t\t\t} else {\r\n\t\t\t\tlet localStorageSettings = {} as Parameters<(typeof settings)['set']>[0];\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlocalStorageSettings = JSON.parse(localStorage.getItem('settings') ?? '{}');\r\n\t\t\t\t} catch (e: unknown) {\r\n\t\t\t\t\tconsole.error('Failed to parse settings from localStorage', e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsettings.set(localStorageSettings);\r\n\t\t\t}\r\n\r\n\t\t\tawait Promise.all([\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tmodels.set(await getModels());\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tprompts.set(await getPrompts(localStorage.token));\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tdocuments.set(await getDocs(localStorage.token));\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\ttools.set(await getTools(localStorage.token));\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tfunctions.set(await getFunctions(localStorage.token));\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tbanners.set(await getBanners(localStorage.token));\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\ttags.set(await getAllChatTags(localStorage.token));\r\n\t\t\t\t})()\r\n\t\t\t]);\r\n\r\n\t\t\tdocument.addEventListener('keydown', function (event) {\r\n\t\t\t\tconst isCtrlPressed = event.ctrlKey || event.metaKey; // metaKey is for Cmd key on Mac\r\n\t\t\t\t// Check if the Shift key is pressed\r\n\t\t\t\tconst isShiftPressed = event.shiftKey;\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + O is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === 'o') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('newChat');\r\n\t\t\t\t\tdocument.getElementById('sidebar-new-chat-button')?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Shift + Esc is pressed\r\n\t\t\t\tif (isShiftPressed && event.key === 'Escape') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('focusInput');\r\n\t\t\t\t\tdocument.getElementById('chat-textarea')?.focus();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + ; is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key === ';') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('copyLastCodeBlock');\r\n\t\t\t\t\tconst button = [...document.getElementsByClassName('copy-code-button')]?.at(-1);\r\n\t\t\t\t\tbutton?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + C is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === 'c') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('copyLastResponse');\r\n\t\t\t\t\tconst button = [...document.getElementsByClassName('copy-response-button')]?.at(-1);\r\n\t\t\t\t\tconsole.log(button);\r\n\t\t\t\t\tbutton?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + S is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === 's') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('toggleSidebar');\r\n\t\t\t\t\tdocument.getElementById('sidebar-toggle-button')?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + Backspace is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key === 'Backspace') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('deleteChat');\r\n\t\t\t\t\tdocument.getElementById('delete-chat-button')?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + . is pressed\r\n\t\t\t\tif (isCtrlPressed && event.key === '.') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('openSettings');\r\n\t\t\t\t\tshowSettings.set(!$showSettings);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + / is pressed\r\n\t\t\t\tif (isCtrlPressed && event.key === '/') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('showShortcuts');\r\n\t\t\t\t\tdocument.getElementById('show-shortcuts-button')?.click();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif ($user.role === 'admin') {\r\n\t\t\t\tshowChangelog.set(localStorage.version !== $config.version);\r\n\t\t\t}\r\n\r\n\t\t\tif ($page.url.searchParams.get('temporary-chat') === 'true') {\r\n\t\t\t\ttemporaryChatEnabled.set(true);\r\n\t\t\t}\r\n\r\n\t\t\tawait tick();\r\n\t\t}\r\n\r\n\t\tloaded = true;\r\n\t});\r\n</script>\r\n\r\n<SettingsModal bind:show={$showSettings} />\r\n<ChangelogModal bind:show={$showChangelog} />\r\n\r\n<div class=\"app relative\">\r\n\t<div\r\n\t\tclass=\" text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900 h-screen max-h-[100dvh] overflow-auto flex flex-row\"\r\n\t>\r\n\t\t{#if loaded}\r\n\t\t\t{#if !['user', 'admin'].includes($user.role)}\r\n\t\t\t\t<AccountPending />\r\n\t\t\t{:else if localDBChats.length > 0}\r\n\t\t\t\t<div class=\"fixed w-full h-full flex z-50\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"absolute w-full h-full backdrop-blur-md bg-white/20 dark:bg-gray-900/50 flex justify-center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\"m-auto pb-44 flex flex-col justify-center\">\r\n\t\t\t\t\t\t\t<div class=\"max-w-md\">\r\n\t\t\t\t\t\t\t\t<div class=\"text-center dark:text-white text-2xl font-medium z-50\">\r\n\t\t\t\t\t\t\t\t\tImportant Update<br /> Action Required for Chat Log Storage\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\" mt-4 text-center text-sm dark:text-gray-200 w-full\">\r\n\t\t\t\t\t\t\t\t\t{$i18n.t(\r\n\t\t\t\t\t\t\t\t\t\t\"Saving chat logs directly to your browser's storage is no longer supported. Please take a moment to download and delete your chat logs by clicking the button below. Don't worry, you can easily re-import your chat logs to the backend through\"\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<span class=\"font-semibold dark:text-white\"\r\n\t\t\t\t\t\t\t\t\t\t>{$i18n.t('Settings')} > {$i18n.t('Chats')} > {$i18n.t('Import Chats')}</span\r\n\t\t\t\t\t\t\t\t\t>. {$i18n.t(\r\n\t\t\t\t\t\t\t\t\t\t'This ensures that your valuable conversations are securely saved to your backend database. Thank you!'\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\" mt-6 mx-auto relative group w-fit\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"relative z-20 flex px-5 py-2 rounded-full bg-white border border-gray-100 dark:border-none hover:bg-gray-100 transition font-medium text-sm\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet blob = new Blob([JSON.stringify(localDBChats)], {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'application/json'\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAs(blob, `chat-export-${Date.now()}.json`);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tconst tx = DB.transaction('chats', 'readwrite');\r\n\t\t\t\t\t\t\t\t\t\t\tawait Promise.all([tx.store.clear(), tx.done]);\r\n\t\t\t\t\t\t\t\t\t\t\tawait deleteDB('Chats');\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tlocalDBChats = [];\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tDownload & Delete\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"text-xs text-center w-full mt-2 text-gray-400 underline\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\tlocalDBChats = [];\r\n\t\t\t\t\t\t\t\t\t\t}}>{$i18n.t('Close')}</button\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<Sidebar />\r\n\t\t\t<slot />\r\n\t\t{/if}\r\n\t</div>\r\n</div>\r\n\r\n<style>\r\n\t.loading {\r\n\t\tdisplay: inline-block;\r\n\t\tclip-path: inset(0 1ch 0 0);\r\n\t\tanimation: l 1s steps(3) infinite;\r\n\t\tletter-spacing: -0.5px;\r\n\t}\r\n\r\n\t@keyframes l {\r\n\t\tto {\r\n\t\t\tclip-path: inset(0 -1ch 0 0);\r\n\t\t}\r\n\t}\r\n\r\n\tpre[class*='language-'] {\r\n\t\tposition: relative;\r\n\t\toverflow: auto;\r\n\r\n\t\t/* make space  */\r\n\t\tmargin: 5px 0;\r\n\t\tpadding: 1.75rem 0 1.75rem 1rem;\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\r\n\tpre[class*='language-'] button {\r\n\t\tposition: absolute;\r\n\t\ttop: 5px;\r\n\t\tright: 5px;\r\n\r\n\t\tfont-size: 0.9rem;\r\n\t\tpadding: 0.15rem;\r\n\t\tbackground-color: #828282;\r\n\r\n\t\tborder: ridge 1px #7b7b7c;\r\n\t\tborder-radius: 5px;\r\n\t\ttext-shadow: #c4c4c4 0 0 2px;\r\n\t}\r\n\r\n\tpre[class*='language-'] button:hover {\r\n\t\tcursor: pointer;\r\n\t\tbackground-color: #bcbabb;\r\n\t}\r\n</style>\r\n"],"names":["instanceOfAny","object","constructors","c","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","getCursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","request","promise","resolve","reject","unlisten","success","error","wrap","value","cacheDonePromiseForTransaction","tx","done","complete","idbProxyTraps","target","prop","receiver","replaceTraps","callback","wrapFunction","func","storeNames","args","unwrap","transformCachableValue","newValue","openDB","name","version","blocked","upgrade","blocking","terminated","openPromise","event","db","deleteDB","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","method","storeName","oldTraps","ctx","insert_hydration","div9","anchor","append_hydration","div2","div0","div1","input0","div5","div3","div4","input1","div8","div6","div7","input2","div10","button","set_data","t0","t0_value","t3","t3_value","t6","t6_value","t9","t9_value","create_if_block","form","t2","t2_value","i18n","getContext","show","currentPassword","newPassword","newPasswordConfirm","updatePasswordHandler","updateUserPassword","toast","$i18n","$$invalidate","svg","path","className","$$props","strokeWidth","create_if_block_3","t4","t4_value","path0","path1","t1","t1_value","create_if_block_2","src_url_equal","img_1","img_1_src_value","generateInitialsImage","attr","div18","div16","div12","button0","button1","button2","button3","div11","div13","hr","div15","div14","button4","div17","button5","current","dirty","t5","t5_value","t7","t7_value","t11","t11_value","t16","t16_value","t18","t18_value","t21","t21_value","saveHandler","profileImageUrl","showAPIKeys","JWTTokenCopied","APIKey","APIKeyCopied","profileImageInputElement","submitHandler","$user","updatedUser","updateUserProfile","user","createAPIKeyHandler","createAPIKey","onMount","getAPIKey","$$value","e","files","reader","originalImageUrl","img","canvas","aspectRatio","newWidth","newHeight","offsetX","offsetY","compressedSrc","canvasPixelTest","url","getGravatarUrl","copyToClipboard","WEBUI_VERSION","span","WEBUI_BUILD_HASH","create_if_block_1","a0","a0_href_value","a4","t17","t17_value","ollamaVersion","updateAvailable","checkForVersionUpdates","getVersionUpdates","compareVersion","getOllamaVersion","showChangelog","t_value","option","option_value_value","t","div","_a","create_if_block_4","if_block1","input","i","create_if_block_6","create_if_block_5","add_render_callback","select0","select1","option0","option1","option2","option3","option4","textarea","t14","t14_value","t22","t22_value","t25","t25_value","t27","t27_value","t30","t30_value","dispatch","createEventDispatcher","saveSettings","getModels","themes","selectedTheme","languages","lang","notificationEnabled","system","showAdvanced","toggleNotification","requestFormat","keepAlive","params","toggleRequestFormat","getLanguages","$settings","_b","applyTheme","_theme","themeToApply","themeChangeHandler","theme","select_value","change_handler","create_if_block_12","each_value","ensure_array_like","create_if_block_13","create_if_block_11","create_if_block_10","create_if_block_9","create_if_block_8","create_if_block_7","select","div45","div44","div20","div19","div23","div22","div21","div24","div27","div26","div25","button6","div30","div29","div28","button7","div33","div32","div31","button8","div36","div35","div34","button9","div37","div40","div39","div38","button10","div43","div42","div41","button11","div46","button12","t8","t8_value","t12","t12_value","t15","t15_value","t24","t24_value","t29","t29_value","t32","t32_value","t35","t35_value","t38","t38_value","t41","t41_value","t43","t43_value","t46","t46_value","t49","t49_value","model","backgroundImageUrl","inputFiles","filesInputElement","titleAutoGenerate","responseAutoCopy","widescreenMode","splitLargeChunks","scrollOnBranchChange","userLocation","defaultModelId","showUsername","chatBubble","chatDirection","showEmojiInCall","voiceInterruption","hapticFeedback","toggleSplitLargeChunks","togglesScrollOnBranchChange","togglewidescreenMode","toggleChatBubble","toggleShowUsername","toggleEmojiInCall","toggleVoiceInterruption","toggleHapticFeedback","toggleUserLocation","position","getUserPosition","updateUserInfo","toggleTitleAutoGenerate","toggleResponseAutoCopy","permission","toggleChangeChatDirection","updateInterfaceHandler","$config","datalist","option_selected_value","if_block0","t13","t13_value","speechAutoSend","responseAutoPlayback","nonLocalVoices","STTEngine","voices","voice","getVoices","getVoicesLoop","res","_getVoices","toggleResponseAutoPlayback","toggleSpeechAutoSend","_d","_c","_f","_e","_h","_g","v","svg0","saveAs","fileSaver","importFiles","showArchiveConfirm","showDeleteConfirm","chatImportInputElement","importChats","_chats","chat","createNewChat","currentChatPage","chats","getChatList","$currentChatPage","scrollPaginationEnabled","exportChats","blob","getAllChats","archiveAllChatsHandler","goto","archiveAllChats","deleteAllChatsHandler","deleteAllChats","getImportOrigin","convertOpenAIChats","loading","content","addNewMemory","memory","setContent","updateMemoryById","table","thead","tr","th0","th1","th2","tbody","each_blocks","dayjs","td0","td1","td2","memories","showAddMemoryModal","showEditMemoryModal","selectedMemory","deleteMemoryById","getMemories","deleteMemoriesByUserId","showManageModal","enableMemory","button_class_value","button1_class_value","button2_class_value","button3_class_value","button4_class_value","button5_class_value","button6_class_value","button7_class_value","t10","t10_value","t19","t19_value","t23","t23_value","updated","settings","models","updateUserSettings","_getModels","selectedTab","scrollHandler","settingsTabsContainer","addScrollListener","tick","removeScrollListener","a","a_href_value","tr_class_value","searchValue","unarchiveChatHandler","chatId","archiveChatById","getArchivedChatList","deleteChatHandler","deleteChatById","exportChatsHandler","getAllArchivedChats","flyAndScale","shareHandler","cloneChatHandler","archiveChatHandler","renameHandler","deleteHandler","onClose","pinned","pinHandler","deleteTagById","addTagById","checkPinned","getTagsById","tag","a_class_value","div_class_value","chatmenu_changes","sharechatmodal_props","div0_class_value","sharechatmodal_changes","selected","shiftKey","mouseOver","showShareChatModal","confirmEdit","chatTitle","editChatTitle","id","_title","updateChatById","pinnedChats","getChatListByTagName","cloneChatById","focusEdit","node","$mobile","showSidebar","loaderElement","entries","observer","entry","each_value_2","func_1","if_block","usermenu_changes","img_src_value","WEBUI_BASE_URL","show_if","if_block5","if_block6","BREAKPOINT","navElement","search","selectedChatId","deleteChat","showDropdown","filteredChatList","chatListLoading","allChatsLoaded","enablePagination","loadMoreChats","newChatList","$chats","mobile","$showSidebar","touchstart","touchend","checkDirection","screenWidth","swipeDistance","onTouchStart","onTouchEnd","onKeyDown","onKeyUp","onFocus","onBlur","enrichChatsWithContent","chatList","enrichedChats","chatDetails","getChatById","$chatId","$showArchivedChats","newChatButton","chatIds","tags","getAllChatTags","showArchivedChats","title","query","contentMatches","message","randomBetween","set_style","min","max","size","x","y","duration","infinite","delay","colorRange","colorArray","amount","iterationCount","fallDistance","rounded","cone","noGravity","xSpread","destroyOnComplete","getColor","each_value_1","confetti","Confetti","section","changelog","getChangelog","br0","br1","adminDetails","getAdminDetails","err","loaded","DB","localDBChats","item","idx","userSettings","getUserSettings","localStorageSettings","prompts","getPrompts","documents","getDocs","tools","getTools","functions","getFunctions","banners","getBanners","isCtrlPressed","isShiftPressed","showSettings","$showSettings","$page","temporaryChatEnabled","$showChangelog"],"mappings":"2qFAAA,MAAMA,GAAgB,CAACC,EAAQC,IAAiBA,EAAa,KAAMC,GAAMF,aAAkBE,CAAC,EAE5F,IAAIC,GACAC,GAEJ,SAASC,IAAuB,CAC5B,OAAQF,KACHA,GAAoB,CACjB,YACA,eACA,SACA,UACA,cACZ,EACA,CAEA,SAASG,IAA0B,CAC/B,OAAQF,KACHA,GAAuB,CACpB,UAAU,UAAU,QACpB,UAAU,UAAU,SACpB,UAAU,UAAU,kBAChC,EACA,CACA,MAAMG,GAAmB,IAAI,QACvBC,GAAqB,IAAI,QACzBC,GAA2B,IAAI,QAC/BC,GAAiB,IAAI,QACrBC,GAAwB,IAAI,QAClC,SAASC,GAAiBC,EAAS,CAC/B,MAAMC,EAAU,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC7C,MAAMC,EAAW,IAAM,CACnBJ,EAAQ,oBAAoB,UAAWK,CAAO,EAC9CL,EAAQ,oBAAoB,QAASM,CAAK,CACtD,EACcD,EAAU,IAAM,CAClBH,EAAQK,GAAKP,EAAQ,MAAM,CAAC,EAC5BI,GACZ,EACcE,EAAQ,IAAM,CAChBH,EAAOH,EAAQ,KAAK,EACpBI,GACZ,EACQJ,EAAQ,iBAAiB,UAAWK,CAAO,EAC3CL,EAAQ,iBAAiB,QAASM,CAAK,CAC/C,CAAK,EACD,OAAAL,EACK,KAAMO,GAAU,CAGbA,aAAiB,WACjBd,GAAiB,IAAIc,EAAOR,CAAO,CAG/C,CAAK,EACI,MAAM,IAAM,CAAA,CAAG,EAGpBF,GAAsB,IAAIG,EAASD,CAAO,EACnCC,CACX,CACA,SAASQ,GAA+BC,EAAI,CAExC,GAAIf,GAAmB,IAAIe,CAAE,EACzB,OACJ,MAAMC,EAAO,IAAI,QAAQ,CAACT,EAASC,IAAW,CAC1C,MAAMC,EAAW,IAAM,CACnBM,EAAG,oBAAoB,WAAYE,CAAQ,EAC3CF,EAAG,oBAAoB,QAASJ,CAAK,EACrCI,EAAG,oBAAoB,QAASJ,CAAK,CACjD,EACcM,EAAW,IAAM,CACnBV,IACAE,GACZ,EACcE,EAAQ,IAAM,CAChBH,EAAOO,EAAG,OAAS,IAAI,aAAa,aAAc,YAAY,CAAC,EAC/DN,GACZ,EACQM,EAAG,iBAAiB,WAAYE,CAAQ,EACxCF,EAAG,iBAAiB,QAASJ,CAAK,EAClCI,EAAG,iBAAiB,QAASJ,CAAK,CAC1C,CAAK,EAEDX,GAAmB,IAAIe,EAAIC,CAAI,CACnC,CACA,IAAIE,GAAgB,CAChB,IAAIC,EAAQC,EAAMC,EAAU,CACxB,GAAIF,aAAkB,eAAgB,CAElC,GAAIC,IAAS,OACT,OAAOpB,GAAmB,IAAImB,CAAM,EAExC,GAAIC,IAAS,mBACT,OAAOD,EAAO,kBAAoBlB,GAAyB,IAAIkB,CAAM,EAGzE,GAAIC,IAAS,QACT,OAAOC,EAAS,iBAAiB,CAAC,EAC5B,OACAA,EAAS,YAAYA,EAAS,iBAAiB,CAAC,CAAC,CAE9D,CAED,OAAOT,GAAKO,EAAOC,CAAI,CAAC,CAC3B,EACD,IAAID,EAAQC,EAAMP,EAAO,CACrB,OAAAM,EAAOC,CAAI,EAAIP,EACR,EACV,EACD,IAAIM,EAAQC,EAAM,CACd,OAAID,aAAkB,iBACjBC,IAAS,QAAUA,IAAS,SACtB,GAEJA,KAAQD,CAClB,CACL,EACA,SAASG,GAAaC,EAAU,CAC5BL,GAAgBK,EAASL,EAAa,CAC1C,CACA,SAASM,GAAaC,EAAM,CAIxB,OAAIA,IAAS,YAAY,UAAU,aAC/B,EAAE,qBAAsB,eAAe,WAChC,SAAUC,KAAeC,EAAM,CAClC,MAAMZ,EAAKU,EAAK,KAAKG,GAAO,IAAI,EAAGF,EAAY,GAAGC,CAAI,EACtD,OAAA1B,GAAyB,IAAIc,EAAIW,EAAW,KAAOA,EAAW,KAAM,EAAG,CAACA,CAAU,CAAC,EAC5Ed,GAAKG,CAAE,CAC1B,EAOQjB,GAAyB,EAAC,SAAS2B,CAAI,EAChC,YAAaE,EAAM,CAGtB,OAAAF,EAAK,MAAMG,GAAO,IAAI,EAAGD,CAAI,EACtBf,GAAKb,GAAiB,IAAI,IAAI,CAAC,CAClD,EAEW,YAAa4B,EAAM,CAGtB,OAAOf,GAAKa,EAAK,MAAMG,GAAO,IAAI,EAAGD,CAAI,CAAC,CAClD,CACA,CACA,SAASE,GAAuBhB,EAAO,CACnC,OAAI,OAAOA,GAAU,WACVW,GAAaX,CAAK,GAGzBA,aAAiB,gBACjBC,GAA+BD,CAAK,EACpCtB,GAAcsB,EAAOhB,IAAsB,EACpC,IAAI,MAAMgB,EAAOK,EAAa,EAElCL,EACX,CACA,SAASD,GAAKC,EAAO,CAGjB,GAAIA,aAAiB,WACjB,OAAOT,GAAiBS,CAAK,EAGjC,GAAIX,GAAe,IAAIW,CAAK,EACxB,OAAOX,GAAe,IAAIW,CAAK,EACnC,MAAMiB,EAAWD,GAAuBhB,CAAK,EAG7C,OAAIiB,IAAajB,IACbX,GAAe,IAAIW,EAAOiB,CAAQ,EAClC3B,GAAsB,IAAI2B,EAAUjB,CAAK,GAEtCiB,CACX,CACA,MAAMF,GAAUf,GAAUV,GAAsB,IAAIU,CAAK,EC5KzD,SAASkB,GAAOC,EAAMC,EAAS,CAAE,QAAAC,EAAS,QAAAC,EAAS,SAAAC,EAAU,WAAAC,CAAY,EAAG,GAAI,CAC5E,MAAMhC,EAAU,UAAU,KAAK2B,EAAMC,CAAO,EACtCK,EAAc1B,GAAKP,CAAO,EAChC,OAAI8B,GACA9B,EAAQ,iBAAiB,gBAAkBkC,GAAU,CACjDJ,EAAQvB,GAAKP,EAAQ,MAAM,EAAGkC,EAAM,WAAYA,EAAM,WAAY3B,GAAKP,EAAQ,WAAW,EAAGkC,CAAK,CAC9G,CAAS,EAEDL,GACA7B,EAAQ,iBAAiB,UAAYkC,GAAUL,EAE/CK,EAAM,WAAYA,EAAM,WAAYA,CAAK,CAAC,EAE9CD,EACK,KAAME,GAAO,CACVH,GACAG,EAAG,iBAAiB,QAAS,IAAMH,EAAY,CAAA,EAC/CD,GACAI,EAAG,iBAAiB,gBAAkBD,GAAUH,EAASG,EAAM,WAAYA,EAAM,WAAYA,CAAK,CAAC,CAE/G,CAAK,EACI,MAAM,IAAM,CAAA,CAAG,EACbD,CACX,CAMA,SAASG,GAAST,EAAM,CAAE,QAAAE,CAAO,EAAK,CAAA,EAAI,CACtC,MAAM7B,EAAU,UAAU,eAAe2B,CAAI,EAC7C,OAAIE,GACA7B,EAAQ,iBAAiB,UAAYkC,GAAUL,EAE/CK,EAAM,WAAYA,CAAK,CAAC,EAErB3B,GAAKP,CAAO,EAAE,KAAK,IAAA,EAAe,CAC7C,CAEA,MAAMqC,GAAc,CAAC,MAAO,SAAU,SAAU,aAAc,OAAO,EAC/DC,GAAe,CAAC,MAAO,MAAO,SAAU,OAAO,EAC/CC,GAAgB,IAAI,IAC1B,SAASC,GAAU1B,EAAQC,EAAM,CAC7B,GAAI,EAAED,aAAkB,aACpB,EAAEC,KAAQD,IACV,OAAOC,GAAS,UAChB,OAEJ,GAAIwB,GAAc,IAAIxB,CAAI,EACtB,OAAOwB,GAAc,IAAIxB,CAAI,EACjC,MAAM0B,EAAiB1B,EAAK,QAAQ,aAAc,EAAE,EAC9C2B,EAAW3B,IAAS0B,EACpBE,EAAUL,GAAa,SAASG,CAAc,EACpD,GAEA,EAAEA,KAAmBC,EAAW,SAAW,gBAAgB,YACvD,EAAEC,GAAWN,GAAY,SAASI,CAAc,GAChD,OAEJ,MAAMG,EAAS,eAAgBC,KAAcvB,EAAM,CAE/C,MAAMZ,EAAK,KAAK,YAAYmC,EAAWF,EAAU,YAAc,UAAU,EACzE,IAAI7B,EAASJ,EAAG,MAChB,OAAIgC,IACA5B,EAASA,EAAO,MAAMQ,EAAK,MAAO,CAAA,IAM9B,MAAM,QAAQ,IAAI,CACtBR,EAAO2B,CAAc,EAAE,GAAGnB,CAAI,EAC9BqB,GAAWjC,EAAG,IAC1B,CAAS,GAAG,CAAC,CACb,EACI,OAAA6B,GAAc,IAAIxB,EAAM6B,CAAM,EACvBA,CACX,CACA3B,GAAc6B,IAAc,CACxB,GAAGA,EACH,IAAK,CAAChC,EAAQC,EAAMC,IAAawB,GAAU1B,EAAQC,CAAI,GAAK+B,EAAS,IAAIhC,EAAQC,EAAMC,CAAQ,EAC/F,IAAK,CAACF,EAAQC,IAAS,CAAC,CAACyB,GAAU1B,EAAQC,CAAI,GAAK+B,EAAS,IAAIhC,EAAQC,CAAI,CACjF,EAAE,6BClC4CgC,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,mBAc1BA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,mBActBA,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,mBAkBnEA,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,+lEAhD5BC,EA0CMlC,EAAAmC,EAAAC,CAAA,EAzCLC,EAYMF,EAAAG,CAAA,EAXLD,EAA4EC,EAAAC,CAAA,gBAE5EF,EAQMC,EAAAE,CAAA,EAPLH,EAMEG,EAAAC,CAAA,OAHWR,EAAe,CAAA,CAAA,SAO9BI,EAYMF,EAAAO,CAAA,EAXLL,EAAwEK,EAAAC,CAAA,gBAExEN,EAQMK,EAAAE,CAAA,EAPLP,EAMEO,EAAAC,CAAA,OAHWZ,EAAW,CAAA,CAAA,SAO1BI,EAYMF,EAAAW,CAAA,EAXLT,EAA4ES,EAAAC,CAAA,gBAE5EV,EAQMS,EAAAE,CAAA,EAPLX,EAMEW,EAAAC,CAAA,OAHWhB,EAAkB,CAAA,CAAA,WAQlCC,EAMMlC,EAAAkD,EAAAd,CAAA,EALLC,EAISa,EAAAC,CAAA,mGA/CkClB,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,iBAMtDrB,EAAe,CAAA,QAAfA,EAAe,CAAA,CAAA,eAQaA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAAG,EAAAC,CAAA,iBAMlDvB,EAAW,CAAA,QAAXA,EAAW,CAAA,CAAA,eAQiBA,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,KAAAmB,EAAAK,EAAAC,CAAA,iBAMtDzB,EAAkB,CAAA,QAAlBA,EAAkB,CAAA,CAAA,eAY/BA,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAmB,EAAAO,EAAAC,CAAA,oEA3DA3B,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,YAMhDA,EAAI,CAAA,EAAGA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAIA,EAAK,CAAA,EAAC,EAAE,MAAM,GAAA,aAIxCA,EAAI,CAAA,GAAA4B,GAAA5B,CAAA,0jBAjBVC,EAsEOlC,EAAA8D,EAAA1B,CAAA,EAhENC,EASMyB,EAAAtB,CAAA,EARLH,EAA6DG,EAAAD,CAAA,gBAC7DF,EAMCG,EAAAW,CAAA,8GAP2BlB,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,gBAMhDrB,EAAI,CAAA,EAAGA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAIA,EAAK,CAAA,EAAC,EAAE,MAAM,GAAA,KAAAmB,EAAAW,EAAAC,CAAA,EAIxC/B,EAAI,CAAA,mIAlDH,MAAAgC,EAAOC,GAAW,MAAM,0BAE1BC,EAAO,GACPC,EAAkB,GAClBC,EAAc,GACdC,EAAqB,GAEnB,MAAAC,EAAA,SAAA,CACDF,IAAgBC,GACb,MAAYE,GAAmB,aAAa,MAAOJ,EAAiBC,CAAW,EAAE,MACrF7E,IACAiF,GAAM,MAAMjF,CAAK,EACV,QAKRiF,GAAM,QAAQC,EAAM,EAAE,uBAAuB,CAAA,MAG9CN,EAAkB,EAAA,MAClBC,EAAc,EAAA,MACdC,EAAqB,EAAA,IAErBG,GAAM,MAAA,iFAAA,MAGNJ,EAAc,EAAA,MACdC,EAAqB,EAAA,WAiBpBK,EAAA,EAAAR,GAAQA,CAAI,gBAcEC,EAAe,KAAA,0BAcfC,EAAW,KAAA,0BAcXC,EAAkB,KAAA,+CAnDlCC,miBChCatC,EAAW,CAAA,CAAA,2CAElBA,EAAS,CAAA,CAAA,UANjBC,EASMlC,EAAA4E,EAAAxC,CAAA,EADLC,EAAkFuC,EAAAC,CAAA,oCAJpE5C,EAAW,CAAA,CAAA,mBAElBA,EAAS,CAAA,CAAA,mDAVL,UAAA6C,EAAY,SAAA,EAAAC,GACZ,YAAAC,EAAc,KAAA,EAAAD,iOC0P0B9C,EAAK,CAAA,EAAC,EAAE,WAAW,EAAA,yBAqDnBA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,oCAjDxC,MAAA,aAAa,eAAiB,6BAY/CA,EAAc,CAAA,EAAAgD,oEAyCfhD,EAAM,CAAA,EAAA,6tCA5DdC,EAgJMlC,EAAA8C,EAAAV,CAAA,EA/ILC,EAoDMS,EAAAH,CAAA,EAnDLN,EAEMM,EAAAH,CAAA,EADLH,EAAyEG,EAAAD,CAAA,gBAG1EF,EA8CMM,EAAAL,CAAA,sBA3CLD,EA0CSC,EAAAa,CAAA,qBAGXd,EAyFMS,EAAAE,CAAA,EAxFLX,EAEMW,EAAAN,CAAA,EADLL,EAAuEK,EAAAE,CAAA,gBAGxEP,EAmFMW,EAAAD,CAAA,iFA3IyCd,EAAK,CAAA,EAAC,EAAE,WAAW,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,2EAqDnBrB,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAA8B,EAAAC,CAAA,quCAvB7DjD,EAgBMlC,EAAA4E,EAAAxC,CAAA,EAVLC,EAIEuC,EAAAQ,CAAA,EACF/C,EAIEuC,EAAAS,CAAA,wkBA5BHnD,EAWMlC,EAAA4E,EAAAxC,CAAA,EALLC,EAIEuC,EAAAC,CAAA,6CA6GF5C,EAAK,CAAA,EAAC,EAAE,uBAAuB,EAAA,4ZARjCC,EASClC,EAAAmD,EAAAf,CAAA,6FADCH,EAAK,CAAA,EAAC,EAAE,uBAAuB,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,iJA9EV,MAAA,CAAA,MAAAtD,cAAkB,EAAI,2BAYvCA,EAAY,CAAA,EAAAuD,wDAkCAvD,EAAK,CAAA,EAAC,EAAE,gBAAgB,4WA5C1CC,EA0CSlC,EAAAmD,EAAAf,CAAA,uGA5CcH,EAAM,CAAA,+FA8CXA,EAAK,CAAA,EAAC,EAAE,gBAAgB,0rCApBxCC,EAgBMlC,EAAA4E,EAAAxC,CAAA,EAVLC,EAIEuC,EAAAQ,CAAA,EACF/C,EAIEuC,EAAAS,CAAA,wkBA5BHnD,EAWMlC,EAAA4E,EAAAxC,CAAA,EALLC,EAIEuC,EAAAC,CAAA,soBAwBJ3C,EAoBSlC,EAAAmD,EAAAf,CAAA,yaA1M8BH,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,aAkB3DA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,WAStBA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,WAOtBA,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,eAQkBA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,wCAqB5BA,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,eAMzCA,EAAW,CAAA,EAAGA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAIA,EAAK,CAAA,EAAC,EAAE,MAAM,GAAA,qBAoKlDA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,oCAhKXA,EAAW,CAAA,GAAA4B,GAAA5B,CAAA,syEAnGLwD,GAAAC,EAAA,IAAAC,EAAA1D,OAAoB,GAAKA,EAAe,CAAA,EAAG2D,GAAsB3D,EAAI,CAAA,CAAA,CAAA,GAAA4D,EAAAH,EAAA,MAAAC,CAAA,ioDA9ElFzD,EAoVMlC,GAAA8F,EAAA1D,EAAA,EAnVLC,EAmUMyD,EAAAC,CAAA,EAlUL1D,EA4DE0D,EAAAtD,CAAA,kBAEFJ,EA8FM0D,EAAAC,CAAA,EA3FL3D,EA2EM2D,EAAAhD,CAAA,EA1ELX,EAiCMW,EAAAL,CAAA,EAhCLN,EA+BMM,EAAAL,CAAA,EA9BLD,EA6BSC,EAAA2D,CAAA,EAtBR5D,EAIE4D,EAAAP,CAAA,SAEFrD,EAeM4D,EAAAzD,CAAA,SAKTH,EAsCMW,EAAAD,CAAA,EArCLV,EAAyEU,EAAAH,CAAA,gBAEzEP,EAkCMU,EAAAL,CAAA,EAjCLL,EAgBCK,EAAAwD,CAAA,gBAED7D,EAOCK,EAAAyD,CAAA,gBAED9D,EAKCK,EAAA0D,CAAA,gBAKJ/D,EAaM2D,EAAAK,CAAA,EAZLhE,EAWMgE,EAAAnD,CAAA,EAVLb,EAA8Da,EAAAJ,CAAA,gBAE9DT,EAOMa,EAAAf,EAAA,EANLE,EAKEF,GAAAU,EAAA,QAFWZ,EAAI,CAAA,CAAA,UAQrBI,EAEM0D,EAAAO,EAAA,yBAENjE,EAAyC0D,EAAAQ,EAAA,UAEzClE,EASM0D,EAAAS,EAAA,EARLnE,EAAsDmE,GAAAC,EAAA,mBACtDpE,EAMCmE,GAAAE,EAAA,4CAwJHrE,EAaMyD,EAAAa,EAAA,EAZLtE,EAWSsE,GAAAC,EAAA,2MApQE,CAAAC,IAAAC,GAAA,GAAA,CAAArB,GAAAC,EAAA,IAAAC,EAAA1D,QAAoB,GAAKA,GAAe,CAAA,EAAG2D,GAAsB3D,GAAI,CAAA,CAAA,CAAA,uCA0BnCA,GAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAmB,EAAAG,EAAAC,CAAA,wBAkB3DvB,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAA2D,EAAAC,CAAA,wBAStB/E,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAA6D,EAAAC,CAAA,wBAOtBjF,GAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAAO,EAAAC,CAAA,wBAQkB3B,GAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAA+D,EAAAC,CAAA,mBAMxCnF,GAAI,CAAA,SAAJA,GAAI,CAAA,CAAA,0BAeQA,GAAK,CAAA,EAAC,EAAE,UAAU,EAAA,KAAAmB,EAAAiE,GAAAC,EAAA,2BAMzCrF,GAAW,CAAA,EAAGA,GAAK,CAAA,EAAC,EAAE,MAAM,EAAIA,GAAK,CAAA,EAAC,EAAE,MAAM,GAAA,KAAAmB,EAAAmE,GAAAC,EAAA,EAI/CvF,GAAW,CAAA,4IAgKdA,GAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAAqE,GAAAC,EAAA,yMAzYX,MAAAzD,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,YAAAyD,CAAA,EAAA5C,EAEP6C,EAAkB,GAClB/G,EAAO,GAEPgH,EAAc,GAEdC,EAAiB,GAEjBC,EAAS,GACTC,EAAe,GAEfC,EAEE,MAAAC,EAAA,SAAA,CACDrH,IAASsH,EAAM,OACdP,IAAoBhC,GAAsBuC,EAAM,IAAI,GAAKP,IAAoB,KAChFjD,EAAA,EAAAiD,EAAkBhC,GAAsB/E,CAAI,CAAA,EAIxC,MAAAuH,EAAA,MAAoBC,GAAkB,aAAa,MAAOxH,EAAM+G,CAAe,EAAE,MACrFpI,GAAA,CACAiF,GAAM,MAAMjF,CAAK,IAIf,OAAA4I,GACG,MAAAE,GAAK,IAAIF,CAAW,EACnB,IAED,IAGFG,EAAA,SAAA,KACLR,EAAe,MAAAS,GAAa,aAAa,KAAK,CAAA,EAC1CT,EACHtD,GAAM,QAAQC,EAAM,EAAE,kBAAkB,CAAA,EAExCD,GAAM,MAAMC,EAAM,EAAE,2BAA2B,CAAA,GAIjD+D,GAAA,SAAA,CACC9D,EAAA,EAAA9D,EAAOsH,EAAM,IAAA,EACbxD,EAAA,EAAAiD,EAAkBO,EAAM,iBAAA,EAExBxD,EAAA,EAAAoD,EAAA,MAAeW,GAAU,aAAa,KAAK,EAAE,MAAOlJ,IACnD,QAAQ,IAAIA,CAAK,EACV,kDASIyI,EAAwBU,mBAIvBC,GAAC,OACNC,EAAQZ,EAAyB,OAAK,GACxC,IAAAa,MAAa,WACjBA,EAAO,OAAU1H,GAAK,CACjB,IAAA2H,EAAsB,GAAA3H,EAAM,OAAO,MAAM,GAEvC,MAAA4H,MAAU,MAChBA,EAAI,IAAMD,EAEVC,EAAI,OAAM,UAAA,CACH,MAAAC,EAAS,SAAS,cAAc,QAAQ,EACxChH,EAAMgH,EAAO,WAAW,IAAI,EAG5BC,EAAcF,EAAI,MAAQA,EAAI,OAGhC,IAAAG,EAAUC,EACVF,EAAc,GACjBC,EAAW,IAAMD,EACjBE,EAAY,MAEZD,EAAW,IACXC,EAAY,IAAMF,GAInBD,EAAO,MAAQ,IACfA,EAAO,OAAS,IAGV,MAAAI,IAAW,IAAMF,GAAY,EAC7BG,IAAW,IAAMF,GAAa,EAGpCnH,EAAI,UAAU+G,EAAKK,GAASC,GAASH,EAAUC,CAAS,EAGlD,MAAAG,GAAgBN,EAAO,UAAU,YAAY,EAGnDtE,EAAA,EAAAiD,EAAkB2B,EAAa,MAE/BtB,EAAyB,MAAQ,KAAIA,CAAA,IAKtCY,EAAM,OAAS,GACd,CAAA,YAAa,aAAc,aAAc,WAAW,EAAE,SAASA,EAAM,CAAC,EAAE,IAAM,GAE/EC,EAAO,cAAcD,EAAM,CAAC,CAAA,UAezBZ,EAAyB,MAAK,eAoC1BuB,GAAe,MAClB5B,EAAkBhC,GAAsB/E,CAAI,CAAA,EAE5C4D,GAAM,KACLC,EAAM,EACL,uGAAuG,EAGvG,CAAA,SAAU,IAAO,EAAE,CAAA,eAUhB,MAAA+E,EAAY,MAAAC,GAAevB,EAAM,KAAK,EAE5CxD,EAAA,EAAAiD,EAAkB6B,CAAG,eAOrB9E,EAAA,EAAAiD,EAAkB,WAAW,gBAelB/G,EAAI,KAAA,0BAoBlB8D,EAAA,EAAAkD,GAAeA,CAAW,UAkBvB8B,GAAgB,aAAa,KAAK,EAClChF,EAAA,EAAAmD,EAAiB,EAAI,EACrB,gBACCnD,EAAA,EAAAmD,EAAiB,EAAK,GACpB,aAkDF6B,GAAgB5B,CAAM,EACtBpD,EAAA,EAAAqD,EAAe,EAAI,EACnB,gBACCrD,EAAA,EAAAqD,EAAe,EAAK,GAClB,aAyCFO,YAuBDA,uBAkBaL,KAGjBP,6OC5VqC,GAClC,MAACiC,EAAa,cADoB,GAClC,QAACA,EAAa,qFAwCwB3H,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,WAG/DuB,GAAAvB,MAAiB,OAAK,4hBAN1BC,EAAoClC,EAAAuG,EAAAnE,CAAA,WAEpCF,EAOMlC,EAAA2C,EAAAP,CAAA,EANLC,EAA0EM,EAAAJ,CAAA,gBAC1EF,EAIMM,EAAAL,CAAA,EAHLD,EAEMC,EAAAE,CAAA,8BAJmCP,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,EAG/DuB,EAAA,GAAAtD,KAAAA,GAAAvB,MAAiB,OAAK,KAAAmB,EAAAG,EAAAC,CAAA,kFAiCoCvB,EAAW,CAAA,CAAA,MAAQ,IACjF,2DAD8DA,EAAW,CAAA,CAAA,qBAAQ,IACjF,oFADCC,EAAgFlC,EAAA6J,EAAAzH,CAAA,mCAAnBH,EAAW,CAAA,CAAA,4DAnFtEA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,mBAcf+E,GAAA/E,OAAoB,KAClBA,EAAK,CAAA,EAAC,EAAE,yBAAyB,EACjCA,EAAe,CAAA,EACT,KAAAA,KAAQ,MAAM,IAAIA,EAAM,CAAA,EAAA,EAAE,YAAY,CAAA,IAC3CA,EAAK,CAAA,EAAC,EAAE,UAAU,GAAA,eAUjBA,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,WAU9BA,EAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,2iBA4CxBA,EAAW,CAAA,EAAC,SAAS,YAAY,MAGtCA,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,mEA/EA6H,oDAqCjB7H,EAAa,CAAA,GAAA8H,GAAA9H,CAAA,oFA5CdA,EAAW,CAAA,CAAA,0eAAXA,EAAW,CAAA,CAAA,28BAYoD4D,EAAAmE,EAAA,OAAAC,EAAA,0DAAAhI,KAAQ,MAAM,owBAjBnFC,EAmGMlC,GAAAkD,EAAAd,EAAA,EAlGLC,EAiGMa,EAAAf,CAAA,EAhGLE,EA6CMF,EAAAY,CAAA,EA5CLV,EAKMU,EAAAP,CAAA,EAJLH,EAGMG,EAAAD,CAAA,8BAEPF,EAqCMU,EAAAL,CAAA,EApCLL,EA0BMK,EAAAE,CAAA,EAzBLP,EAeMO,EAAAN,CAAA,sBAVLD,EASIC,EAAA0H,CAAA,gBAGL3H,EAOSO,EAAAqD,CAAA,EADR5D,EAAsC4D,EAAAtD,CAAA,gBAIxCN,EAOSK,EAAAwD,CAAA,wCAiBX7D,EAAoCF,EAAAoE,CAAA,SAEpClE,EAqBMF,EAAAa,CAAA,SAENX,EAUMF,EAAAW,CAAA,0CALLT,EAICS,EAAAoH,EAAA,0FA3FEjI,GAAW,CAAA,CAAA,uBACXA,GAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,iEAcf,CAAA6C,IAAAC,GAAA,KAAAE,KAAAA,GAAA/E,QAAoB,KAClBA,GAAK,CAAA,EAAC,EAAE,yBAAyB,EACjCA,GAAe,CAAA,EACT,KAAAA,MAAQ,MAAM,IAAIA,GAAM,CAAA,EAAA,EAAE,YAAY,CAAA,IAC3CA,GAAK,CAAA,EAAC,EAAE,UAAU,GAAA,KAAAmB,EAAA2D,EAAAC,CAAA,GAPwC,CAAAH,IAAAC,GAAA,GAAAmD,KAAAA,EAAA,0DAAAhI,MAAQ,6CAiBjEA,GAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAmB,EAAA6D,EAAAC,CAAA,uBAU9BjF,GAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,KAAAmB,EAAAO,EAAAC,CAAA,EAK1B3B,GAAa,CAAA,8EAuCXA,GAAW,CAAA,EAAC,SAAS,YAAY,4FAGtCA,GAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAmB,EAAA+G,GAAAC,CAAA,uLA7HjB,MAAAnG,EAAOC,GAAW,MAAM,0BAE1BmG,EAAgB,GAEhBC,EAAkB,KAClBxJ,EACH,CAAA,QAAS,GACT,OAAQ,EAAA,EAGH,MAAAyJ,EAAA,SAAA,KACLD,EAAkB,IAAA,EAClB3F,EAAA,EAAA7D,EAAA,MAAgB0J,GAAoC,EAAE,MAAOhL,KAE3D,QAASoK,GACT,OAAQA,OAIV,QAAQ,IAAI9I,CAAO,EAEnB6D,EAAA,EAAA2F,EAAkBG,GAAe3J,EAAQ,OAAQA,EAAQ,OAAO,CAAA,EAChE,QAAQ,IAAIwJ,CAAe,GAG5B,OAAA7B,GAAA,SAAA,CACC9D,EAAA,EAAA0F,EAAA,MAAsBK,GAAiB,aAAa,KAAK,EAAE,MAAOlL,GAC1D,KAGR+K,0BAmCKI,GAAc,IAAI,EAAI,QAUvBJ,uJCqFmCK,EAAA3I,MAAS,MAAO,wHAAnC4I,EAAA,QAAAC,EAAA7I,MAAS,6BAAxBC,EAA6DlC,EAAA6K,EAAAzI,CAAA,iBAA3B0E,EAAA,CAAA,EAAA,GAAA8D,KAAAA,EAAA3I,MAAS,MAAO,KAAAmB,EAAA2H,EAAAH,CAAA,EAAnC9D,EAAA,CAAA,EAAA,GAAAgE,KAAAA,EAAA7I,MAAS;ubAM3BC,EASMlC,EAAAgL,EAAA5I,CAAA,yCAiB6BH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,mCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,mCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,6DAsCE3I,EAAK,EAAA,EAAC,EAAE,YAAY,EAAA,qBA+BpBA,EAAK,EAAA,EAAC,EAAE,cAAc,EAAA,qDApChDgJ,EAAAhJ,EAAK,EAAA,IAAL,YAAAgJ,EAAO,QAAS,0GAc/B,OAAAhJ,OAAc,KAAIiJ,wBAQpBC,EAAAlJ,OAAc,MAAIgD,GAAAhD,CAAA,kBAsBhB,GAAAA,OAAkB,GAAE,OAAA8H,GAEf,GAAA9H,OAAkB,OAAM,OAAAuD,ksCA7CrCtD,EAAoClC,EAAAuG,EAAAnE,CAAA,WAEpCF,EA6BMlC,EAAAsC,EAAAF,CAAA,EA5BLC,EAgBMC,EAAAE,CAAA,EAfLH,EAA2EG,EAAAD,CAAA,gBAE3EF,EAYSG,EAAAyD,CAAA,6CAeX/D,EA2BMlC,EAAA0C,EAAAN,CAAA,EA1BLC,EAyBMK,EAAAE,CAAA,EAxBLP,EAA6EO,EAAAD,CAAA,gBAE7EN,EAqBSO,EAAAsD,CAAA,yHA3DY+E,EAAAhJ,EAAK,EAAA,IAAL,YAAAgJ,EAAO,QAAS,2FAKUhJ,EAAK,EAAA,EAAC,EAAE,YAAY,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,kEAiB/D/B,OAAc,uFAc6BA,EAAK,EAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAAK,EAAAC,CAAA,wPAnBlCzB,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,kKAAjDC,EAA2DlC,EAAA6J,EAAAzH,CAAA,mCAA1BH,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFhB3I,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,kKAAlDC,EAA4DlC,EAAA6J,EAAAzH,CAAA,mCAA3BH,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,2VAYrC3I,EAAK,EAAA,EAAC,EAAE,uDAAuD,CAAA,6CAJ9EC,EAOMlC,EAAAgL,EAAA5I,CAAA,EANLC,EAKE2I,EAAAI,CAAA,OADWnJ,EAAS,CAAA,CAAA,2DADRA,EAAK,EAAA,EAAC,EAAE,uDAAuD,6CAChEA,EAAS,CAAA,QAATA,EAAS,CAAA,CAAA,kDA6BYA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,kKAA/CC,EAAyDlC,EAAA6J,EAAAzH,CAAA,mCAAxBH,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAZd3I,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,kKAAlDC,EAA4DlC,EAAA6J,EAAAzH,CAAA,mCAA3BH,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,+CA9If3I,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,aAGhBA,EAAK,EAAA,EAAC,EAAE,OAAO,EAAA,iBAQjCA,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,WAClBA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,WACTA,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,WACvBA,EAAK,EAAA,EAAC,EAAE,OAAO,EAAA,0BASIA,EAAK,EAAA,EAAC,EAAE,UAAU,EAAA,8BA+BjBA,EAAK,EAAA,EAAC,EAAE,eAAe,EAAA,6BAsB9BA,EAAK,EAAA,EAAC,EAAE,eAAe,EAAA,2BAUpCA,EAAK,EAAA,EAAC,EAAE,qBAAqB,EAAA,gBAMpDA,EAAY,CAAA,EAAGA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAIA,EAAK,EAAA,EAAC,EAAE,MAAM,GAAA,qBAwGpDA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,qBAnKLA,EAAS,CAAA,CAAA,2BAAd,OAAIoJ,IAAA,gCAMJpJ,EAAK,EAAA,EAAC,WAAa,SAAOqJ,GAAA,qBAwBvB,OAAArJ,QAAwB,GAAIsJ,+BAiC/BtJ,EAAY,CAAA,GAAA4B,GAAA5B,CAAA,oJArFS,KAAG,2BACL,KAAG,2BACE,KAAG,2BACP,KAAG,04BAHF,KAAG,iEACL,KAAG,iEACE,KAAG,iEACP,KAAG,sxDAPbA,EAAa,CAAA,IAAA,QAAAuJ,GAAA,IAAAvJ,EAAA,EAAA,EAAA,KAAAwJ,CAAA,CAAA,2RAoBbxJ,EAAI,CAAA,IAAA,QAAAuJ,GAAA,IAAAvJ,EAAA,EAAA,EAAA,KAAAyJ,EAAA,CAAA,s8BA9BtBxJ,EA0MMlC,GAAA8F,EAAA1D,EAAA,EAzMLC,EAmKMyD,EAAAC,CAAA,EAlKL1D,EAwEM0D,EAAA7C,CAAA,EAvELb,EAAwEa,EAAAX,CAAA,gBAExEF,EAkBMa,EAAAP,CAAA,EAjBLN,EAAsEM,EAAAH,CAAA,gBACtEH,EAeMM,EAAAL,CAAA,EAdLD,EAaSC,EAAAmJ,CAAA,EAPRpJ,EAAsDoJ,EAAAE,CAAA,gBACtDtJ,EAAkDoJ,EAAAG,CAAA,gBAClDvJ,EAA4DoJ,EAAAI,CAAA,gBAC5DxJ,EAAoDoJ,EAAAK,CAAA,gBACpDzJ,EAAmCoJ,EAAAM,CAAA,OARvB9J,EAAa,CAAA,EAAA,EAAA,SAe5BI,EAgBMa,EAAAH,CAAA,EAfLV,EAAyEU,EAAAH,CAAA,gBACzEP,EAaMU,EAAAL,CAAA,EAZLL,EAWSK,EAAAgJ,EAAA,kEATIzJ,EAAI,CAAA,EAAA,EAAA,mCAyBnBI,EAkBMa,EAAAf,EAAA,EAjBLE,EAgBMF,GAAAW,EAAA,EAfLT,EAA8ES,GAAAE,EAAA,oBAE9EX,EAYSS,GAAAmD,EAAA,wBAKZ5D,EAAyC0D,EAAAQ,EAAA,SAEzClE,EAOM0D,EAAAC,EAAA,EANL3D,EAAyE2D,GAAAK,EAAA,oBACzEhE,EAIE2D,GAAAgG,EAAA,QAHW/J,EAAM,CAAA,CAAA,UAMpBI,EA4EM0D,EAAAS,EAAA,EA3ELnE,EASMmE,GAAAC,EAAA,EARLpE,EAAiEoE,GAAAH,EAAA,oBACjEjE,EAMCoE,GAAAP,EAAA,8CAsEJ7D,EAmCMyD,EAAAa,EAAA,EAlCLtE,EAiCSsE,GAAAR,EAAA,2OArMgClE,GAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,4BAGhBrB,GAAK,EAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,4BAQjC/B,GAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAA2D,EAAAC,CAAA,4BAClB/E,GAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAA6D,EAAAC,CAAA,4BACTjF,GAAK,EAAA,EAAC,EAAE,WAAW,EAAA,KAAAmB,EAAAO,EAAAC,CAAA,4BACvB3B,GAAK,EAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAA+D,EAAAC,CAAA,gBAP7BnF,GAAa,CAAA,CAAA,4BAgBoBA,GAAK,EAAA,EAAC,EAAE,UAAU,EAAA,KAAAmB,EAAA6I,EAAAC,CAAA,iBAUxDjK,GAAS,CAAA,CAAA,wBAAd,OAAIoJ,IAAA,EAAA,4IAAJ,uBANUpJ,GAAI,CAAA,CAAA,EAYdA,GAAK,EAAA,EAAC,WAAa,0FAeyBA,GAAK,EAAA,EAAC,EAAE,eAAe,EAAA,KAAAmB,EAAAmE,GAAAC,EAAA,8GAsB9BvF,GAAK,EAAA,EAAC,EAAE,eAAe,EAAA,KAAAmB,EAAA+I,GAAAC,EAAA,kBAEpDnK,GAAM,CAAA,CAAA,8BAQUA,GAAK,EAAA,EAAC,EAAE,qBAAqB,EAAA,KAAAmB,EAAAiJ,GAAAC,EAAA,+BAMpDrK,GAAY,CAAA,EAAGA,GAAK,EAAA,EAAC,EAAE,MAAM,EAAIA,GAAK,EAAA,EAAC,EAAE,MAAM,GAAA,KAAAmB,EAAAmJ,GAAAC,EAAA,EAIhDvK,GAAY,CAAA,qJAoGhBA,GAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAAqJ,GAAAC,EAAA,qMAxUXC,EAAWC,KAIX3I,EAAOC,GAAW,MAAM,uBAInB,GAAA,CAAA,aAAA2I,CAAA,EAAA9H,EACA,CAAA,UAAA+H,CAAA,EAAA/H,EAGPgI,EAAA,CAAU,OAAQ,QAAS,iBAAkB,uBAAwB,WAAW,EAChFC,EAAgB,SAEhBC,EAAA,CAAA,EACAC,EAAOxI,EAAM,SACbyI,EAAsB,GACtBC,EAAS,GAETC,EAAe,GAEb,MAAAC,EAAA,SAAA,CACC,MAAmB,aAAa,sBAEnB,eAClBH,EAAuB,CAAAA,CAAA,EACvBN,EAAe,CAAA,oBAAAM,CAAA,CAAA,GAEf1I,GAAM,MACLC,EAAM,EACL,2JAAA,CAAA,OAOA6I,EAAgB,GAChBC,EAA2B,KAE3BC,EAAA,CAEH,KAAM,KACN,YAAa,KACb,kBAAmB,KACnB,cAAe,KACf,SAAU,KACV,aAAc,KACd,aAAc,KACd,MAAO,KACP,MAAO,KACP,KAAM,KACN,MAAO,KACP,QAAS,KACT,UAAW,KACX,SAAU,KACV,WAAY,KACZ,QAAS,MAGJ,MAAAC,EAAA,SAAA,CACDH,IAAkB,OACrBA,EAAgB,MAAA,MAEhBA,EAAgB,EAAA,EAGjBV,EAAA,CAAe,cAAeU,IAAkB,GAAKA,EAAgB,UAGtE9E,GAAA,SAAA,SACC9D,EAAA,EAAAqI,EAAgB,aAAa,OAAS,QAAA,MAEtCC,EAAkB,MAAAU,GAAA,CAAA,EAElBhJ,EAAA,EAAAwI,EAAsBS,EAAU,qBAAuB,EAAA,EACvDjJ,EAAA,EAAAyI,EAASQ,EAAU,QAAU,EAAA,EAE7BjJ,EAAA,EAAA4I,EAAgBK,EAAU,eAAiB,EAAA,EAC3CjJ,EAAA,EAAA6I,EAAYI,EAAU,WAAa,IAAA,EAEnCjJ,EAAA,EAAA8I,EAAA,CAAA,GAAcA,KAAWG,EAAU,MAAA,CAAA,MACnCH,EAAO,MAAOxC,EAAA2C,GAAA,YAAAA,EAAW,SAAX,MAAA3C,EAAmB,QAAQ4C,EAAAD,GAAA,YAAAA,EAAW,SAAX,YAAAC,EAAmB,OAAY,CAAA,GAAA,KAAK,GAAG,EAAI,gBAG/EC,EAAcC,GAAA,KACfC,EAAeD,IAAW,YAAc,OAASA,EAEjDA,IAAW,WACdC,EAAe,OAAO,WAAW,8BAA8B,EAAE,QAAU,OAAS,SAGjFA,IAAiB,QAAA,CAAWD,EAAO,SAAS,MAAM,IACrD,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,MAAM,EACrE,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,EACxE,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,EACxE,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,GAGzEhB,EACE,OAAQnE,GAAMA,IAAMoF,CAAY,EAChC,QAASpF,GAAA,CACTA,EAAE,MAAM,GAAG,EAAE,QAASA,GAAAA,CACrB,SAAS,gBAAgB,UAAU,OAAOA,CAAC,MAI9CoF,EAAa,MAAM,GAAG,EAAE,QAASpF,GAAA,CAChC,SAAS,gBAAgB,UAAU,IAAIA,CAAC,IAGzC,QAAQ,IAAImF,CAAM,GAGbE,EAAsBF,GAAA,CAC3BG,GAAM,IAAIH,CAAM,EAChB,aAAa,QAAQ,QAASA,CAAM,EAChCA,EAAO,SAAS,MAAM,IACzB,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,EACxE,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,EACxE,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,EACxE,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,EACxE,SAAS,gBAAgB,UAAU,IAAI,MAAM,GAE9CD,EAAWC,CAAM,gBAcDf,EAAamB,GAAA,IAAA,SAER,MAAAC,EAAA,IAAAH,EAAmBjB,CAAa,eAkBrCE,EAAIiB,GAAA,IAAA,wBAEJvF,GAAC,CACZlE,EAAM,eAAewI,CAAI,UA6BzBI,kBAmBSF,EAAM,KAAA,0BAahBzI,EAAA,EAAA0I,GAAgBA,CAAY,yCAiB1B1I,EAAA,EAAA6I,EAAYA,IAAc,KAAO,KAAO,IAAI,gBAiBhCA,EAAS,KAAA,0BAarBE,YA6BJb,EAAY,CACX,OAAQO,IAAW,GAAKA,EAAS,OACjC,OAAM,CACL,MAAOK,EAAO,OAAS,KAAOA,EAAO,KAAO,SAAc,OAC1D,KAAMA,EAAO,KAAOA,EAAO,KAAK,MAAM,GAAG,EAAE,OAAQ7E,GAAMA,CAAC,EAAI,OAC9D,YAAa6E,EAAO,cAAgB,KAAOA,EAAO,YAAc,OAChE,kBACCA,EAAO,oBAAsB,KAAOA,EAAO,kBAAoB,OAChE,cAAeA,EAAO,gBAAkB,KAAOA,EAAO,cAAgB,OACtE,SAAUA,EAAO,WAAa,KAAOA,EAAO,SAAW,OACvD,aAAcA,EAAO,eAAiB,KAAOA,EAAO,aAAe,OACnE,aAAcA,EAAO,eAAiB,KAAOA,EAAO,aAAe,OACnE,MAAOA,EAAO,QAAU,KAAOA,EAAO,MAAQ,OAC9C,MAAOA,EAAO,QAAU,KAAOA,EAAO,MAAQ,OAC9C,MAAOA,EAAO,QAAU,KAAOA,EAAO,MAAQ,OAC9C,QAASA,EAAO,UAAY,KAAOA,EAAO,QAAU,OACpD,UAAWA,EAAO,YAAc,KAAOA,EAAO,UAAY,OAC1D,SAAUA,EAAO,WAAa,KAAOA,EAAO,SAAW,OACvD,WAAYA,EAAO,aAAe,KAAOA,EAAO,WAAa,OAC7D,SAAUA,EAAO,WAAa,KAAOA,EAAO,SAAW,OACvD,UAAWA,EAAO,YAAc,KAAOA,EAAO,UAAY,OAC1D,WAAYA,EAAO,aAAe,KAAOA,EAAO,WAAa,OAC7D,QAASA,EAAO,UAAY,KAAOA,EAAO,QAAU,QAErD,UAAWD,EAAa,MAAMA,CAAS,EAAIA,EAAY,SAASA,CAAS,EAAK,SAE/Eb,EAAS,MAAM,6VC5GkD/B,EAAA3I,MAAM,KAAI,gIAA1D4I,EAAA,QAAAC,EAAA7I,MAAM,uEAArBC,EAAmFlC,EAAA6K,EAAAzI,CAAA,iBAApB0E,EAAA,CAAA,EAAA,QAAA8D,KAAAA,EAAA3I,MAAM,KAAI,KAAAmB,EAAA2H,EAAAH,CAAA,EAA1D9D,EAAA,CAAA,EAAA,QAAAgE,KAAAA,EAAA7I,MAAM,0EAwBYA,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,6CAY3C3I,EAAK,EAAA,EAAC,EAAE,iDAAiD,EAAA,6BAUrD,OAAAA,QAAiB,GAAIoM,sgBAb7BnM,EAoBMlC,EAAAsC,EAAAF,CAAA,EAnBLC,EAkBMC,EAAAE,CAAA,EAjBLH,EAEMG,EAAAD,CAAA,gBAENF,EAYSG,EAAAW,CAAA,yEAfPlB,EAAK,EAAA,EAAC,EAAE,iDAAiD,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,wHAazBrB,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAuBb3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAoBZ3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAwBb3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAwBZ3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCA6BZ3I,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,kKAAhDC,EAAyDlC,EAAA6J,EAAAzH,CAAA,qCAAzBH,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFhB3I,EAAK,EAAA,EAAC,EAAE,OAAO,EAAA,kKAA/CC,EAAwDlC,EAAA6J,EAAAzH,CAAA,qCAAxBH,EAAK,EAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAwBf3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAwBZ3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAsBZ3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAsBZ3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAwBZ3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAsBZ3I,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,qCAAtBH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,qCAArBH,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,uDArSX3I,EAAK,EAAA,EAAC,EAAE,eAAe,EAAA,eAUtBA,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,iBAUpBA,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,eAIjBA,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,qBA4CxBA,EAAK,EAAA,EAAC,EAAE,iBAAiB,EAAA,yBAoBzBA,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,0BAmBzDA,EAAK,EAAA,EAAC,EAAE,+CAA+C,EAAA,2BAsBvDA,EAAK,EAAA,EAAC,EAAE,kDAAkD,EAAA,2BAsB1DA,EAAK,EAAA,EAAC,EAAE,uBAAuB,EAAA,qBAwBOA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,qBAInBA,EAAK,EAAA,EAAC,EAAE,uBAAuB,EAAA,2BAqBhEA,EAAK,EAAA,EAAC,EAAE,gCAAgC,EAAA,2BAqBPA,EAAK,EAAA,EAAC,EAAE,qBAAqB,EAAA,2BAoB7BA,EAAK,EAAA,EAAC,EAAE,iBAAiB,EAAA,qBAkBpBA,EAAK,EAAA,EAAC,EAAE,OAAO,EAAA,qBAIpBA,EAAK,EAAA,EAAC,EAAE,kCAAkC,EAAA,2BAoB1CA,EAAK,EAAA,EAAC,EAAE,uBAAuB,EAAA,wBAyBnEA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,YAzSNqM,GAAAC,GAAAtM,MAAQ,OAAM3B,EAAA,CAAA,2BAAnB,OAAI+K,IAAA,4CAsBA,OAAApJ,SAAe,GAAIuM,4BASrBrD,GAAA,CAAAlJ,MAAU,YAAUwM,GAAAxM,CAAA,qBAmClB,OAAAA,QAAmB,GAAIyM,+CAkBvB,OAAAzM,SAAkB,MAAK0M,+CAsBvB,OAAA1M,QAAqB,GAAI2M,+CAsBzB,OAAA3M,QAAyB,GAAI4M,+CA2B7B,OAAA5M,QAAuB,KAAIqJ,+CAsB3B,OAAArJ,QAAsB,GAAIsJ,+CAsB1B,OAAAtJ,QAAqB,GAAIiJ,+CAoBzB,OAAAjJ,QAAiB,GAAIgD,+CAoBrB,OAAAhD,SAAmB,GAAIuD,+CAsBvB,OAAAvD,SAAsB,GAAI8H,+CAoB1B,OAAA9H,SAAoB,GAAI4B,6qLA7RlB5B,EAAc,EAAA,IAAA,QAAAuJ,GAAA,IAAAvJ,EAAA,EAAA,EAAA,KAAA6M,CAAA,CAAA,8+EA9C/B5M,EA8VOlC,GAAA8D,EAAA1B,EAAA,EAvVNC,EA0BEyB,EAAAsH,CAAA,kBAEF/I,EAiTMyB,EAAAiL,CAAA,EAhTL1M,EAmBM0M,EAAAnM,CAAA,EAlBLP,EAIMO,EAAAN,CAAA,EAHLD,EAEMC,EAAAE,CAAA,EADLH,EAAkEG,EAAAD,CAAA,gBAIpEF,EAWMO,EAAAD,CAAA,EAVLN,EASSM,EAAAmM,CAAA,EAJRzM,EAAuEyM,EAAAjE,CAAA,uEAH3D5I,EAAc,EAAA,EAAA,EAAA,SAU7BI,EAAoC0M,EAAAxI,CAAA,SAEpClE,EAyRM0M,EAAAC,CAAA,EAxRL3M,EAA8D2M,EAAAtM,CAAA,gBAE9DL,EAkBM2M,EAAAlM,CAAA,EAjBLT,EAgBMS,EAAAE,CAAA,EAfLX,EAAmEW,EAAAD,CAAA,gBAEnEV,EAYSW,EAAAiD,CAAA,8CA4BX5D,EAkBM2M,EAAA3I,CAAA,EAjBLhE,EAgBMgE,EAAAnD,CAAA,EAfLb,EAAoEa,EAAAf,CAAA,gBAEpEE,EAYSa,EAAAgD,EAAA,wBAIX7D,EAgBM2M,EAAAvI,EAAA,EAfLpE,EAcMoE,GAAAH,EAAA,EAbLjE,EAAmEiE,GAAAN,EAAA,oBAEnE3D,EAUSiE,GAAAH,EAAA,wBAIX9D,EAoBM2M,EAAArI,EAAA,EAnBLtE,EAkBMsE,GAAAZ,EAAA,EAjBL1D,EAEM0D,GAAAS,CAAA,mBAENnE,EAYS0D,GAAAK,EAAA,wBAIX/D,EAoBM2M,EAAAC,EAAA,EAnBL5M,EAkBM4M,GAAAC,EAAA,EAjBL7M,EAEM6M,GAAApJ,EAAA,oBAENzD,EAYS6M,GAAAxI,EAAA,wBAIXrE,EAyBM2M,EAAAG,EAAA,EAxBL9M,EAuBM8M,GAAAC,EAAA,EAtBL/M,EAEM+M,GAAAC,EAAA,oBAENhN,EAiBS+M,GAAAxI,EAAA,wBAIXvE,EAAgE2M,EAAAM,EAAA,mBAEhEjN,EAkBM2M,EAAAO,EAAA,EAjBLlN,EAgBMkN,GAAAC,EAAA,EAfLnN,EAA0EmN,GAAAC,EAAA,oBAE1EpN,EAYSmN,GAAAE,EAAA,wBAIXrN,EAoBM2M,EAAAW,EAAA,EAnBLtN,EAkBMsN,GAAAC,EAAA,EAjBLvN,EAEMuN,GAAAC,EAAA,oBAENxN,EAYSuN,GAAAE,EAAA,wBAIXzN,EAkBM2M,EAAAe,EAAA,EAjBL1N,EAgBM0N,GAAAC,EAAA,EAfL3N,EAAwE2N,GAAAC,EAAA,oBAExE5N,EAYS2N,GAAAE,EAAA,wBAIX7N,EAkBM2M,EAAAmB,EAAA,EAjBL9N,EAgBM8N,GAAAC,EAAA,EAfL/N,EAAoE+N,GAAAC,EAAA,oBAEpEhO,EAYS+N,GAAAE,EAAA,wBAIXjO,EAAiE2M,EAAAuB,EAAA,mBAEjElO,EAkBM2M,EAAAwB,EAAA,EAjBLnO,EAgBMmO,GAAAC,EAAA,EAfLpO,EAAqFoO,GAAAC,EAAA,oBAErFrO,EAYSoO,GAAAE,EAAA,wBAIXtO,EAkBM2M,EAAA4B,EAAA,EAjBLvO,EAgBMuO,GAAAC,EAAA,EAfLxO,EAA0EwO,GAAAC,EAAA,oBAE1EzO,EAYSwO,GAAAE,EAAA,wBAMb1O,EAOMyB,EAAAkN,EAAA,EANL3O,EAKS2O,GAAAC,EAAA,oIAzNKhP,EAAyB,EAAA,CAAA,wPA5FDA,GAAK,EAAA,EAAC,EAAE,eAAe,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,uBAUtBtD,GAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAmB,EAAAG,EAAAC,CAAA,gBACrD8K,GAAAC,GAAAtM,OAAQ,OAAM3B,EAAA,CAAA,wBAAnB,OAAI+K,IAAA,EAAA,2IAAJ,0BAJUpJ,GAAc,EAAA,CAAA,uBAacA,GAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAAK,EAAAC,CAAA,uBAIjBzB,GAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAmB,EAAA8N,EAAAC,CAAA,iFAkBvDlP,OAAU,kGA0BqBA,GAAK,EAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAmB,EAAAgO,EAAAC,CAAA,yGAoBzBpP,GAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAmB,EAAAkO,GAAAC,EAAA,yGAmBzDtP,GAAK,EAAA,EAAC,EAAE,+CAA+C,EAAA,KAAAmB,EAAAmE,GAAAC,EAAA,yGAsBvDvF,GAAK,EAAA,EAAC,EAAE,kDAAkD,EAAA,KAAAmB,EAAAqE,GAAAC,EAAA,yGAsB1DzF,GAAK,EAAA,EAAC,EAAE,uBAAuB,EAAA,KAAAmB,EAAAoO,GAAAC,EAAA,yGAwBOxP,GAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAAmJ,GAAAC,EAAA,yBAInBvK,GAAK,EAAA,EAAC,EAAE,uBAAuB,EAAA,KAAAmB,EAAAsO,GAAAC,EAAA,yGAqBhE1P,GAAK,EAAA,EAAC,EAAE,gCAAgC,EAAA,KAAAmB,EAAAwO,GAAAC,EAAA,yGAqBP5P,GAAK,EAAA,EAAC,EAAE,qBAAqB,EAAA,KAAAmB,EAAA0O,GAAAC,EAAA,yGAoB7B9P,GAAK,EAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAmB,EAAA4O,GAAAC,EAAA,yGAkBpBhQ,GAAK,EAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAA8O,GAAAC,EAAA,yBAIpBlQ,GAAK,EAAA,EAAC,EAAE,kCAAkC,EAAA,KAAAmB,EAAAgP,GAAAC,EAAA,yGAoB1CpQ,GAAK,EAAA,EAAC,EAAE,uBAAuB,EAAA,KAAAmB,EAAAkP,GAAAC,EAAA,yGAyBnEtQ,GAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAAoP,GAAAC,EAAA,yKAzSUC,GAAUA,EAAM,gHAnNrC/F,EAAWC,KAEX3I,EAAOC,GAAW,MAAM,yBAEnB,GAAA,CAAA,aAAA2I,CAAA,EAAA9H,EAEP4N,EAAqB,KACrBC,EAAa,KACbC,EAGAC,EAAoB,GACpBC,EAAmB,GACnBC,EAAiB,GACjBC,EAAmB,GACnBC,EAAuB,GACvBC,EAAe,GAGfC,EAAiB,GACjBC,EAAe,GAEfC,EAAa,GACbC,EAA+B,MAE/BC,EAAkB,GAClBC,EAAoB,GACpBC,EAAiB,GAEf,MAAAC,EAAA,SAAA,KACLV,EAAoB,CAAAA,CAAA,EACpBpG,EAAe,CAAA,iBAAAoG,CAAA,CAAA,GAGVW,EAAA,SAAA,KACLV,EAAwB,CAAAA,CAAA,EACxBrG,EAAe,CAAA,qBAAAqG,CAAA,CAAA,GAGVW,EAAA,SAAA,KACLb,EAAkB,CAAAA,CAAA,EAClBnG,EAAe,CAAA,eAAAmG,CAAA,CAAA,GAGVc,EAAA,SAAA,MACLR,EAAc,CAAAA,CAAA,EACdzG,EAAe,CAAA,WAAAyG,CAAA,CAAA,GAGVS,EAAA,SAAA,MACLV,EAAgB,CAAAA,CAAA,EAChBxG,EAAe,CAAA,aAAAwG,CAAA,CAAA,GAGVW,EAAA,SAAA,MACLR,EAAmB,CAAAA,CAAA,EACnB3G,EAAe,CAAA,gBAAA2G,CAAA,CAAA,GAGVS,EAAA,SAAA,MACLR,EAAqB,CAAAA,CAAA,EACrB5G,EAAe,CAAA,kBAAA4G,CAAA,CAAA,GAGVS,EAAA,SAAA,MACLR,EAAkB,CAAAA,CAAA,EAClB7G,EAAe,CAAA,eAAA6G,CAAA,CAAA,GAGVS,EAAA,SAAA,CAGD,OAFJhB,EAAgB,CAAAA,CAAA,EAEZA,EAAA,CACG,MAAAiB,GAAA,MAAiBC,KAAkB,MAAO7U,KAC/CiF,GAAM,MAAMjF,GAAM,OAAO,EAClB,OAGJ4U,UACGE,GAAe,aAAa,OAAS,SAAUF,EAAA,CAAA,EACrD3P,GAAM,QAAQC,EAAM,EAAE,uCAAuC,CAAA,OAE7DyO,EAAe,EAAA,EAIjBtG,EAAe,CAAA,aAAAsG,CAAA,CAAA,GAGVoB,EAAA,SAAA,KACLzB,EAAqB,CAAAA,CAAA,EACrBjG,EAAA,CACC,MAAA,IACIe,EAAU,MACb,KAAMkF,MAKH0B,EAAA,SAAA,OACCC,GAAmB,MAAA,UAAU,UACjC,SACA,EAAA,KAAA,IACO,SAEP,EAAA,MAAA,IACO,IAGT,QAAQ,IAAIA,EAAU,EAElBA,KAAe,eAClB1B,EAAoB,CAAAA,CAAA,EACpBlG,EAAe,CAAA,iBAAAkG,CAAA,CAAA,GAEftO,GAAM,MACLC,EAAM,EACL,sGAAA,CAAA,GAMEgQ,EAAA,SAAA,MACLnB,EAAgBA,IAAkB,MAAQ,MAAQ,KAAA,EAClD1G,EAAe,CAAA,cAAA0G,CAAA,CAAA,GAGVoB,EAAA,SAAA,CACL9H,EAAA,CACC,QAASuG,CAAc,CAAA,CAAA,GAIzB3K,GAAA,SAAA,eACCqK,IAAoB7H,GAAA2C,GAAA,YAAAA,EAAW,QAAX,YAAA3C,GAAkB,OAAQ,EAAA,EAE9CtG,EAAA,EAAAoO,EAAmBnF,EAAU,kBAAoB,EAAA,EACjDjJ,EAAA,GAAA0O,EAAezF,EAAU,cAAgB,EAAA,EAEzCjJ,EAAA,GAAA6O,EAAkB5F,EAAU,iBAAmB,EAAA,EAC/CjJ,EAAA,GAAA8O,EAAoB7F,EAAU,mBAAqB,EAAA,EAEnDjJ,EAAA,GAAA2O,EAAa1F,EAAU,YAAc,EAAA,EACrCjJ,EAAA,EAAAqO,EAAiBpF,EAAU,gBAAkB,EAAA,EAC7CjJ,EAAA,EAAAsO,EAAmBrF,EAAU,kBAAoB,EAAA,EACjDjJ,EAAA,EAAAuO,EAAuBtF,EAAU,sBAAwB,EAAA,EACzDjJ,EAAA,GAAA4O,EAAgB3F,EAAU,eAAiB,KAAA,EAC3CjJ,EAAA,EAAAwO,EAAevF,EAAU,cAAgB,EAAA,EAEzCjJ,EAAA,GAAA+O,EAAiB9F,EAAU,gBAAkB,EAAA,EAE7CjJ,EAAA,GAAAyO,IAAiBvF,GAAAD,GAAA,YAAAA,EAAW,SAAX,YAAAC,GAAmB,GAAG,KAAM,EAAA,EACzC+G,GAAA,MAAAA,EAAS,gBACZjQ,EAAA,GAAAyO,EAAiBwB,EAAQ,eAAe,MAAM,GAAG,EAAE,CAAC,CAAA,EAGrDjQ,EAAA,EAAAgO,EAAqB/E,EAAU,oBAAsB,IAAA,gDAY1CiF,EAAiBlK,0BAChBiK,EAAU,KAAA,2BAKjB,IAAA9J,OAAa,WACjBA,GAAO,OAAU1H,IAAK,CACjB,IAAA2H,GAAsB,GAAA3H,GAAM,OAAO,MAAM,GAE7CuD,EAAA,EAAAgO,EAAqB5J,EAAgB,EACrC8D,GAAe,mBAAA8F,CAAkB,CAAA,GAIjCC,GACAA,EAAW,OAAS,GAAC,CACpB,YAAa,aAAc,aAAc,WAAW,EAAE,SAASA,EAAW,CAAC,EAAE,IAAM,EAEpF9J,GAAO,cAAc8J,EAAW,CAAC,CAAA,GAEjC,QAAQ,IAAG,0BAA2BA,EAAW,CAAC,EAAE,IAAM,IAAA,EAC1DjO,EAAA,EAAAiO,EAAa,IAAI,kBAgBJQ,EAAcjF,GAAA,IAAA,wBAsBxB2F,aAuBCC,aAqBDF,aAwCAF,aAsBAC,aAsBIjB,IAAuB,MAC1BhO,EAAA,EAAAgO,EAAqB,IAAI,EACzB9F,GAAe,mBAAA8F,CAAkB,CAAA,GAEjCE,EAAkB,MAAK,WAuBxB0B,aAsBAC,aAoBAL,YAoBAD,aAsBAD,aAoBAD,aApULW,IACAhI,EAAS,MAAM,qaC1EmC1K,EAAK,CAAA,EAAC,EAAE,uBAAuB,EAAA,eAO1DA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,SACdA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,8tBAJ1BA,EAAS,CAAA,IAAA,QAAAuJ,GAAA,IAAAvJ,EAAA,EAAA,EAAA,KAAA6M,CAAA,CAAA,sGALxB5M,EAYMlC,EAAAsC,EAAAF,CAAA,EAXLC,EAAsFC,EAAAC,CAAA,gBACtFF,EASMC,EAAAE,CAAA,EARLH,EAOSG,EAAAsM,CAAA,EAFRzM,EAA8CyM,EAAAnD,CAAA,SAC9CtJ,EAAiDyM,EAAAlD,CAAA,cAJrC3J,EAAS,CAAA,EAAA,EAAA,wDAJwBA,EAAK,CAAA,EAAC,EAAE,uBAAuB,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,gBAO1DrB,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,gBACd/B,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAAG,EAAAC,CAAA,aAJ1BvB,EAAS,CAAA,CAAA,kDAyBUA,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,+BAAtBH,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,CAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,+BAArBH,EAAK,CAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAwBZ3I,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CC,EAAsDlC,EAAA6J,EAAAzH,CAAA,+BAAtBH,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,yCAFb3I,EAAK,CAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CC,EAAqDlC,EAAA6J,EAAAzH,CAAA,+BAArBH,EAAK,CAAA,EAAC,EAAE,IAAI,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,2CA0CJ3I,EAAK,CAAA,EAAC,EAAE,WAAW,EAAA,0BAWnDA,EAAM,CAAA,CAAA,uBAAX,OAAIoJ,GAAA,izBAZVnJ,EAkBMlC,EAAA2C,EAAAP,CAAA,EAjBLC,EAAqEM,EAAAJ,CAAA,gBACrEF,EAeMM,EAAAL,CAAA,EAdLD,EAaMC,EAAAE,CAAA,EAZLH,EAKEG,EAAA4I,CAAA,OAFWnJ,EAAK,CAAA,CAAA,SAIlBI,EAIWG,EAAAqS,CAAA,2GAd6B5S,EAAK,CAAA,EAAC,EAAE,WAAW,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,mBAM9CrB,EAAK,CAAA,QAALA,EAAK,CAAA,CAAA,aAKVA,EAAM,CAAA,CAAA,oBAAX,OAAIoJ,GAAA,EAAA,mHAAJ,4EAzCqCpJ,EAAK,CAAA,EAAC,EAAE,WAAW,EAAA,iBAOhBA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,eAa3DA,EAAK,CAAA,EAAC,EAAE,wBAAwB,EAAA,mBAZzBqM,EAAAC,GAAAtM,KAAO,OAAMA,EAAA,EAAA,CAAA,CAAA,uBAAlB,OAAIoJ,GAAA,4DAgBapJ,EAAc,CAAA,IAAA,iBAAdA,EAAc,CAAA,o3BAjBN4I,EAAA,SAAAiK,EAAA7S,OAAU,uGAFzBA,EAAK,CAAA,IAAA,QAAAuJ,GAAA,IAAAvJ,EAAA,EAAA,EAAA,KAAA6M,CAAA,CAAA,8JANrB5M,EA4BMlC,EAAA+C,EAAAX,CAAA,EA3BLC,EAAqEU,EAAAR,CAAA,gBACrEF,EAgBMU,EAAAT,CAAA,EAfLD,EAcMC,EAAAE,CAAA,EAbLH,EAYSG,EAAAsM,CAAA,EARRzM,EAAsEyM,EAAAjE,CAAA,+DAF1D5I,EAAK,CAAA,EAAA,EAAA,SAapBI,EAQMU,EAAAL,CAAA,EAPLL,EAEMK,EAAAC,CAAA,gBAENN,EAEMK,EAAAE,CAAA,mFAzBmCX,EAAK,CAAA,EAAC,EAAE,WAAW,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,sBAOhBrB,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,GAAhC,CAAA6C,GAAAC,EAAA,KAAAgO,KAAAA,EAAA7S,OAAU,4BAC9BqM,EAAAC,GAAAtM,KAAO,OAAMA,EAAA,EAAA,CAAA,CAAA,oBAAlB,OAAIoJ,GAAA,EAAA,mHAAJ,mBAHUpJ,EAAK,CAAA,CAAA,sBAejBA,EAAK,CAAA,EAAC,EAAE,wBAAwB,EAAA,KAAAmB,EAAA8B,EAAAC,CAAA,oCAIblD,EAAc,CAAA,yJAkBN2I,EAAA3I,KAAM,KAAI,wHAArB4I,EAAA,QAAAC,EAAA7I,KAAM,2BAArBC,EAA8ClC,EAAA6K,EAAAzI,CAAA,iBAApB0E,EAAA,IAAA8D,KAAAA,EAAA3I,KAAM,KAAI,KAAAmB,EAAA2H,EAAAH,CAAA,EAArB9D,EAAA,IAAAgE,KAAAA,EAAA7I,KAAM,wEA9Bc2I,EAAA3I,MAAO,KAAI,kIAFtC4I,EAAA,QAAAC,EAAA7I,MAAO,8EAEJA,EAAK,CAAA,IAAKA,EAAM,EAAA,EAAC,aAH5BC,EAIClC,EAAA6K,EAAAzI,CAAA,iBADkC0E,EAAA,IAAA8D,KAAAA,EAAA3I,MAAO,KAAI,KAAAmB,EAAA2H,EAAAH,CAAA,EAFtC9D,EAAA,IAAAgE,KAAAA,EAAA7I,MAAO,mDAEJA,EAAK,CAAA,IAAKA,EAAM,EAAA,EAAC,mEA7EOA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,eAoB3DA,EAAK,CAAA,EAAC,EAAE,6CAA6C,EAAA,iBAoBhBA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,aAGdA,EAAK,CAAA,EAAC,EAAE,wBAAwB,EAAA,2BA8E/EA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,WAvHV8S,GAAA9S,KAAQ,MAAM,IAAI,SAAW,OAAKiJ,GAAAjJ,CAAA,qBA4BhC,OAAAA,QAAmB,GAAIgD,+CAsBvB,OAAAhD,QAAyB,GAAIuD,sEAWhC,OAAAvD,MAAQ,MAAM,IAAI,SAAW,GAAE,EA8B1BA,MAAQ,MAAM,IAAI,SAAW,GAAE,+gEAjH3CC,EAgJOlC,GAAA8D,EAAA1B,EAAA,EA9HNC,EAoHMyB,EAAAhB,CAAA,EAnHLT,EAsCMS,EAAAH,CAAA,EArCLN,EAAsEM,EAAAJ,CAAA,wCAkBtEF,EAkBMM,EAAAL,CAAA,EAjBLD,EAEMC,EAAAE,CAAA,gBAENH,EAYSC,EAAA2D,CAAA,sBAIX5D,EAoBMS,EAAAE,CAAA,EAnBLX,EAAsEW,EAAAJ,CAAA,gBAEtEP,EAgBMW,EAAAD,CAAA,EAfLV,EAAuFU,EAAAL,CAAA,gBAEvFL,EAYSU,EAAAmD,CAAA,sBAIX7D,EAAoCS,EAAAyD,CAAA,oCAuDrClE,EAOMyB,EAAA3B,CAAA,EANLE,EAKSF,EAAAgE,CAAA,2HA1HgClE,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,EAEzDrB,MAAQ,MAAM,IAAI,SAAW,6FAkB/BA,GAAK,CAAA,EAAC,EAAE,6CAA6C,EAAA,KAAAmB,EAAAG,EAAAC,CAAA,sGAoBhBvB,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAAK,EAAAC,CAAA,uBAGdzB,GAAK,CAAA,EAAC,EAAE,wBAAwB,EAAA,KAAAmB,EAAA8N,EAAAC,CAAA,+QA8E/ElP,GAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAA4R,EAAAC,CAAA,6LAjNXtI,EAAWC,KAEX3I,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,aAAA2I,CAAA,EAAA9H,EAIPmQ,EAAiB,GACjBC,EAAuB,GACvBC,EAAiB,GAEjBC,EAAY,GAEZC,EAAA,CAAA,EACAC,EAAQ,GAEN,MAAAC,EAAA,SAAA,IACDZ,EAAQ,MAAM,IAAI,SAAW,GAAA,OAC1Ba,EAAgB,sBACrB9Q,EAAA,EAAA2Q,EAAA,MAAe,gBAAgB,UAAA,CAAA,EAG3BA,EAAO,OAAS,GACnB,cAAcG,CAAa,GAE1B,UAEG,MAAAC,EAAA,MAAYC,GAAW,aAAa,KAAK,EAAE,MAAO/M,GAAA,CACvDnE,GAAM,MAAMmE,CAAC,IAGV8M,IACH,QAAQ,IAAIA,CAAG,EACf/Q,EAAA,EAAA2Q,EAASI,EAAI,MAAA,KAKVE,EAAA,SAAA,KACLT,EAAwB,CAAAA,CAAA,EACxBtI,EAAe,CAAA,qBAAAsI,CAAA,CAAA,GAGVU,EAAA,SAAA,KACLX,EAAkB,CAAAA,CAAA,EAClBrI,EAAe,CAAA,eAAAqI,CAAA,CAAA,GAGhBzM,GAAA,SAAA,qBACoBmF,EAAU,iBAC7BjJ,EAAA,EAAAuQ,EAAiBtH,EAAU,gBAAkB,EAAA,EAC7CjJ,EAAA,EAAAwQ,EAAuBvH,EAAU,sBAAwB,EAAA,MAEzDyH,IAAYxH,GAAA5C,EAAA2C,GAAA,YAAAA,EAAW,QAAX,YAAA3C,EAAkB,MAAlB,YAAA4C,EAAuB,SAAU,EAAA,IAEzCiI,GAAAC,EAAAnI,GAAA,YAAAA,EAAW,QAAX,YAAAmI,EAAkB,MAAlB,YAAAD,EAAuB,gBAAiBlB,EAAQ,MAAM,IAAI,MAC7DjQ,EAAA,EAAA4Q,IAAQS,GAAAC,EAAArI,GAAA,YAAAA,EAAW,QAAX,YAAAqI,EAAkB,MAAlB,YAAAD,EAAuB,QAASpB,EAAQ,MAAM,IAAI,OAAS,EAAA,MAEnEW,EAAQX,EAAQ,MAAM,IAAI,OAAS,EAAA,MAGpCQ,IAAiBc,GAAAC,EAAAvI,EAAU,QAAV,YAAAuI,EAAiB,MAAjB,YAAAD,EAAsB,iBAAkB,EAAA,EAEnD,MAAAV,EAAA,iBAgCWH,EAASlH,GAAA,IAAA,sBAkBtB0H,YAsBAD,KAyBuBtV,EAAA8V,GAAMhB,GAAkBgB,EAAE,eAAiB,gBAHrDb,EAAKpH,GAAA,IAAA,qCAmBEiH,EAAc1V,sBAYrB6V,EAAK,KAAA,qDAtHtB1I,EAAY,CACX,MAAK,CACJ,IAAG,CACF,OAAQwI,IAAc,GAAKA,EAAY,QAExC,IAAG,CACF,MAAOE,IAAU,GAAKA,EAAQ,OAC9B,eAAc1H,GAAA5C,EAAA2J,GAAA,YAAAA,EAAS,QAAT,YAAA3J,EAAgB,MAAhB,YAAA4C,EAAqB,QAAS,GAC5C,eAAgB+G,EAAQ,MAAM,IAAI,SAAW,GAAKQ,EAAiB,WAItEzI,EAAS,MAAM,8rBCuJmC1K,EAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,qfAvB3EC,EAwBSlC,EAAAmD,EAAAf,CAAA,EAlBRC,EAgBMc,EAAAZ,CAAA,SACNF,EAAkFc,EAAAX,CAAA,6DAAnCP,EAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,8DAnElEtD,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,+nEAfhCC,EAyDMlC,EAAAsC,EAAAF,CAAA,EAxDLC,EAeMC,EAAAC,CAAA,EAdLF,EAYME,EAAA8T,CAAA,EANLhU,EAAmFgU,EAAAjR,CAAA,EACnF/C,EAIEgU,EAAAhR,CAAA,SAEHhD,EAAuCE,EAAAsH,CAAA,gBAGxCxH,EAsCMC,EAAAE,CAAA,EArCLH,EAmBSG,EAAAyD,CAAA,SACT5D,EAgBSG,EAAA0D,CAAA,2EAxCFjE,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,8aAuJgBtD,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,qfApB1EC,EAqBSlC,EAAAmD,EAAAf,CAAA,EAfRC,EAaMc,EAAAZ,CAAA,SACNF,EAAiFc,EAAAX,CAAA,6DAAlCP,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,8DAhEjEtD,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,+nEAfhCC,EAyDMlC,EAAAsC,EAAAF,CAAA,EAxDLC,EAeMC,EAAAC,CAAA,EAdLF,EAYME,EAAA8T,CAAA,EANLhU,EAAmFgU,EAAAjR,CAAA,EACnF/C,EAIEgU,EAAAhR,CAAA,SAEHhD,EAAuCE,EAAAsH,CAAA,gBAGxCxH,EAsCMC,EAAAE,CAAA,EArCLH,EAmBSG,EAAAyD,CAAA,SACT5D,EAgBSG,EAAA0D,CAAA,2EAxCFjE,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,sgBApIetD,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,idAsBtBA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,0CAOjEA,EAAkB,CAAA,EAAA8H,+CAuFlB9H,EAAiB,CAAA,EAAA4B,woDAnJzB3B,EAwOMlC,EAAAgD,EAAAZ,CAAA,EAvOLC,EAsOMW,EAAAD,CAAA,EArOLV,EAqDMU,EAAAH,CAAA,EApDLP,EAOEO,EAAAwI,CAAA,kBACF/I,EAqBSO,EAAAqD,CAAA,EAfR5D,EAaM4D,EAAA1D,CAAA,SACNF,EAA6E4D,EAAAzD,CAAA,gBAE9EH,EAqBSO,EAAAsD,CAAA,EAfR7D,EAaM6D,EAAA5D,CAAA,SACND,EAA6E6D,EAAAvD,CAAA,gBAI/EN,EAAoCU,EAAAwD,CAAA,SAEpClE,EA2KMU,EAAAL,CAAA,gIAvM2CT,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,eAsBtB/B,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAA2D,EAAAC,CAAA,mPAtJhE,OAAAsP,CAAW,EAAAC,GAiBbtS,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,aAAA2I,CAAA,EAAA9H,EAGPyR,EAEAC,EAAqB,GACrBC,EAAoB,GAEpBC,QAwBEC,EAAqB,MAAAC,GAAA,WACfC,KAAQD,EAClB,QAAQ,IAAIC,CAAI,EAEZA,EAAK,WACFC,GAAc,aAAa,MAAOD,EAAK,IAAI,QAE3CC,GAAc,aAAa,MAAOD,CAAI,EAI9CE,GAAgB,IAAI,CAAC,EACf,MAAAC,GAAM,IAAU,MAAAC,GAAY,aAAa,MAAOC,CAAgB,CAAA,EACtEC,GAAwB,IAAI,EAAI,GAG3BC,EAAA,SAAA,CACD,IAAAC,EAAA,IAAW,MAAM,KAAK,UAAA,MAAgBC,GAAY,aAAa,KAAK,KACvE,KAAM,kBAAA,CAAA,EAEPjB,EAAOgB,iBAAqB,KAAK,IAAA,CAAA,OAAA,GAG5BE,EAAA,SAAA,CACC,MAAAC,GAAK,GAAG,QACRC,GAAgB,aAAa,KAAK,EAAE,MAAOlY,GAAA,CAChDiF,GAAM,MAAMjF,CAAK,IAGlBwX,GAAgB,IAAI,CAAC,EACf,MAAAC,GAAM,IAAU,MAAAC,GAAY,aAAa,MAAOC,CAAgB,CAAA,EACtEC,GAAwB,IAAI,EAAI,GAG3BO,EAAA,SAAA,CACC,MAAAF,GAAK,GAAG,QACRG,GAAe,aAAa,KAAK,EAAE,MAAOpY,GAAA,CAC/CiF,GAAM,MAAMjF,CAAK,IAGlBwX,GAAgB,IAAI,CAAC,EACf,MAAAC,GAAM,IAAU,MAAAC,GAAY,aAAa,MAAOC,CAAgB,CAAA,EACtEC,GAAwB,IAAI,EAAI,6CASnBT,EAAsBhO,wBACrB6N,EAAW,KAAA,0BAQtBG,EAAuB,MAAK,UAsB5BU,YA+CGG,IACA7S,EAAA,EAAA8R,EAAqB,EAAK,UAmB1B9R,EAAA,EAAA8R,EAAqB,EAAK,UAoB5B9R,EAAA,EAAA8R,EAAqB,EAAI,UA+CvBkB,IACAhT,EAAA,EAAA+R,EAAoB,EAAK,UAmBzB/R,EAAA,EAAA+R,EAAoB,EAAK,UAoB3B/R,EAAA,EAAA+R,EAAoB,EAAI,mGAtRtBF,EAAA,CACN,QAAQ,IAAIA,CAAW,MAEnB1N,EAAa,IAAA,WACjBA,EAAO,OAAU1H,GAAA,CACZ6V,IAAAA,EAAQ,KAAK,MAAM7V,EAAM,OAAO,MAAM,EAEtC,GADJ,QAAQ,IAAI6V,CAAK,EACbY,GAAgBZ,CAAK,GAAK,aAE5BA,EAAQa,GAAmBb,CAAK,CACxB,OAAAzX,EAAA,CACR,QAAQ,IAAI,0BAA2BA,CAAK,EAG9CoX,EAAYK,CAAK,GAGdT,EAAY,OAAS,GACxB1N,EAAO,WAAW0N,EAAY,CAAC,CAAA,+sBC7CqDvU,EAAS,CAAA,CAAA,UAAhGC,EAMMlC,EAAA4E,EAAAxC,CAAA,EALLC,EAIEuC,EAAAC,CAAA,6BALoF5C,EAAS,CAAA,CAAA,mDAHpF,UAAA6C,EAAY,SAAA,EAAAC;;;;;;;;;sgBC4FhB7C,EAwBMlC,EAAAgL,EAAA5I,CAAA,6CA7ETH,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,wUAsCfA,EAAK,CAAA,EAAC,EAAE,gEAAgE,EAAA,aAY1EA,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,eAETA,EAAO,CAAA,GAAA4B,GAAA,+KAfsB,IAChC,ujBADgC,IAChC,gjBAJW5B,EAAK,CAAA,EAAC,EAAE,uDAAuD,CAAA,iMAUqDA,EAAO,CAAA,EACrI,sBACA,GAAE,kCAEKA,EAAO,CAAA,gRAnDvBC,EAuFMlC,EAAAgD,EAAAZ,CAAA,EAtFLC,EAqBMW,EAAAR,CAAA,EApBLH,EAEMG,EAAAD,CAAA,gBACNF,EAgBSG,EAAAyD,CAAA,SAGV5D,EA8DMW,EAAAD,CAAA,EA7DLV,EA4DMU,EAAAL,CAAA,EA3DLL,EA0DOK,EAAAoB,CAAA,EApDNzB,EAWMyB,EAAAnB,CAAA,EAVLN,EAKEM,EAAAqJ,CAAA,OAJW/J,EAAO,CAAA,CAAA,SAMpBI,EAEMM,EAAAL,CAAA,uBAGPD,EAsCMyB,EAAAlB,CAAA,EArCLP,EAoCSO,EAAAsD,CAAA,4HA/EVjE,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,cAkCLrB,EAAK,CAAA,EAAC,EAAE,uDAAuD,mCAHhEA,EAAO,CAAA,CAAA,cAOhBA,EAAK,CAAA,EAAC,EAAE,gEAAgE,EAAA,KAAAmB,EAAA2D,EAAAC,CAAA,cAY1E/E,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAA6D,EAAAC,CAAA,EAETjF,EAAO,CAAA,2LARqHA,EAAO,CAAA,EACrI,sBACA,sCAEOA,EAAO,CAAA,mgBAjFjB,MAAA0K,EAAWC,SAEN,KAAAzI,CAAI,EAAAY,QACTd,EAAOC,GAAW,MAAM,sBAE1B,IAAA6T,EAAU,GACVC,EAAU,SAER9P,EAAa,SAAA,CAClBvD,EAAA,EAAAoT,EAAU,EAAI,QAERrC,EAAG,MAASuC,GAAa,aAAa,MAAOD,CAAO,EAAE,MAAOxY,IAClEiF,GAAM,MAAMjF,CAAK,EAEV,OAGJkW,IACH,QAAQ,IAAIA,CAAG,EACfjR,GAAM,QAAQC,EAAM,EAAE,2BAA2B,CAAA,EACjDC,EAAA,EAAAqT,EAAU,EAAE,EACZrT,EAAA,EAAAR,EAAO,EAAK,EACZwI,EAAS,MAAM,GAGhBhI,EAAA,EAAAoT,EAAU,EAAK,UAaZpT,EAAA,EAAAR,EAAO,EAAK,gBA0BE6T,EAAO,KAAA,0BALpB9P;;;;;;;;;sgBCqCEhG,EAwBMlC,EAAAgL,EAAA5I,CAAA,6CA7ETH,EAAK,CAAA,EAAC,EAAE,aAAa,EAAA,wUAsChBA,EAAK,CAAA,EAAC,EAAE,gEAAgE,EAAA,aAY1EA,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,eAEZA,EAAO,CAAA,GAAA4B,GAAA,+KAfsB,IAChC,ujBADgC,IAChC,gjBAJW5B,EAAK,CAAA,EAAC,EAAE,uDAAuD,CAAA,iMAUqDA,EAAO,CAAA,EACrI,sBACA,GAAE,kCAEKA,EAAO,CAAA,gRAnDvBC,EAuFMlC,EAAAgD,EAAAZ,CAAA,EAtFLC,EAqBMW,EAAAR,CAAA,EApBLH,EAEMG,EAAAD,CAAA,gBACNF,EAgBSG,EAAAyD,CAAA,SAGV5D,EA8DMW,EAAAD,CAAA,EA7DLV,EA4DMU,EAAAL,CAAA,EA3DLL,EA0DOK,EAAAoB,CAAA,EApDNzB,EAWMyB,EAAAnB,CAAA,EAVLN,EAKEM,EAAAqJ,CAAA,OAJW/J,EAAO,CAAA,CAAA,SAMpBI,EAEMM,EAAAL,CAAA,uBAGPD,EAsCMyB,EAAAlB,CAAA,EArCLP,EAoCSO,EAAAsD,CAAA,4HA/EVjE,EAAK,CAAA,EAAC,EAAE,aAAa,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,cAkCNrB,EAAK,CAAA,EAAC,EAAE,uDAAuD,mCAHhEA,EAAO,CAAA,CAAA,cAOhBA,EAAK,CAAA,EAAC,EAAE,gEAAgE,EAAA,KAAAmB,EAAA2D,EAAAC,CAAA,cAY1E/E,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAA6D,EAAAC,CAAA,EAEZjF,EAAO,CAAA,2LARqHA,EAAO,CAAA,EACrI,sBACA,sCAEOA,EAAO,CAAA,ogBA1FjB,MAAA0K,EAAWC,SAEN,KAAAzI,CAAI,EAAAY,GACJ,OAAAmT,EAAM,EAAA,EAAAnT,QAEXd,EAAOC,GAAW,MAAM,sBAE1B,IAAA6T,EAAU,GACVC,EAAU,SAMRG,EAAU,IAAA,KACfH,EAAUE,EAAO,OAAO,GAGnBhQ,EAAa,SAAA,CAClBvD,EAAA,EAAAoT,EAAU,EAAI,EAER,MAAArC,EAAY,MAAA0C,GAAiB,aAAa,MAAOF,EAAO,GAAIF,CAAO,EAAE,MAAOxY,IACjFiF,GAAM,MAAMjF,CAAK,EAEV,OAGJkW,IACH,QAAQ,IAAIA,CAAG,EACfjR,GAAM,QAAQC,EAAM,EAAE,6BAA6B,CAAA,EACnDiI,EAAS,MAAM,EACfhI,EAAA,EAAAR,EAAO,EAAK,GAGbQ,EAAA,EAAAoT,EAAU,EAAK,UAaZpT,EAAA,EAAAR,EAAO,EAAK,gBA0BE6T,EAAO,KAAA,0BALpB9P,yIA1DE/D,GACNgU,iMCgJMlW,EAAK,CAAA,EAAC,EAAE,iDAAiD,EAAA,wSAF5DC,EAIMlC,EAAAwC,EAAAJ,CAAA,EAHLC,EAEMG,EAAAD,CAAA,8BADJN,EAAK,CAAA,EAAC,EAAE,iDAAiD,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,6DA9FnB3I,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,WAEhDA,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,oBAMnBA,EAAQ,CAAA,CAAA,uBAAb,OAAIoJ,GAAA,muCAfVnJ,EAiGMlC,EAAAwC,EAAAJ,CAAA,EAhGLC,EA+FMG,EAAAD,CAAA,EA9FLF,EA6FQE,EAAA8V,CAAA,EA5FPhW,EAUQgW,EAAAC,CAAA,EAPPjW,EAMKiW,EAAAC,CAAA,EALJlW,EAA0DkW,EAAAC,CAAA,gBAC1DnW,EAEKkW,EAAAE,CAAA,gBACLpW,EAA+CkW,EAAAG,CAAA,SAGjDrW,EAgFQgW,EAAAM,CAAA,sFAvF8B1W,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,qBAEhDrB,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,aAMnB/B,EAAQ,CAAA,CAAA,oBAAb,OAAIoJ,GAAA,EAAA,8GAAJ,OAAIA,EAAAuN,EAAA,OAAAvN,GAAA,0CAAJ,OAAIA,GAAA,q0BAiBDnJ,EAqBSlC,EAAAmD,EAAAf,CAAA,++BAITF,EA+BSlC,EAAAmD,EAAAf,CAAA,2FArETkB,EAAArB,MAAO,QAAO,WAKd+B,EAAA6U,GAAM5W,EAAO,EAAA,EAAA,WAAa,GAAI,EAAE,OAChCA,EAAM,CAAA,EAAA,EAAE,0BAA0B,CAAA,EAAA,4hCATtCC,EA4EKlC,EAAAuY,EAAAnW,CAAA,EA3EJC,EAIKkW,EAAAO,CAAA,EAHJzW,EAEMyW,EAAAvW,CAAA,gBAEPF,EAMKkW,EAAAQ,CAAA,EALJ1W,EAIM0W,EAAAvW,CAAA,gBAEPH,EA8DKkW,EAAAS,CAAA,EA7DJ3W,EA4DM2W,EAAA1W,CAAA,wDAvEJ,CAAAuE,GAAAC,EAAA,IAAAxD,KAAAA,EAAArB,MAAO,QAAO,KAAAmB,EAAAC,EAAAC,CAAA,GAKd,CAAAuD,GAAAC,EAAA,KAAA9C,KAAAA,EAAA6U,GAAM5W,EAAO,EAAA,EAAA,WAAa,GAAI,EAAE,OAChCA,EAAM,CAAA,EAAA,EAAE,0BAA0B,CAAA,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,4RAlDE/B,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,oUAwIzDA,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,WAcpBA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,uDA9HtBA,EAAQ,CAAA,EAAC,OAAS,EAAC,q/CA1B3BC,EA4JMlC,EAAA0C,EAAAN,CAAA,EA3JLC,EAmBMK,EAAAF,CAAA,EAlBLH,EAAuEG,EAAAD,CAAA,gBACvEF,EAgBSG,EAAAyD,CAAA,SAGV5D,EAqIMK,EAAAE,CAAA,EApILP,EA6GMO,EAAAN,CAAA,wBACND,EAqBMO,EAAAD,CAAA,EApBLN,EAKCM,EAAAuD,CAAA,gBACD7D,EAaCM,EAAAwD,CAAA,+GAvJ6ClE,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,4JAwIzDrB,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAmB,EAAA8B,EAAAC,CAAA,qBAcpBlD,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAAK,EAAAC,CAAA,+SAQnBzB,EAAkB,CAAA,IAAA,gBAAlBA,EAAkB,CAAA,4GAQrBA,EAAc,CAAA,CAAA,SADXA,EAAmB,CAAA,IAAA,gBAAnBA,EAAmB,CAAA,2aAPnBA,EAAkB,CAAA,qDAQrBA,EAAc,CAAA,yBADXA,EAAmB,CAAA,qPArMb2K,GAAA,EASX,MAAA3I,EAAOC,GAAW,MAAM,0BAEnB,KAAAC,EAAO,EAAA,EAAAY,EAEdkU,EAAA,CAAA,EACAlB,EAAU,GAEVmB,EAAqB,GACrBC,EAAsB,GAEtBC,EAAiB,kBAiBjBzU,EAAA,EAAAR,EAAO,EAAK,SAwDDQ,EAAA,EAAAyU,EAAiBlB,CAAM,EACvBvT,EAAA,EAAAwU,EAAsB,EAAI,eAwBR,MAAAE,GACjB,aAAa,MACbnB,EAAO,EAAE,EACR,MAAO1Y,IACRiF,GAAM,MAAMjF,CAAK,EACV,SAIPiF,GAAM,QAAQC,EAAM,EAAE,6BAA6B,CAAA,EACnDC,EAAA,EAAAsU,EAAiB,MAAAK,GAAY,aAAa,KAAK,CAAA,WAwC1D3U,EAAA,EAAAuU,EAAqB,EAAI,eAMhB,MAASK,GAAuB,aAAa,KAAK,EAAE,MAAO/Z,IACnEiF,GAAM,MAAMjF,CAAK,EACV,SAIPiF,GAAM,QAAQC,EAAM,EAAE,6BAA6B,CAAA,MACnDuU,EAAQ,CAAA,CAAA,2CAUHC,EAAkBxZ,2BAE5BiF,EAAA,EAAAsU,EAAiB,MAAAK,GAAY,aAAa,KAAK,CAAA,iBAKrCH,EAAmBzZ,2BAG7BiF,EAAA,EAAAsU,EAAiB,MAAAK,GAAY,aAAa,KAAK,CAAA,kFAnLzCnV,GAAQ8U,EAAS,SAAW,GAAKlB,kBAEtCkB,EAAiB,MAAAK,GAAY,aAAa,KAAK,CAAA,MAC/CvB,EAAU,EAAA,6ICaN9V,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,aAEsBA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,0DAAxB,GAAC,aAAyB,GAAC,8GAA3B,GAAC,iBAAyB,GAAC,0HAHjEC,EAIMlC,EAAAgL,EAAA5I,CAAA,gBADLC,EAAuE2I,EAAAnB,CAAA,2CAFtE5H,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,cAEsBrB,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAAG,EAAAC,CAAA,qEAiB9DvB,EAAK,CAAA,EAAC,EACN,qJAAqJ,EAAA,aAsBrJA,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,aAUjBA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,0CArEMA,EAAe,CAAA,IAAA,gBAAfA,EAAe,CAAA,4EAYzBA,EAAK,CAAA,EAAC,EACd,wGAAwG,kFAY5FA,EAAY,CAAA,IAAA,iBAAZA,EAAY,CAAA,soDAvB9BC,EAsEOlC,EAAA8D,EAAA1B,CAAA,EAhENC,EAsDMyB,EAAAf,CAAA,EArDLV,EAuBMU,EAAAT,CAAA,EAtBLD,EAqBMC,EAAAE,CAAA,sBARLH,EAOMG,EAAAD,CAAA,sBAIRF,EAeMU,EAAAH,CAAA,EAdLP,EAIMO,EAAAD,CAAA,gBAYPN,EAUMU,EAAAL,CAAA,EATLL,EAQSK,EAAAuD,CAAA,gBAIX5D,EAOMyB,EAAAd,CAAA,EANLX,EAKSW,EAAAkD,CAAA,iHAtEajE,EAAe,CAAA,qDAYzBA,EAAK,CAAA,EAAC,EACd,wGAAwG,mFAY5FA,EAAY,CAAA,4CAWzBA,EAAK,CAAA,EAAC,EACN,qJAAqJ,EAAA,KAAAmB,EAAAG,EAAAC,CAAA,oBAsBrJvB,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAA2D,EAAAC,CAAA,oBAUjB/E,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAA6D,EAAAC,CAAA,kQArFXyF,EAAWC,KAEX3I,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,aAAA2I,CAAA,EAAA9H,EAEPyU,EAAkB,GAGlBC,EAAe,GAEnBhR,GAAA,SAAA,CACC9D,EAAA,EAAA8U,GAAe7L,GAAA,YAAAA,EAAW,SAAU,EAAA,kBAId4L,EAAe9Z,uBAyBrB+Z,EAAY/Z,2BAEvBmN,EAAY,CAAG,OAAQ4M,CAAY,CAAA,UA6BrC9U,EAAA,EAAA6U,EAAkB,EAAI,UAnDzB7M,EAAS,MAAM,wzBC4OgB1K,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,oXAvBsC4D,EAAA1C,EAAA,QAAAuW,EAAA,qFAAAzX,OACzF,QACG,+BACA,4CAA2C,UAJ/CC,EAyBSlC,EAAAmD,EAAAf,CAAA,EAfRC,EAaMc,EAAAZ,CAAA,SACNF,EAA2Dc,EAAAX,CAAA,4DAAhCP,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,EAvBsCuB,EAAA,GAAA4S,KAAAA,EAAA,qFAAAzX,OACzF,QACG,+BACA,uyDAhLyCA,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,ovCAgDpCA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,4jBA0BjBA,EAAK,CAAA,EAAC,EAAE,WAAW,EAAA,qBAenBA,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,mfA2BzBA,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,geA0BfA,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,mXA0BfA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,2aAuDjBA,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,kDApDtCA,EAAK,CAAA,EAAC,OAAS,SAAO4M,GAAA5M,CAAA,2DAwDtB,OAAAA,QAAgB,UAAS,EAQpBA,QAAgB,YAAW,EAO3BA,QAAgB,kBAAiB,EAOjCA,QAAgB,QAAO,EAOvBA,QAAgB,QAAO,EAEvBA,QAAgB,UAAS,EAMzBA,QAAgB,QAAO,64FA9OyD4D,EAAAK,EAAA,QAAAyT,EAAA,qFAAA1X,OACzF,UACG,+BACA,4CAA2C,6DAuB2C4D,EAAAM,EAAA,QAAAyT,EAAA,qFAAA3X,OACzF,YACG,+BACA,4CAA2C,6DAuB2C4D,EAAAO,EAAA,QAAAyT,EAAA,qFAAA5X,OACzF,kBACG,+BACA,4CAA2C,+DAY2C4D,EAAAa,EAAA,QAAAoT,GAAA,qFAAA7X,OACzF,QACG,+BACA,4CAA2C,8DAwB2C4D,EAAAe,GAAA,QAAAmT,GAAA,qFAAA9X,OACzF,QACG,+BACA,4CAA2C,+DAuB2C4D,EAAA6J,GAAA,QAAAsK,GAAA,qFAAA/X,OACzF,UACG,+BACA,4CAA2C,+DAoD2C4D,EAAAiK,GAAA,QAAAmK,GAAA,qFAAAhY,OACzF,QACG,+BACA,4CAA2C,wYA9MlDC,EA+QMlC,GAAAkP,EAAA9M,EAAA,EA9QLC,EAmBM6M,EAAA1M,CAAA,EAlBLH,EAAyEG,EAAAD,CAAA,gBACzEF,EAgBSG,EAAAyD,CAAA,SAGV5D,EAwPM6M,EAAApJ,CAAA,EAvPLzD,EA4MMyD,EAAAC,CAAA,EAxML1D,EAwBS0D,EAAAG,CAAA,EAfR7D,EAaM6D,EAAA5D,CAAA,SACND,EAAoD6D,EAAAvD,CAAA,gBAGrDN,EAwBS0D,EAAAI,CAAA,EAfR9D,EAaM8D,EAAAvD,CAAA,SACNP,EAAsD8D,EAAAzD,CAAA,gBAGvDL,EAaS0D,EAAAK,CAAA,EAJR/D,EAEM+D,EAAArD,CAAA,sBACNV,EAA4D+D,EAAApD,CAAA,gBAG7DX,EAyBS0D,EAAAW,CAAA,EAhBRrE,EAcMqE,EAAA5D,EAAA,UACNT,EAAkDqE,EAAAvE,EAAA,mBAGnDE,EAwBS0D,EAAAa,EAAA,EAfRvE,EAaMuE,GAAA1D,EAAA,WACNb,EAAkDuE,GAAAP,CAAA,kBAGnDhE,EAwBS0D,EAAA2J,EAAA,EAfRrN,EAaMqN,GAAA1J,EAAA,WACN3D,EAAoDqN,GAAApJ,EAAA,4CAgCrDjE,EAwBS0D,EAAA+J,EAAA,EAfRzN,EAaMyN,GAAArJ,EAAA,WACNpE,EAAkDyN,GAAAtJ,EAAA,mBAGpDnE,EAyCMyD,EAAAa,EAAA,sOA3QyC1E,GAAK,CAAA,EAAC,EAAE,UAAU,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,sBAgDpCrB,GAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAA8B,EAAAC,CAAA,GAtB6C,CAAA0B,IAAAC,GAAA,GAAA6S,KAAAA,EAAA,qFAAA1X,QACzF,UACG,+BACA,mFA6CwBA,GAAK,CAAA,EAAC,EAAE,WAAW,EAAA,KAAAmB,EAAA6D,EAAAC,CAAA,GAtB2C,CAAAL,IAAAC,GAAA,GAAA8S,KAAAA,EAAA,qFAAA3X,QACzF,YACG,+BACA,mFAkCwBA,GAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAmB,EAAA8W,EAAAC,CAAA,GAXqC,CAAAtT,IAAAC,GAAA,GAAA+S,KAAAA,EAAA,qFAAA5X,QACzF,kBACG,+BACA,qFAmCwBA,GAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAA4R,GAAAC,EAAA,GAvB+C,CAAApO,IAAAC,GAAA,GAAAgT,MAAAA,GAAA,qFAAA7X,QACzF,QACG,+BACA,sFA8CwBA,GAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAAiE,GAAAC,EAAA,GAtB+C,CAAAT,IAAAC,GAAA,GAAAiT,MAAAA,GAAA,qFAAA9X,QACzF,QACG,+BACA,uFA6CwBA,GAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAAgX,GAAAC,EAAA,GAtB6C,CAAAxT,IAAAC,GAAA,GAAAkT,MAAAA,GAAA,qFAAA/X,QACzF,UACG,+BACA,iEAsBCA,GAAK,CAAA,EAAC,OAAS,iGAoDQA,GAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAAkX,GAAAC,EAAA,GAtB+C,CAAA1T,IAAAC,GAAA,GAAAmT,MAAAA,GAAA,qFAAAhY,QACzF,QACG,+BACA,+5BAhQD,MAAAgC,EAAOC,GAAW,MAAM,0BAEnB,KAAAC,EAAO,EAAA,EAAAY,QAEZ8H,EAAsB,MAAA2N,GAAA,CAC3B,QAAQ,IAAIA,CAAO,EACb,MAAAC,GAAS,QAAS7M,EAAc,GAAA4M,CAAA,CAAA,EAChC,MAAAE,GAAO,IAAU,MAAA5N,EAAA,CAAA,QACjB6N,GAAmB,aAAa,OAAS,GAAI/M,CAAA,CAAA,GAG9Cd,EAAA,SACQ,MAAA8N,GAAW,aAAa,KAAK,MAGvCC,EAAc,gBAGZC,EAAiB1Z,GAAA,OAChB2Z,EAAwB,SAAS,eAAe,yBAAyB,EAC3EA,IACH3Z,EAAM,eAAA,EACN2Z,EAAsB,YAAc3Z,EAAM,SAItC4Z,EAAA,SAAA,CACC,MAAAC,GAAA,QACAF,EAAwB,SAAS,eAAe,yBAAyB,EAC3EA,GACHA,EAAsB,iBAAiB,QAASD,CAAa,GAIzDI,EAAA,SAAA,CACC,MAAAD,GAAA,QACAF,EAAwB,SAAS,eAAe,yBAAyB,EAC3EA,GACHA,EAAsB,oBAAoB,QAASD,CAAa,UAkB9DnW,EAAA,EAAAR,EAAO,EAAK,UA2BXQ,EAAA,EAAAkW,EAAc,SAAS,UA0BvBlW,EAAA,EAAAkW,EAAc,WAAW,UA0BzBlW,EAAA,EAAAkW,EAAc,iBAAiB,UAe/BlW,EAAA,EAAAkW,EAAc,OAAO,UA2BrBlW,EAAA,EAAAkW,EAAc,OAAO,UA0BrBlW,EAAA,EAAAkW,EAAc,SAAS,eA2BhB,MAAApD,GAAK,iBAAiB,EAC5B9S,EAAA,EAAAR,EAAO,EAAK,UA2BbQ,EAAA,EAAAkW,EAAc,OAAO,UA0BpBpW,GAAM,QAAQC,EAAM,EAAE,8BAA8B,CAAA,UAOpDD,GAAM,QAAQC,EAAM,EAAE,8BAA8B,CAAA,UAOpDD,GAAM,QAAQC,EAAM,EAAE,8BAA8B,CAAA,UAOpDD,GAAM,QAAQC,EAAM,EAAE,8BAA8B,CAAA,UAQpDD,GAAM,QAAQC,EAAM,EAAE,8BAA8B,CAAA,0GA/QnDP,EACN6W,IAEAE,qNCwJKjZ,EAAK,CAAA,EAAC,EAAE,qCAAqC,EAAA,6KAD/CC,EAEMlC,EAAAgL,EAAA5I,CAAA,6BADJH,EAAK,CAAA,EAAC,EAAE,qCAAqC,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,+DAlGL3I,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,WAEhDA,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,uDAMhBqM,EAAAC,GAAAtM,KAAM,OAAMA,EAAA,EAAA,CAAA,CAAA,uBAAjB,OAAIoJ,GAAA,0tDAhBXnJ,EAuGMlC,EAAA2C,EAAAP,CAAA,EAtGLC,EA4FMM,EAAAH,CAAA,EA3FLH,EA0FMG,EAAAD,CAAA,EAzFLF,EAwFQE,EAAA8V,CAAA,EAvFPhW,EAUQgW,EAAAC,CAAA,EAPPjW,EAMKiW,EAAAC,CAAA,EALJlW,EAA0DkW,EAAAC,CAAA,gBAC1DnW,EAEKkW,EAAAE,CAAA,gBACLpW,EAA+CkW,EAAAG,CAAA,SAGjDrW,EA2EQgW,EAAAM,CAAA,0DAKXtW,EAOMM,EAAAL,CAAA,EANLD,EAKCC,EAAAa,CAAA,mEA7FuClB,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,oBAEhDrB,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,SAMhBsK,EAAAC,GAAAtM,KAAM,OAAMA,EAAA,EAAA,CAAA,CAAA,oBAAjB,OAAIoJ,GAAA,EAAA,8GAAJ,OAAIA,EAAAuN,EAAA,OAAAvN,GAAA,0CAAJ,OAAIA,GAAA,yxBAwBDnJ,EAoBSlC,EAAAmD,EAAAf,CAAA,++BAITF,EAoBSlC,EAAAmD,EAAAf,CAAA,6FA1DRkB,EAAArB,MAAK,MAAK,aAOX+B,EAAA6U,GAAM5W,EAAK,EAAA,EAAA,WAAa,GAAI,EAAE,OAAOA,EAAM,CAAA,EAAA,EAAE,qBAAqB,CAAA,EAAA,g4BATvD4D,EAAAsV,EAAA,OAAAC,EAAA,MAAAnZ,MAAK,EAAE,6MAJE4D,EAAA0S,EAAA,QAAA8C,EAAA,mBAAApZ,QAAQA,EAAK,CAAA,EAAC,OAAS,GAC7C,YAAU,gDAAA,UAFZC,EAqEKlC,EAAAuY,EAAAnW,CAAA,EAjEJC,EAMKkW,EAAAO,CAAA,EALJzW,EAIIyW,EAAAqC,CAAA,EAHH9Y,EAEM8Y,EAAA5Y,CAAA,gBAIRF,EAIKkW,EAAAQ,CAAA,EAHJ1W,EAEM0W,EAAAvW,CAAA,gBAGPH,EAkDKkW,EAAAS,CAAA,EAjDJ3W,EAgDM2W,EAAA1W,CAAA,wDA5DH,CAAAuE,GAAAC,EAAA,IAAAxD,KAAAA,EAAArB,MAAK,MAAK,KAAAmB,EAAAC,EAAAC,CAAA,GAFA,CAAAuD,GAAAC,EAAA,GAAAsU,KAAAA,EAAA,MAAAnZ,MAAK,qBAShB,CAAA4E,GAAAC,EAAA,KAAA9C,KAAAA,EAAA6U,GAAM5W,EAAK,EAAA,EAAA,WAAa,GAAI,EAAE,OAAOA,EAAM,CAAA,EAAA,EAAE,qBAAqB,CAAA,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,2HAb9C,CAAA6C,GAAAC,EAAA,GAAAuU,KAAAA,EAAA,mBAAApZ,QAAQA,EAAK,CAAA,EAAC,OAAS,GAC7C,YAAU,qOApE2BA,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,mqBA8CjEA,EAAK,CAAA,EAAC,OAAS,EAAC,uoCANNA,EAAK,CAAA,EAAC,EAAE,cAAc,CAAA,wQA1CxCC,EAgKMlC,EAAAgD,EAAAZ,CAAA,EA/JLC,EAmBMW,EAAAR,CAAA,EAlBLH,EAA+EG,EAAAD,CAAA,gBAC/EF,EAgBSG,EAAAW,CAAA,SAGVd,EAyIMW,EAAAD,CAAA,EAxILV,EAsBMU,EAAAH,CAAA,EArBLP,EAoBMO,EAAAD,CAAA,EAnBLN,EAaMM,EAAAL,CAAA,SACND,EAIEM,EAAAyI,CAAA,OAFWnJ,EAAW,CAAA,CAAA,SAK1BI,EAAyCU,EAAAwD,CAAA,SACzClE,EA+GMU,EAAAL,CAAA,kGA5JyCT,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,mBAwCvDrB,EAAK,CAAA,EAAC,EAAE,cAAc,yCADvBA,EAAW,CAAA,QAAXA,EAAW,CAAA,CAAA,0rBAnGpB,OAAAqU,CAAW,EAAAC,GAKb5J,EAAWC,KAWX3I,EAAOC,GAAW,MAAM,0BAEnB,KAAAC,EAAO,EAAA,EAAAY,EAEduW,EAAc,GAEdrE,EAAA,CAAA,QAEEsE,EAA8B,MAAAC,GAAA,CAC7B,MAAYC,GAAgB,aAAa,MAAOD,CAAM,EAAE,MAAOhc,GAAA,CACpEiF,GAAM,MAAMjF,CAAK,QAGlByX,EAAc,MAAAyE,GAAoB,aAAa,KAAK,CAAA,EAEpD/O,EAAS,QAAQ,GAGZgP,EAA2B,MAAAH,GAAA,CAC1B,MAAYI,GAAe,aAAa,MAAOJ,CAAM,EAAE,MAAOhc,GAAA,CACnEiF,GAAM,MAAMjF,CAAK,QAGlByX,EAAc,MAAAyE,GAAoB,aAAa,KAAK,CAAA,GAG/CG,EAAA,SAAA,OACC5E,EAAc,MAAA6E,GAAoB,aAAa,KAAK,EACtD,IAAAxE,EAAA,IAAW,KAAM,CAAA,KAAK,UAAUL,CAAK,IACxC,KAAM,kBAAA,CAAA,EAEPX,EAAOgB,0BAA8B,KAAK,IAAA,CAAA,OAAA,UAiBvC3S,EAAA,EAAAR,EAAO,EAAK,gBAmCCmX,EAAW,KAAA,aAwBE,MAAAhb,EAAA/B,GAAM+c,IAAgB,IAAM/c,EAAE,MAC/C,YACA,EAAA,SAAS+c,EAAY,YAAW,CAAA,cAyB7BC,EAAqBzE,EAAK,EAAE,eAwB5B6E,EAAkB7E,EAAK,EAAE,UAgCjC+E,2GA5JD1X,iBAEL8S,EAAc,MAAAyE,GAAoB,aAAa,KAAK,CAAA,itBC7CxCzZ,EAAW,CAAA,CAAA,2CAElBA,EAAS,CAAA,CAAA,UANjBC,EAaMlC,EAAA4E,EAAAxC,CAAA,EALLC,EAIEuC,EAAAC,CAAA,oCARY5C,EAAW,CAAA,CAAA,mBAElBA,EAAS,CAAA,CAAA,mDAVL,UAAA6C,EAAY,SAAA,EAAAC,GACZ,YAAAC,EAAc,KAAA,EAAAD,0wBCOX9C,EAAW,CAAA,CAAA,2CAElBA,EAAS,CAAA,CAAA,UANjBC,EAaMlC,EAAA4E,EAAAxC,CAAA,EALLC,EAIEuC,EAAAC,CAAA,oCARY5C,EAAW,CAAA,CAAA,mBAElBA,EAAS,CAAA,CAAA,mDAVL,UAAA6C,EAAY,SAAA,EAAAC,GACZ,YAAAC,EAAc,KAAA,EAAAD,y0BCOX9C,EAAW,CAAA,CAAA,2CAElBA,EAAS,CAAA,CAAA,UANjBC,EAaMlC,EAAA4E,EAAAxC,CAAA,EALLC,EAIEuC,EAAAC,CAAA,oCARY5C,EAAW,CAAA,CAAA,mBAElBA,EAAS,CAAA,CAAA,mDAVL,UAAA6C,EAAY,SAAA,EAAAC,GACZ,YAAAC,EAAc,KAAA,EAAAD,0gBC6DP9C,EAAK,CAAA,EAAC,EAAE,MAAM,yJAAdA,EAAK,CAAA,EAAC,EAAE,MAAM,kKAuBIA,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,8QAA7CC,EAAqDlC,EAAAgL,EAAA5I,CAAA,0CAArBH,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,+HAHbtD,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,8QAA/CC,EAAuDlC,EAAAgL,EAAA5I,CAAA,0CAAvBH,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,2KAF3CtD,EAAM,CAAA,EAAA,4VAgBqBA,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,8QAAhDC,EAAwDlC,EAAAgL,EAAA5I,CAAA,0CAAxBH,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,+HAUhBtD,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,8QAA/CC,EAAuDlC,EAAAgL,EAAA5I,CAAA,0CAAvBH,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,+HAUftD,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,8QAAjDC,EAAyDlC,EAAAgL,EAAA5I,CAAA,0CAAzBH,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,+HAUjBtD,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,uPAA/CC,EAAuDlC,EAAAgL,EAAA5I,CAAA,0CAAvBH,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,+HAUftD,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,8QAAhDC,EAAwDlC,EAAAgL,EAAA5I,CAAA,0CAAxBH,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,qnEAGjDrD,EAAiElC,EAAAuG,EAAAnE,CAAA,WAEjEF,EAQMlC,EAAAgL,EAAA5I,CAAA,olCA7EM2Z,6MANd7Z,EAqFMlC,EAAAgL,EAAA5I,CAAA,6sBAnJAuK,EAAWC,KAcX3I,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,aAAA8X,CAAA,EAAAjX,EACA,CAAA,iBAAAkX,CAAA,EAAAlX,EACA,CAAA,mBAAAmX,CAAA,EAAAnX,EACA,CAAA,cAAAoX,CAAA,EAAApX,EACA,CAAA,cAAAqX,CAAA,EAAArX,EACA,CAAA,QAAAsX,CAAA,EAAAtX,GAEA,OAAAyW,EAAS,EAAA,EAAAzW,EAEhBZ,EAAO,GACPmY,EAAS,GAEP,MAAAC,EAAA,SAAA,CACDD,QACGE,GAAc,aAAa,MAAOhB,EAAQ,QAAQ,QAElDiB,GAAW,aAAa,MAAOjB,EAAQ,QAAQ,EAEtD7O,EAAS,QAAQ,GAGZ+P,EAAA,SAAA,CACL/X,EAAA,EAAA2X,GAAA,MACOK,GAAY,aAAa,MAAOnB,CAAM,EAAE,MAAa,MAAAhc,QAG1D,KAAMod,GAAQA,EAAI,OAAS,QAAQ,CAAA,UA+BlCL,YAeAJ,YAUAF,YAUAC,YAUAF,YAUAI,YAaCzX,EAAA,EAAAR,EAAO,EAAK,EACZkY,sCA1FOzT,GAAC,CACRA,EAAE,SAAW,IAChByT,mYATKlY,GACNuY,0PCyEI9R,EAAA3I,KAAK,MAAK,0XA5B6C4D,EAAAsV,EAAA,QAAA0B,EAAA,qDAAA5a,EAAK,CAAA,EAAA,KAAOA,MAAWA,EAAW,CAAA,EACzF,+BACAA,EAAQ,CAAA,EACP,+BACA,yDAAuD,kCAAA,EACjD4D,EAAAsV,EAAA,OAAAC,EAAA,MAAAnZ,KAAK,EAAE,mCANlBC,EAgCIlC,EAAAmb,EAAA/Y,CAAA,EALHC,EAIM8Y,EAAA3Y,CAAA,EAHLH,EAEMG,EAAAD,CAAA,wIADJuE,EAAA,CAAA,EAAA,GAAA8D,KAAAA,EAAA3I,KAAK,MAAK,KAAAmB,EAAA2H,EAAAH,CAAA,EA5B6C9D,EAAA,CAAA,EAAA,KAAA+V,KAAAA,EAAA,qDAAA5a,EAAK,CAAA,EAAA,KAAOA,MAAWA,EAAW,CAAA,EACzF,+BACAA,EAAQ,CAAA,EACP,+BACA,yDAAuD,oDACjD6E,EAAA,CAAA,EAAA,GAAAsU,KAAAA,EAAA,MAAAnZ,KAAK,6QAnB2C4D,EAAAmF,EAAA,QAAA8R,EAAA,qDAAA7a,EAAK,CAAA,EAAA,KAAOA,MAAWA,EAAW,CAAA,EACzF,+BACAA,EAAQ,CAAA,EACP,+BACA,wDAAsD,kCAAA,UAL3DC,EAYMlC,EAAAgL,EAAA5I,CAAA,EALLC,EAIE2I,EAAAI,CAAA,OAFWnJ,EAAS,CAAA,CAAA,qFAATA,EAAS,CAAA,QAATA,EAAS,CAAA,CAAA,EARoC6E,EAAA,CAAA,EAAA,KAAAgW,KAAAA,EAAA,qDAAA7a,EAAK,CAAA,EAAA,KAAOA,MAAWA,EAAW,CAAA,EACzF,+BACAA,EAAQ,CAAA,EACP,+BACA,wDAAsD,2HA0IhD,OAAAA,KAAK,kMA6CTA,EAAI,CAAA,EAAC,KAAOA,EAAO,CAAA,GAAAuD,GAAAvD,CAAA,kOA/CzBC,EAoEMlC,EAAAgL,EAAA5I,CAAA,6DAlEI0E,EAAA,CAAA,EAAA,IAAAiW,EAAA,OAAA9a,KAAK,6LA6CTA,EAAI,CAAA,EAAC,KAAOA,EAAO,CAAA,2NAxENA,EAAK,CAAA,EAAC,EAAE,SAAS,mGAYjBA,EAAK,CAAA,EAAC,EAAE,QAAQ,mSAbnCC,EAwBMlC,EAAAgL,EAAA5I,CAAA,gFAvBaH,EAAK,CAAA,EAAC,EAAE,SAAS,0FAYjBA,EAAK,CAAA,EAAC,EAAE,QAAQ,uPA3DhBA,EAAK,CAAA,EAAC,EAAE,SAAS,qEAwBjBA,EAAK,CAAA,EAAC,EAAE,QAAQ,2RAzBnCC,EA6CMlC,EAAAgL,EAAA5I,CAAA,gFA5CaH,EAAK,CAAA,EAAC,EAAE,SAAS,2FAwBjBA,EAAK,CAAA,EAAC,EAAE,QAAQ,wuBA2EjCC,EAiBSlC,EAAAmD,EAAAf,CAAA,sjBAKTF,EAiBSlC,EAAAmD,EAAAf,CAAA,yZA1FTF,EAQSlC,EAAAmD,EAAAf,CAAA,4cAITF,EAQSlC,EAAAmD,EAAAf,CAAA,osBAnETF,EAoBSlC,EAAAmD,EAAAf,CAAA,imBAITF,EAiBSlC,EAAAmD,EAAAf,CAAA,iIAnHyC,IAAA4a,EAAA,CAAA,OAAA/a,KAAK,IAAjCA,EAAkB,CAAA,IAAA,gBAAlBA,EAAkB,CAAA,0EAGvCA,EAAW,CAAA,EAAAgD,uEAoEVhD,EAAW,CAAA,EAAA,EA+CNA,MAAYA,EAAS,CAAA,EAAA,mRA9DxB4D,EAAAtD,EAAA,QAAA0a,GAAAhb,EAAK,CAAA,EAAA,KAAOA,MAAWA,EAAW,CAAA,EACtC,mCACAA,EAAQ,CAAA,EACP,mCACA,kEAAgE,0FAAA,uEA1DtEC,EAsNMlC,EAAAwC,EAAAJ,CAAA,qBAlKLC,EAiKMG,EAAAD,CAAA,uGAvNgDuE,EAAA,CAAA,EAAA,IAAAoW,EAAA,OAAAjb,KAAK,8BAAjCA,EAAkB,CAAA,+NAwDpC,CAAA4E,GAAAC,EAAA,CAAA,EAAA,KAAAmW,KAAAA,GAAAhb,EAAK,CAAA,EAAA,KAAOA,MAAWA,EAAW,CAAA,EACtC,mCACAA,EAAQ,CAAA,EACP,mCACA,kEAAgE,8PAlBxD2G,GAAC,wGAnHR,MAAA3E,EAAOC,GAAW,MAAM,8BAExByI,EAAWC,KAkBN,GAAA,CAAA,KAAAkK,CAAA,EAAA/R,GACA,SAAAoY,EAAW,EAAA,EAAApY,GACX,SAAAqY,EAAW,EAAA,EAAArY,EAElBsY,EAAY,GAEZC,EAAqB,GACrBC,EAAc,GAEdC,EAAY1G,EAAK,MAEf,MAAA2G,EAAA,MAAuBC,GAAIC,KAAA,CAC5BA,KAAW,GACdlZ,GAAM,MAAMC,EAAM,EAAE,kCAAkC,CAAA,SAEhDkZ,GAAe,aAAa,MAAOF,GAAA,CACxC,MAAOC,EAAA,CAAA,EAGR3G,GAAgB,IAAI,CAAC,EACf,MAAAC,GAAM,IAAU,MAAAC,GAAY,aAAa,MAAOC,CAAgB,CAAA,EAChE,MAAA0G,GAAY,IAAU,MAAAC,GAAqB,aAAa,MAAO,QAAQ,CAAA,IAIzE7B,EAA0B,MAAAyB,IAAA,CACzB,MAAAhI,GAAA,MAAYqI,GAAc,aAAa,MAAOL,EAAE,EAAE,MAAOle,KAC9DiF,GAAM,MAAMjF,EAAK,EACV,OAGJkW,KACH+B,GAAA,MAAW/B,GAAI,EAAE,EAAA,EAEjBsB,GAAgB,IAAI,CAAC,EACf,MAAAC,GAAM,IAAU,MAAAC,GAAY,aAAa,MAAOC,CAAgB,CAAA,EAChE,MAAA0G,GAAY,IAAU,MAAAC,GAAqB,aAAa,MAAO,QAAQ,CAAA,IAIzE5B,EAA4B,MAAAwB,IAAA,OAC3BjC,GAAgB,aAAa,MAAOiC,EAAE,EAE5C1G,GAAgB,IAAI,CAAC,EACf,MAAAC,GAAM,IAAU,MAAAC,GAAY,aAAa,MAAOC,CAAgB,CAAA,EAChE,MAAA0G,GAAY,IAAU,MAAAC,GAAqB,aAAa,MAAO,QAAQ,CAAA,GAGxEE,EAAmB,MAAAC,IAAA,CACxBA,GAAK,MAAA,kBAIoBX,EAAkB5d,uBAa7B8d,EAAS,KAAA,0BAarB7Q,EAAS,QAAQ,EAEbuR,GACHC,GAAY,IAAI,EAAK,cAItBX,EAAY1G,EAAK,KAAK,EACtBnS,EAAA,EAAA4Y,EAAc,EAAI,KAEH3U,IAAC,CAChBjE,EAAA,EAAA0Y,EAAY,EAAI,KAEDzU,IAAC,CAChBjE,EAAA,EAAA0Y,EAAY,EAAK,UAqCdI,EAAc3G,EAAK,GAAI0G,CAAS,EAChC7Y,EAAA,EAAA4Y,EAAc,EAAK,EACnB5Y,EAAA,EAAA6Y,EAAY,EAAE,UAsBd7Y,EAAA,EAAA4Y,EAAc,EAAK,EACnB5Y,EAAA,EAAA6Y,EAAY,EAAE,UAsBdtB,EAAmBpF,EAAK,EAAE,UAY1BnK,EAAS,SAAU,OAAO,UAwC1BA,EAAS,QAAQ,UA3BlBsP,EAAiBnF,EAAK,EAAE,UAGxBnS,EAAA,EAAA2Y,EAAqB,EAAI,UAGzBpB,EAAmBpF,EAAK,EAAE,cAG1B0G,EAAY1G,EAAK,KAAK,EAEtBnS,EAAA,EAAA4Y,EAAc,EAAI,UAGlB5Q,EAAS,QAAQ,UAGjBA,EAAS,UAAU,qBAGbkR,GAAY,IAAU,MAAAC,GAAqB,aAAa,MAAO,QAAQ,CAAA,UA6B5EnR,EAAS,QAAQ,KAtIN/D,IAAC,CAChBjE,EAAA,EAAA0Y,EAAY,EAAI,MAEDzU,IAAC,CAChBjE,EAAA,EAAA0Y,EAAY,EAAK,odCtHpBnb,EAEMlC,EAAAgL,EAAA5I,CAAA,mPA3BCuK,EAAWC,KAEb,IAAAwR,EAEJ3V,GAAA,IAAA,CACO,IAAe,sBACnB4V,EAASC,IAAAA,CACTD,EAAQ,QAASE,GAAA,CACZA,EAAM,gBACT5R,EAAS,SAAS,MAMpB,KAAM,KACN,WAAY,MACZ,UAAW,KAIJ,QAAQyR,CAAa,8CAIhBA,EAAazV,8VCwN1B1G,EAAK,EAAA,EAAC,EAAE,kBAAkB,EAAA,SAAkC+B,EAAA/B,KAAW,MAAK,iEAAQ,GACtF,oIADsF,GACtF,uGAFAC,EAEMlC,EAAAgL,EAAA5I,CAAA,gBADyBC,EAAuD2I,EAAAnB,CAAA,0CAApF5H,EAAK,EAAA,EAAC,EAAE,kBAAkB,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,EAAkCwD,EAAA,CAAA,EAAA,IAAA9C,KAAAA,EAAA/B,KAAW,MAAK,KAAAmB,EAAAW,EAAAC,CAAA,gTAO9E9B,EAKElC,EAAAgL,EAAA5I,CAAA,+tBAyH+DH,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,uyBAhClFC,EAmCMlC,EAAA2C,EAAAP,CAAA,EAlCLC,EAiCIM,EAAAwY,CAAA,EApBH9Y,EAeM8Y,EAAA5Y,CAAA,SAENF,EAEM8Y,EAAA7Y,CAAA,EADLD,EAAuFC,EAAAE,CAAA,kEAA3BP,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,iPAQjFrD,EAEOlC,EAAAgL,EAAA5I,CAAA,2CA0CJH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,WAERuc,EAAAjQ,GAAAtM,MAAM,OAAMwc,EAAA,CAAA,uBAAjB,OAAIpT,GAAA,8cATPnJ,EA6BMlC,EAAAgL,EAAA5I,CAAA,EA5BLC,EAOS2I,EAAA7H,CAAA,6HADPlB,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,gBAERkb,EAAAjQ,GAAAtM,MAAM,OAAMwc,EAAA,CAAA,oBAAjB,OAAIpT,GAAA,EAAA,mHAAJ,8DAiBC/H,EAAArB,MAAI,KAAI,+SAhBVC,EAiBSlC,EAAAmD,EAAAf,CAAA,uDADP0E,EAAA,CAAA,EAAA,QAAAxD,KAAAA,EAAArB,MAAI,KAAI,KAAAmB,EAAAC,EAAAC,CAAA,sDAURrB,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,cAGXA,EAAY,EAAA,CAAA,uBAAjB,OAAIoJ,GAAA,giBANRnJ,EA4BMlC,EAAAsC,EAAAF,CAAA,EA3BLC,EA0BMC,EAAAE,CAAA,EAzBLH,EAEMG,EAAAD,CAAA,yGADJN,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,sBAGXrB,EAAY,EAAA,CAAA,oBAAjB,OAAIoJ,GAAA,EAAA,8GAAJ,OAAIA,EAAAuN,EAAA,OAAAvN,GAAA,0CAAJ,OAAIA,GAAA,yQAIMpJ,EAAc,CAAA,IAAKA,EAAI,EAAA,EAAC,gPAAxBA,EAAc,CAAA,IAAKA,EAAI,EAAA,EAAC,sHA6BlC2I,EAAA3I,EAAM,EAAA,EAAA,EAAEA,MAAK,UAAU,EAAA,wHAJmD4D,EAAAmF,EAAA,QAAA,uEAAA/I,EAAQ,EAAA,IAAA,EAChF,GACA,QAAM,SAAA,UAHVC,EAwBMlC,EAAAgL,EAAA5I,CAAA,iBAnBJ0E,EAAA,CAAA,EAAA,MAAA8D,KAAAA,EAAA3I,EAAM,EAAA,EAAA,EAAEA,MAAK,UAAU,EAAA,KAAAmB,EAAA2H,EAAAH,CAAA,2CANrB8T,GAAAzc,QAAQ,GAAMA,EAAG,EAAA,EAAG,GAAKA,EAAK,EAAA,EAAA,aAAeA,EAAgB,CAAA,EAACA,EAAM,EAAA,EAAA,CAAC,EAAE,aAAUuD,GAAAvD,CAAA,uIA+B3EA,EAAc,CAAA,IAAKA,EAAI,EAAA,EAAC,2MA/B9BA,QAAQ,GAAMA,EAAG,EAAA,EAAG,GAAKA,EAAK,EAAA,EAAA,aAAeA,EAAgB,CAAA,EAACA,EAAM,EAAA,EAAA,CAAC,EAAE,iKA+BjEA,EAAc,CAAA,IAAKA,EAAI,EAAA,EAAC,o5BA0BlCC,EAGMlC,EAAAwC,EAAAJ,CAAA,sBADLC,EAA+BG,EAAAD,CAAA,oJAa1B,KAAAN,MAAM,8JAAN6E,EAAA,CAAA,EAAA,QAAA6X,EAAA,KAAA1c,MAAM,yLAoB4BsD,EAAAtD,MAAM,KAAI,sTAL1CwD,GAAAuD,EAAA,IAAA4V,EAAA3c,MAAM,iBAAiB,GAAA4D,EAAAmD,EAAA,MAAA4V,CAAA,uQAR/B1c,EAcSlC,EAAAmD,EAAAf,CAAA,EARRC,EAMMc,EAAAZ,CAAA,EALLF,EAIEE,EAAAyG,CAAA,SAEH3G,EAAwDc,EAAAX,CAAA,gDALjDsE,EAAA,CAAA,EAAA,OAAA,CAAArB,GAAAuD,EAAA,IAAA4V,EAAA3c,MAAM,iBAAiB,gBAKS6E,EAAA,CAAA,EAAA,OAAAvB,KAAAA,EAAAtD,MAAM,KAAI,KAAAmB,EAAAkC,EAAAC,CAAA,oHA9R5CsZ,EAAc,uFAMpB5c,EAAK,EAAA,EAAC,EAAE,UAAU,EAAA,2lCAyHhB6c,EAAA7c,EAAM,EAAA,EAAA,OAAmC3B,EAAA,EAAA,OAAS,uEA/L9C2B,EAAkB,EAAA,IAAA,iBAAlBA,EAAkB,EAAA,kHAQtBA,EAAK,EAAA,EAAC,EAAE,cAAc,0CADlBA,EAAiB,CAAA,IAAA,gBAAjBA,EAAiB,CAAA,kFAaxBA,EAAY,EAAA,GAAA4M,GAAA5M,CAAA,OA8FVgJ,GAAAhJ,EAAK,EAAA,IAAL,YAAAgJ,GAAO,QAAS,SAAOK,GAAArJ,CAAA,KAwCtBA,EAAqB,EAAA,GAAAsJ,GAAA,iBAsErBtJ,EAAY,EAAA,EAAC,OAAS,GAACgD,GAAAhD,CAAA,QAiCpBA,EAAgB,CAAA,CAAA,2BAArB,OAAIoJ,IAAA,uEAkDD,IAAA0T,GAAA9c,QAA6BA,EAAc,EAAA,GAAA8H,GAAA9H,CAAA,EAqB3C+c,GAAA/c,QAAU,QAAS4B,GAAA5B,CAAA,+hFArJTA,EAAK,EAAA,EAAC,EAAE,QAAQ,CAAA,4cA5I2DA,EAAY,EAAA,EACrG,GACA,YAAW,0FAT0CA,EAAY,EAAA,EAClE,wBACA,gCAA8B,0GAAA,mBAErBA,EAAY,EAAA,CAAA,qFAPzBC,EAwUMlC,GAAAsG,EAAAlE,EAAA,EA/TLC,EA8TMiE,EAAAN,CAAA,EAzTL3D,EAqEM2D,EAAApD,CAAA,EApELP,EA2CIO,EAAAuY,CAAA,EA1BH9Y,EAOM8Y,EAAA5Y,CAAA,SACNF,EAEM8Y,EAAA3Y,CAAA,gBACNH,EAcM8Y,EAAA7Y,CAAA,SAGPD,EAsBSO,EAAAO,CAAA,iCA0CVd,EAyKM2D,EAAA7D,CAAA,0BAlKLE,EA6BMF,EAAAa,CAAA,EA5BLX,EA2BMW,EAAAD,CAAA,EA1BLV,EAaMU,EAAAL,CAAA,SAENL,EAUEU,EAAAqI,CAAA,OAPWnJ,EAAM,CAAA,CAAA,yDA4ErBI,EAiEMF,EAAAW,CAAA,4FAGPT,EA+BM2D,EAAAK,EAAA,EA5BLhE,EA2BMgE,GAAAnD,EAAA,2LAlWGjB,GAAkB,EAAA,gEAQtBA,GAAK,EAAA,EAAC,EAAE,cAAc,0FADlBA,GAAiB,CAAA,2BAaxBA,GAAY,EAAA,yGAkDXA,GAAK,EAAA,EAAC,EAAE,UAAU,EAAA,KAAAmB,EAAA8B,EAAAC,CAAA,IA4CjB8F,GAAAhJ,GAAK,EAAA,IAAL,YAAAgJ,GAAO,QAAS,0EAwCfhJ,GAAqB,EAAA,gFAyBVA,GAAK,EAAA,EAAC,EAAE,QAAQ,6CACjBA,GAAM,CAAA,QAANA,GAAM,CAAA,CAAA,EAWhB6E,GAAA,CAAA,EAAA,SAAAgY,EAAA7c,GAAM,EAAA,EAAA,OAAmC3B,EAAA,EAAA,OAAS,uEAiClD2B,GAAY,EAAA,EAAC,OAAS,+IAiCnBA,GAAgB,CAAA,CAAA,wBAArB,OAAIoJ,IAAA,EAAA,mIAAJ,OAAIA,GAAAuN,GAAA,OAAAvN,IAAA,cAkDDpJ,SAA6BA,GAAc,EAAA,4HAqB3CA,SAAU,oPAjS2EA,GAAY,EAAA,EACrG,GACA,gHATqDA,GAAY,EAAA,EAClE,wBACA,gCAA8B,kKAErBA,GAAY,EAAA,CAAA,qFA6NnB,OAAIoJ,IAAA,4VA5bH4T,GAAa,IA0XE3e,GAAAyK,GAAMA,EAAE,OAAS,SAUb0T,GAAA1T,GAAMA,EAAE,OAAS,6TA1ZpC,MAAA9G,EAAOC,GAAW,MAAM,uBAwB1B,IAAAgb,EACAC,EAAS,GAET/B,EAAW,GAEXgC,EAAiB,KACjBC,EAAa,KAEb3I,EAAoB,GACpB4I,EAAe,GAEfC,EAAA,CAAA,EAGAC,EAAkB,GAClBC,EAAiB,GAsBf,MAAAC,EAAA,SAAA,CAEL1I,GAAgB,IAAI,CAAC,OACrByI,EAAiB,EAAA,EACX,MAAAxI,GAAM,IAAU,MAAAC,GAAY,aAAa,MAAOC,CAAgB,CAAA,EAGtEC,GAAwB,IAAI,EAAI,GAG3BuI,EAAA,SAAA,KACLH,EAAkB,EAAA,EAElBxI,GAAgB,IAAIG,EAAmB,CAAC,QAClCyI,EAAoB,MAAA1I,GAAY,aAAa,MAAOC,CAAgB,EAG1ExS,EAAA,GAAA8a,EAAiBG,EAAY,SAAW,CAAA,QAClC3I,GAAM,IAAA,CAAA,GAAQ4I,KAAWD,CAAW,CAAA,MAE1CJ,EAAkB,EAAA,GAGnB/W,GAAA,SAAA,CACCqX,GAAO,UAAWlX,IAAA,CACbmX,GAAgBnX,IACnBuV,GAAY,IAAI,EAAK,GAGjB4B,GAAiB,CAAAnX,IACrBuV,GAAY,IAAI,EAAI,IAItBA,GAAY,IAAI,OAAO,WAAac,EAAU,EACxC,MAAApB,GAAY,IAAU,MAAAC,GAAqB,aAAa,MAAO,QAAQ,CAAA,EACvE,MAAA4B,EAAA,EAEF,IAAAM,EACAC,GAEK,SAAAC,IAAA,CACF,MAAAC,GAAc,OAAO,WACrBC,GAAgB,KAAK,IAAIH,GAAS,QAAUD,EAAW,OAAO,EAChEA,EAAW,QAAU,IAAMI,IAAiBD,GAAc,IACzDF,GAAS,QAAUD,EAAW,SACjC7B,GAAY,IAAI,EAAK,EAElB8B,GAAS,QAAUD,EAAW,SACjC7B,GAAY,IAAI,EAAI,SAKjBkC,GAAgBzX,IAAA,CACrBoX,EAAapX,GAAE,eAAe,CAAC,EAC/B,QAAQ,IAAIoX,EAAW,OAAO,GAGzBM,GAAc1X,IAAA,CACnBqX,GAAWrX,GAAE,eAAe,CAAC,EAC7BsX,MAGKK,GAAa3X,IAAA,CACdA,GAAE,MAAQ,aACbwU,EAAW,EAAA,GAIPoD,GAAW5X,IAAA,CACZA,GAAE,MAAQ,aACbwU,EAAW,EAAA,GAIPqD,GAAA,IAAA,GAEAC,GAAA,IAAA,KACLtD,EAAW,EAAA,MACXgC,EAAiB,IAAA,GAGlB,cAAO,iBAAiB,UAAWmB,EAAS,EAC5C,OAAO,iBAAiB,QAASC,EAAO,EAExC,OAAO,iBAAiB,aAAcH,EAAY,EAClD,OAAO,iBAAiB,WAAYC,EAAU,EAE9C,OAAO,iBAAiB,QAASG,EAAO,EACxC,OAAO,iBAAiB,OAAQC,EAAM,OAGrC,OAAO,oBAAoB,UAAWH,EAAS,EAC/C,OAAO,oBAAoB,QAASC,EAAO,EAE3C,OAAO,oBAAoB,aAAcH,EAAY,EACrD,OAAO,oBAAoB,WAAYC,EAAU,EAEjD,OAAO,oBAAoB,QAASG,EAAO,EAC3C,OAAO,oBAAoB,OAAQC,EAAM,WAKrCC,EAAgC,MAAAC,GAAA,OAC/BC,GAAsB,MAAA,QAAQ,IACnCD,EAAS,IAAW,MAAA9J,IAAA,OACbgK,GAAoB,MAAAC,GAAY,aAAa,MAAOjK,GAAK,EAAE,EAAE,MAAOtX,IAAU,IAAI,EACpF,OAAAshB,KACHhK,GAAK,KAAOgK,GAAY,MAElBhK,MAIH,MAAAG,GAAM,IAAI4J,EAAa,GASxBlF,EAA2B,MAAA+B,GAAA,CAC1B,MAAY9B,GAAe,aAAa,MAAO8B,CAAE,EAAE,MAAOle,KAC/DiF,GAAM,MAAMjF,EAAK,EACV,SAIHwhB,IAAYtD,IACT,MAAAlC,GAAO,IAAI,EAAE,EACb,MAAAP,GAAA,EACNxD,GAAK,GAAG,QAGTgI,EAAiB,EAAA,EACjBzI,GAAgB,IAAI,CAAC,EACf,MAAAC,GAAM,IAAU,MAAAC,GAAY,aAAa,MAAOC,CAAgB,CAAA,EAEhE,MAAA0G,GAAY,IAAU,MAAAC,GAAqB,aAAa,MAAO,QAAQ,CAAA,kBAMpEmD,EAAkBvhB,8BAEtB,MAAAuX,GAAM,IAAG,MAAOC,GAAY,aAAa,KAAK,CAAA,iBAK1CR,EAAiBhX,sBAG3Bic,EAAkB0D,EAAW,EAAE,UAc9BlB,GAAY,IAAG,CAAE4B,CAAY,eA0B3Bpb,EAAA,EAAAya,EAAiB,IAAI,EACf,MAAA3H,GAAK,GAAG,EACR,MAAAyJ,EAAgB,SAAS,eAAe,iBAAiB,EAC/D,gBACCA,GAAA,MAAAA,EAAe,QACXhD,GACHC,GAAY,IAAI,EAAK,GAEpB,WAkCHA,GAAY,IAAG,CAAE4B,CAAY,UA4B5Bpb,EAAA,EAAAya,EAAiB,IAAI,EACrB5D,GAAO,IAAI,EAAE,EAET0C,GACHC,GAAY,IAAI,EAAK,gBAwDVgB,EAAM,KAAA,+BAGjB/H,GAAwB,IAAI,EAAK,EAC3B,MAAAH,GAAM,IAAG,MAAOC,GAAY,aAAa,KAAK,CAAA,EACpDyJ,EAAuBd,CAAM,sBAWvBH,EAAgB,gBASrBtI,GAAwB,IAAI,EAAK,MAC7B+J,GAAO,MAASrD,GAAqB,aAAa,MAAOlB,EAAI,IAAI,EACjEuE,GAAQ,SAAW,IAChB,MAAAC,GAAK,IAAG,MAAOC,GAAe,aAAa,KAAK,CAAA,QAGhD3B,EAAgB,SAEjBzI,GAAM,IAAIkK,EAAO,EAEvBxc,EAAA,EAAA6a,EAAkB,EAAK,cAsBtBJ,EAAiBtI,EAAK,EAAE,WAGxBnS,EAAA,EAAAya,EAAiB,IAAI,SAEVxW,KAAC,GACPA,IAAA,YAAAA,GAAG,SAAU,MAAQ,QACzB+S,EAAkB7E,EAAK,EAAE,GAEzBnS,EAAA,EAAA0a,EAAavI,CAAI,EACjBnS,EAAA,EAAA+R,EAAoB,EAAI,eA4C3B0I,EAAiBtI,EAAK,EAAE,WAGxBnS,EAAA,EAAAya,EAAiB,IAAI,SAEVxW,KAAC,GACPA,IAAA,YAAAA,GAAG,SAAU,MAAQ,QACzB+S,EAAkB7E,EAAK,EAAE,GAEzBnS,EAAA,EAAA0a,EAAavI,CAAI,EACjBnS,EAAA,EAAA+R,EAAoB,EAAI,OAQb9N,GAAC,CACR4W,GACJG,aA6BAhb,EAAA,EAAA2a,GAAgBA,CAAY,MATpB1W,GAAC,CACNA,EAAE,SAAW,iBAChB0Y,GAAkB,IAAI,EAAI,8CA/StBpC,EAAUvW,oDAtMlBhE,EAAA,EAAA4a,EAAmBM,EAAO,OAAQ/I,GAAA,IAChCqI,IAAW,GACP,MAAA,IAEH,IAAAoC,GAAQzK,EAAK,MAAM,YAAA,EACjB,MAAA0K,GAAQrC,EAAO,kBAEjBsC,GAAiB,UAEjB3K,EAAK,MAAQA,EAAK,KAAK,UAAY,MAAM,QAAQA,EAAK,KAAK,QAAQ,IACtE2K,GAAiB3K,EAAK,KAAK,SAAS,KAAM4K,IAElCA,GAAQ,SAAWA,GAAQ,QAAQ,cAAc,SAASF,EAAK,IAIjED,GAAM,SAASC,EAAK,GAAKC,kRCrCtBnT,EAAAC,GAAA,CAAA,OAAQtM,EAAM,CAAA,CAAA,CAAA,uBAArB,OAAIoJ,GAAA,0SADgEpJ,EAAS,EAAA,CAAA,UAAjFC,EAmBMlC,EAAAgL,EAAA5I,CAAA,uEAlBKkM,EAAAC,GAAA,CAAA,OAAQtM,EAAM,CAAA,CAAA,CAAA,oBAArB,OAAIoJ,GAAA,EAAA,mHAAJ,wFADoEpJ,EAAS,EAAA,CAAA,gNAKzDA,EAAY,CAAA,CAAA,gBACrBA,EAAI,CAAA,EAAA,IAAA,iBACHA,EAAQ,EAAA,EAAA,CAAA,gBACT0f,GAAa,IAAM,EAAE,SAAOA,GAAa,IAAM,EAAE,EAAA,KAAA,EACzCC,GAAA5W,EAAA,iBAAA2W,GAAe,IAAI,EAAE,OAAKA,GAAa,IAAM,EAAE,EAAK,KAAAA,GAAe,IAAI,EAAE,CAAA,wBACzEA,GAAc,EAAG,GAAG,EAAA,KAAA,EACVC,GAAA5W,EAAA,2BAAA2W,GAAc1f,EAAC,CAAA,EAAC,CAAC,EAAGA,KAAE,CAAC,CAAA,CAAA,EACvB2f,GAAA5W,EAAA,2BAAA2W,GAAc1f,EAAC,CAAA,EAAC,CAAC,EAAGA,KAAE,CAAC,CAAA,CAAA,EACxC2f,GAAA5W,EAAA,UAAA,GAAM2W,GAAc,EAAG,EAAE,CAAA,+BACX1f,EAAQ,CAAA,UAAWA,EAAQ,CAAA,CAAA,wBAA0BA,EAAQ,CAAA,CAAA,IAAA,EAChE2f,GAAA5W,EAAA,qBAAA2W,GAAc1f,EAAK,CAAA,EAAC,CAAC,EAAGA,KAAM,CAAC,CAAA,EAAA,IAAA,sCACrBA,EAAQ,CAAA,EAAG,WAAaA,EAAc,CAAA,CAAA,EACvD2f,GAAA5W,EAAA,aAAA,EAAI/I,EAAO,EAAA,CAAA,UAf3BC,EAeiClC,EAAAgL,EAAA5I,CAAA,wCAZbH,EAAY,CAAA,CAAA,qBACrBA,EAAI,CAAA,EAAA,IAAA,OAKc2f,GAAA5W,EAAA,2BAAA2W,GAAc1f,EAAC,CAAA,EAAC,CAAC,EAAGA,KAAE,CAAC,CAAA,CAAA,OACvB2f,GAAA5W,EAAA,2BAAA2W,GAAc1f,EAAC,CAAA,EAAC,CAAC,EAAGA,KAAE,CAAC,CAAA,CAAA,qCAE1BA,EAAQ,CAAA,UAAWA,EAAQ,CAAA,CAAA,wBAA0BA,EAAQ,CAAA,CAAA,IAAA,QAChE2f,GAAA5W,EAAA,qBAAA2W,GAAc1f,EAAK,CAAA,EAAC,CAAC,EAAGA,KAAM,CAAC,CAAA,EAAA,IAAA,6CACrBA,EAAQ,CAAA,EAAG,WAAaA,EAAc,CAAA,CAAA,UACvD2f,GAAA5W,EAAA,aAAA,EAAI/I,EAAO,EAAA,CAAA,0CAlB3BA,EAAQ,EAAA,GAAA4B,GAAA5B,CAAA,2FAARA,EAAQ,EAAA,iHAVH0f,GAAcE,EAAKC,EAAG,CACtB,OAAA,KAAK,OAAM,GAAMA,EAAMD,GAAOA,qBA1B5B,GAAA,CAAA,KAAAE,EAAO,EAAE,EAAAhd,GACT,EAAAid,EAAC,CAAA,IAAU,EAAG,CAAA,EAAAjd,GACd,EAAAkd,EAAC,CAAI,IAAM,CAAC,CAAA,EAAAld,EACZ,CAAA,SAAAmd,EAAW,GAAI,EAAAnd,EACf,CAAA,SAAAod,EAAW,EAAK,EAAApd,GAChB,MAAAqd,EAAK,CAAI,EAAG,EAAE,CAAA,EAAArd,GACd,WAAAsd,EAAU,CAAI,EAAG,GAAG,CAAA,EAAAtd,GACpB,WAAAud,EAAU,EAAA,EAAAvd,EACV,CAAA,OAAAwd,EAAS,EAAE,EAAAxd,EACX,CAAA,eAAAyd,EAAiB,CAAC,EAAAzd,EAClB,CAAA,aAAA0d,EAAe,OAAO,EAAA1d,EACtB,CAAA,QAAA2d,EAAU,EAAK,EAAA3d,EACf,CAAA,KAAA4d,EAAO,EAAK,EAAA5d,EACZ,CAAA,UAAA6d,EAAY,EAAK,EAAA7d,EACjB,CAAA,QAAA8d,EAAU,GAAI,EAAA9d,EACd,CAAA,kBAAA+d,EAAoB,EAAI,EAAA/d,EAE/BjF,EAAW,GAEf2I,GAAO,IAAA,CACA,CAAAqa,GAAqBX,GAAYK,GAAkB,YAExD,WAAU,IAAA7d,EAAA,GAAO7E,EAAW,EAAI,GAAGoiB,EAAWE,EAAM,CAAC,GAAKI,CAAc,aAOjEO,GAAQ,CACX,OAAAT,EAAW,OAAeA,EAAW,KAAK,MAAM,KAAK,OAAM,GAAMA,EAAW,OAAS,EAAC,CAAA,EAAA,OACvE,KAAK,MAAMX,GAAcU,EAAW,CAAC,EAAGA,EAAW,CAAC,CAAA,CAAA,CAAA,2hCC6B/D,OAAO,KAAKpgB,EAAS,CAAA,CAAA,CAAA,uBAA1B,OAAIoJ,GAAA,mNAAC,OAAO,KAAKpJ,EAAS,CAAA,CAAA,CAAA,oBAA1B,OAAIoJ,GAAA,EAAA,2HAAJ,uDA4BO/H,EAAArB,KAAUA,EAAO,CAAA,CAAA,EAAEA,EAAS,EAAA,CAAA,EAAAA,OAAM,MAAK,SAEjB+B,EAAA/B,KAAUA,EAAO,CAAA,CAAA,EAAEA,EAAS,EAAA,CAAA,EAAAA,OAAM,QAAO,+WAJlEC,EAKMlC,EAAAsC,EAAAF,CAAA,EAJLC,EAEMC,EAAAC,CAAA,gBACNF,EAAwEC,EAAAE,CAAA,iBAFtEsE,EAAA,GAAAxD,KAAAA,EAAArB,KAAUA,EAAO,CAAA,CAAA,EAAEA,EAAS,EAAA,CAAA,EAAAA,OAAM,MAAK,KAAAmB,EAAAC,EAAAC,CAAA,EAEjBwD,EAAA,GAAA9C,KAAAA,EAAA/B,KAAUA,EAAO,CAAA,CAAA,EAAEA,EAAS,EAAA,CAAA,EAAAA,OAAM,QAAO,KAAAmB,EAAAW,EAAAC,CAAA,2CATlE/B,EAAO,EAAA,EAAA,WAIDuc,EAAAjQ,GAAA,OAAO,KAAKtM,EAAU,CAAA,EAAAA,MAASA,EAAO,EAAA,CAAA,CAAA,CAAA,uBAA3C,OAAIoJ,GAAA,sVAdkCxF,EAAAtD,EAAA,QAAA0a,EAAA,oCAAAhb,QAAY,QACjD,yBACAA,QAAY,QACX,0BACAA,QAAY,UACX,2BACAA,QAAY,UACX,wBACA,IAAE,iCAAA,uDAVVC,EAyBMlC,EAAAsC,EAAAF,CAAA,EAxBLC,EAYMC,EAAAC,CAAA,gBAENF,EASMC,EAAAE,CAAA,0EAZJP,EAAO,EAAA,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,EAVgCwD,EAAA,GAAAmW,KAAAA,EAAA,oCAAAhb,QAAY,QACjD,yBACAA,QAAY,QACX,0BACAA,QAAY,UACX,2BACAA,QAAY,UACX,wBACA,IAAE,wDAMDuc,EAAAjQ,GAAA,OAAO,KAAKtM,EAAU,CAAA,EAAAA,MAASA,EAAO,EAAA,CAAA,CAAA,CAAA,oBAA3C,OAAIoJ,GAAA,EAAA,mHAAJ,2DAtBFpJ,EAAO,CAAA,EAAA,SAAKA,EAAS,CAAA,EAACA,EAAO,CAAA,CAAA,EAAE,KAAI,aAK/B+gB,EAAAzU,GAAA,OAAO,KAAKtM,EAAU,CAAA,EAAAA,OAAU,OAAM3B,EAAA,CAAA,uBAA3C,OAAI+K,GAAA,0DANkD,GACtD,aAAS,KAAG,qKAD0C,GACtD,iBAAS,KAAG,yQAFfnJ,EAmCMlC,EAAAwC,EAAAJ,CAAA,EAlCLC,EAEMG,EAAAD,CAAA,qCAENF,EAAyCG,EAAA+D,CAAA,wFAHtCtE,EAAO,CAAA,EAAA,KAAAmB,EAAAkC,EAAAC,CAAA,cAAKtD,EAAS,CAAA,EAACA,EAAO,CAAA,CAAA,EAAE,KAAI,KAAAmB,EAAAG,EAAAC,CAAA,OAK/Bwf,EAAAzU,GAAA,OAAO,KAAKtM,EAAU,CAAA,EAAAA,OAAU,OAAM3B,EAAA,CAAA,oBAA3C,OAAI+K,GAAA,EAAA,gHAAJ,2DA5CJpJ,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,kUAwBgBA,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,mCA6DvCA,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,WAnFlCghB,EAAA,IAAAC,GAAA,CAAA,MAAA,CAAA,EAAA,CAAA,GAAI,IAAI,EAAO,EAAA,CAAA,EAAG,EAAG,CAAA,CAAA,CAAA,QAiC/BjhB,EAAS,CAAA,GAAA4B,GAAA5B,CAAA,+DAlCbA,EAAW,CAAA,CAAA,qIAyB2B,GACtC,MAAC2H,EAAa,wPA1Bd3H,EAAW,CAAA,CAAA,yWAyB2B,GACtC,SAAC2H,EAAa,+kCA9BlB1H,EAiCMlC,EAAA+C,EAAAX,CAAA,EAhCLC,EAwBMU,EAAAP,CAAA,EAvBLH,EAIMG,EAAAD,CAAA,kDACNF,EAiBSG,EAAAyD,CAAA,SAEV5D,EAMMU,EAAAL,CAAA,EALLL,EAAwEK,EAAAJ,CAAA,gBACxED,EAAgFK,EAAAC,CAAA,SAChFN,EAEMK,EAAAE,CAAA,yBAIRV,EAwDMlC,EAAAkD,EAAAd,CAAA,EAvDLC,EA2CMa,EAAAJ,CAAA,EA1CLT,EAyCMS,EAAAE,CAAA,wBAEPX,EAUMa,EAAAf,CAAA,EATLE,EAQSF,EAAA+D,CAAA,EADR7D,EAA0D6D,EAAA2D,CAAA,0FArFzD5H,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,iBACvBrB,EAAW,CAAA,CAAA,oBAuB4BA,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAmB,EAAAK,EAAAC,CAAA,EAW1DzB,EAAS,CAAA,8EAkDUA,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAmB,EAAA4R,EAAAC,CAAA,+jBAzCCkO,GAAYA,IAAY,8EA5DvE,MAAAlf,EAAOC,GAAW,MAAM,0BAEnB,KAAAC,EAAO,EAAA,EAAAY,EAEdqe,EAAY,KAEhB3a,GAAA,SAAA,OACOiN,EAAY,MAAA2N,SAClBD,EAAY1N,CAAA,iBAeT,aAAa,QAAUd,EAAQ,QAC/BjQ,EAAA,EAAAR,EAAO,EAAK,UAwEZ,aAAa,QAAUyQ,EAAQ,QAC/BjQ,EAAA,EAAAR,EAAO,EAAK,gMCxELlC,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,OAAK+B,EAAA/B,KAAa,KAAI,OAAIkD,EAAAlD,KAAa,MAAK,mDAA1C,IAAE,aAAmB,IAAE,aAAoB,GAAC,8FAA5C,IAAE,iBAAmB,IAAE,iBAAoB,GAAC,sGADpEC,EAEMlC,EAAAwC,EAAAJ,CAAA,EADLC,EAAyEG,EAAAD,CAAA,gEAAnEN,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,EAAKwD,EAAA,GAAA9C,KAAAA,EAAA/B,KAAa,KAAI,KAAAmB,EAAAW,EAAAC,CAAA,EAAI8C,EAAA,GAAA3B,KAAAA,EAAAlD,KAAa,MAAK,KAAAmB,EAAA8B,EAAAC,CAAA,iDAbjElD,EAAK,CAAA,EAAC,EAAE,4BAA4B,EAAA,WACpCA,EAAK,CAAA,EAAC,EAAE,gCAAgC,EAAA,WAIxCA,EAAK,CAAA,EAAC,EAAE,sDAAsD,EAAA,WAC9DA,EAAK,CAAA,EAAC,EACN,mHAAmH,EAAA,eAiBlHA,EAAK,CAAA,EAAC,EAAE,aAAa,EAAA,WAQlBA,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,WArBnBA,EAAY,CAAA,GAAA4B,GAAA5B,CAAA,m+CAlBrBC,EA6CMlC,EAAA+C,EAAAX,CAAA,EA5CLC,EA2CMU,EAAAL,CAAA,EAxCLL,EAuCMK,EAAAE,CAAA,EAtCLP,EAqCMO,EAAAD,CAAA,EApCLN,EAGMM,EAAAJ,CAAA,SAFkCF,EAAME,EAAA+gB,CAAA,uBAI9CjhB,EAKMM,EAAAH,CAAA,SAJ4DH,EAAMG,EAAA+gB,CAAA,6CAYxElhB,EAiBMM,EAAAL,CAAA,EAhBLD,EAOSC,EAAA2D,CAAA,gBAET5D,EAMCC,EAAA4D,CAAA,iFAjCAjE,EAAK,CAAA,EAAC,EAAE,4BAA4B,EAAA,KAAAmB,EAAAC,EAAAC,CAAA,cACpCrB,EAAK,CAAA,EAAC,EAAE,gCAAgC,EAAA,KAAAmB,EAAAW,EAAAC,CAAA,cAIxC/B,EAAK,CAAA,EAAC,EAAE,sDAAsD,EAAA,KAAAmB,EAAA8B,EAAAC,CAAA,cAC9DlD,EAAK,CAAA,EAAC,EACN,mHAAmH,EAAA,KAAAmB,EAAAK,EAAAC,CAAA,EAIhHzB,EAAY,CAAA,qEAadA,EAAK,CAAA,EAAC,EAAE,aAAa,EAAA,KAAAmB,EAAAO,EAAAC,CAAA,cAQlB3B,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,KAAAmB,EAAA+D,EAAAC,CAAA,yEAnDrB,MAAAnD,EAAOC,GAAW,MAAM,0BAE1Bsf,EAAe,KAEnB,OAAA/a,GAAA,SAAA,CACC9D,EAAA,EAAA6e,EAAA,MAAqBC,GAAgB,aAAa,KAAK,EAAE,MAAOC,IAC/D,QAAQ,MAAMA,CAAG,EACV,2BAiCH,SAAS,KAAO,eAShB,aAAa,WAAW,OAAO,EAC/B,SAAS,KAAO,wKC0Jb5E,GAAA,OAAAA,EAAA,CAAA,CAAA,OAAQ,OAAO,EAAE,SAAS7c,KAAM,IAAI,OAEjCA,EAAY,CAAA,EAAC,OAAS,EAAC,mwBAY1BA,EAAK,CAAA,EAAC,EACN,kPAAkP,EAAA,WAGhPA,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,SAAMA,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,SAAMA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,SAClEA,EAAK,CAAA,EAAC,EACT,uGAAuG,EAAA,uCA2BnGA,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,8IA7BG,KAAG,aAAkB,KAAG,aAC9C,IAAE,kbADoB,KAAG,mBAAkB,KAAG,gCAC9C,IAAE,8+BAhBRC,EAkDMlC,EAAA+C,EAAAX,CAAA,EAjDLC,EAgDMU,EAAAL,CAAA,EA7CLL,EA4CMK,EAAAE,CAAA,EA3CLP,EA0CMO,EAAAD,CAAA,EAzCLN,EAEMM,EAAAJ,CAAA,SAENF,EASMM,EAAAH,CAAA,gBALLH,EAECG,EAAAqH,CAAA,0DAKFxH,EAyBMM,EAAAL,CAAA,EAxBLD,EAgBSC,EAAA2D,CAAA,SAET5D,EAKCC,EAAA4D,CAAA,kFAlCAjE,EAAK,CAAA,EAAC,EACN,kPAAkP,EAAA,KAAAmB,EAAAG,EAAAC,CAAA,eAGhPvB,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,KAAAmB,EAAA2D,EAAAC,CAAA,eAAM/E,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAA6D,EAAAC,CAAA,eAAMjF,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAmB,EAAAO,EAAAC,CAAA,eAClE3B,EAAK,CAAA,EAAC,EACT,uGAAuG,EAAA,KAAAmB,EAAA+D,EAAAC,CAAA,eA2BnGnF,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAmB,EAAAkO,EAAAC,CAAA,uTAvDHtP,EAAa,CAAA,IAAA,gBAAbA,EAAa,CAAA,mFACZA,EAAc,CAAA,IAAA,gBAAdA,EAAc,CAAA,yDAMlCA,EAAM,CAAA,GAAA4B,GAAA5B,CAAA,ieAJbC,EAiEMlC,EAAAwC,EAAAJ,CAAA,EAhELC,EA+DMG,EAAAD,CAAA,kEAnEmBN,EAAa,CAAA,4DACZA,EAAc,CAAA,0BAMlCA,EAAM,CAAA,ocAxMJ,OAAAqU,CAAW,EAAAC,GAsCbtS,EAAOC,GAAW,MAAM,0BAE1Byf,EAAS,GACTC,EAAK,KACLC,EAAA,CAAA,EAEE,MAAA/W,EAAA,SACE8N,GAAW,aAAa,KAAK,EAGrCnS,GAAA,SAAA,IACKN,IAAU,OACP,MAAAsP,GAAK,OAAO,UACP,CAAA,OAAQ,OAAO,EAAE,SAAStP,EAAM,IAAI,EAAA,KAK1C,OAFJyb,EAAW,MAAAhjB,GAAO,QAAS,CAAC,CAAA,EAExBgjB,EAAA,OACG3M,EAAc,MAAA2M,EAAG,gBAAgB,QAAS,WAAW,MAC3DC,EAAe5M,EAAM,KAAK6M,EAAMC,IAAQ9M,EAAMA,EAAM,OAAS,EAAI8M,CAAG,CAAA,CAAA,EAEhEF,EAAa,SAAW,GACrB,MAAAviB,GAAS,OAAO,EAIxB,QAAQ,IAAIsiB,CAAE,CACN,MAAA,EAIH,MAAAI,EAAA,MAAqBC,GAAgB,aAAa,KAAK,EAAE,MAAOzkB,IACrE,QAAQ,MAAMA,CAAK,EACZ,OAGJ,GAAAwkB,EACHvJ,GAAS,IAAIuJ,EAAa,EAAE,OAExB,IAAAE,EAAA,CAAA,MAGHA,EAAuB,KAAK,MAAM,aAAa,QAAQ,UAAU,GAAK,IAAI,CAClE,OAAAtb,EAAA,CACR,QAAQ,MAAM,6CAA8CA,CAAC,EAG9D6R,GAAS,IAAIyJ,CAAoB,QAG5B,QAAQ,IAAA,YAEZxJ,GAAO,IAAU,MAAA5N,EAAA,CAAA,iBAGjBqX,GAAQ,IAAA,MAAUC,GAAW,aAAa,KAAK,CAAA,iBAG/CC,GAAU,IAAA,MAAUC,GAAQ,aAAa,KAAK,CAAA,iBAG9CC,GAAM,IAAA,MAAUC,GAAS,aAAa,KAAK,CAAA,iBAG3CC,GAAU,IAAA,MAAUC,GAAa,aAAa,KAAK,CAAA,iBAGnDC,GAAQ,IAAA,MAAUC,GAAW,aAAa,KAAK,CAAA,iBAG/CxD,GAAK,IAAA,MAAUC,GAAe,aAAa,KAAK,CAAA,QAIlD,SAAS,iBAAiB,UAAqB,SAAAjgB,EAAA,qBACxCyjB,EAAgBzjB,EAAM,SAAWA,EAAM,QAEvC0jB,EAAiB1jB,EAAM,YAGzByjB,GAAiBC,GAAkB1jB,EAAM,IAAI,YAAkB,IAAA,MAClEA,EAAM,eAAA,EACN,QAAQ,IAAI,SAAS,GACrB6J,EAAA,SAAS,eAAe,yBAAyB,IAAjD,MAAAA,EAAoD,SAIjD6Z,GAAkB1jB,EAAM,MAAQ,WACnCA,EAAM,eAAA,EACN,QAAQ,IAAI,YAAY,GACxByM,EAAA,SAAS,eAAe,eAAe,IAAvC,MAAAA,EAA0C,SAIvCgX,GAAiBC,GAAkB1jB,EAAM,MAAQ,IAAA,CACpDA,EAAM,eAAA,EACN,QAAQ,IAAI,mBAAmB,EACzB,MAAA+B,EAAA,CAAA,GAAa,SAAS,uBAAuB,kBAAkB,CAAA,EAAI,KAAK,EAC9EA,GAAA,MAAAA,EAAQ,WAIL0hB,GAAiBC,GAAkB1jB,EAAM,IAAI,YAAkB,IAAA,IAAA,CAClEA,EAAM,eAAA,EACN,QAAQ,IAAI,kBAAkB,EACxB,MAAA+B,EAAA,CAAA,GAAa,SAAS,uBAAuB,sBAAsB,CAAA,EAAI,KAAK,EAClF,QAAQ,IAAIA,CAAM,EAClBA,GAAA,MAAAA,EAAQ,QAIL0hB,GAAiBC,GAAkB1jB,EAAM,IAAI,YAAkB,IAAA,MAClEA,EAAM,eAAA,EACN,QAAQ,IAAI,eAAe,GAC3B2U,EAAA,SAAS,eAAe,uBAAuB,IAA/C,MAAAA,EAAkD,SAI/C8O,GAAiBC,GAAkB1jB,EAAM,MAAQ,cACpDA,EAAM,eAAA,EACN,QAAQ,IAAI,YAAY,GACxB0U,EAAA,SAAS,eAAe,oBAAoB,IAA5C,MAAAA,EAA+C,SAI5C+O,GAAiBzjB,EAAM,MAAQ,MAClCA,EAAM,eAAA,EACN,QAAQ,IAAI,cAAc,EAC1B2jB,GAAa,KAAKC,CAAa,GAI5BH,GAAiBzjB,EAAM,MAAQ,MAClCA,EAAM,eAAA,EACN,QAAQ,IAAI,eAAe,GAC3B6U,EAAA,SAAS,eAAe,uBAAuB,IAA/C,MAAAA,EAAkD,WAIhD9N,EAAM,OAAS,SAClBwC,GAAc,IAAI,aAAa,UAAYiK,EAAQ,OAAO,EAGvDqQ,EAAM,IAAI,aAAa,IAAI,gBAAgB,IAAM,QACpDC,GAAqB,IAAI,EAAI,EAGxB,MAAAjK,GAAA,MAGP0I,EAAS,EAAA,kBAIeqB,EAAatlB,0BACZylB,EAAczlB,kCAmC1B4X,EAAI,IAAO,KAAI,CAAE,KAAK,UAAUuM,CAAY,CAAA,EAAA,CAC/C,KAAM,kBAAkB,CAAA,EAEzBvN,EAAOgB,EAAqB,eAAA,KAAK,IAAG,CAAA,OAAA,EAE9B,MAAA1X,EAAKgkB,EAAG,YAAY,QAAS,WAAW,QACxC,QAAQ,IAAG,CAAEhkB,EAAG,MAAM,QAASA,EAAG,IAAI,CAAA,EACtC,MAAA0B,GAAS,OAAO,MAEtBuiB,EAAY,CAAA,CAAA,mBASZA,EAAY,CAAA,CAAA","x_google_ignoreList":[0,1,24]}