{"version":3,"file":"20.DTAMK9eG.js","sources":["../../../../../../src/routes/(app)/workspace/prompts/create/+page.svelte"],"sourcesContent":["<script>\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\timport { goto } from '$app/navigation';\r\n\timport { prompts } from '$lib/stores';\r\n\timport { onMount, tick, getContext } from 'svelte';\r\n\r\n\timport { createNewPrompt, getPrompts } from '$lib/apis/prompts';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet loading = false;\r\n\r\n\t// ///////////\r\n\t// Prompt\r\n\t// ///////////\r\n\r\n\tlet title = '';\r\n\tlet command = '';\r\n\tlet content = '';\r\n\r\n\t$: command = title !== '' ? `${title.replace(/\\s+/g, '-').toLowerCase()}` : '';\r\n\r\n\tconst submitHandler = async () => {\r\n\t\tloading = true;\r\n\r\n\t\tif (validateCommandString(command)) {\r\n\t\t\tconst prompt = await createNewPrompt(localStorage.token, command, title, content).catch(\r\n\t\t\t\t(error) => {\r\n\t\t\t\t\ttoast.error(error);\r\n\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tif (prompt) {\r\n\t\t\t\tawait prompts.set(await getPrompts(localStorage.token));\r\n\t\t\t\tawait goto('/workspace/prompts');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttoast.error(\r\n\t\t\t\t$i18n.t('Only alphanumeric characters and hyphens are allowed in the command string.')\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tloading = false;\r\n\t};\r\n\r\n\tconst validateCommandString = (inputString) => {\r\n\t\t// Regular expression to match only alphanumeric characters and hyphen\r\n\t\tconst regex = /^[a-zA-Z0-9-]+$/;\r\n\r\n\t\t// Test the input string against the regular expression\r\n\t\treturn regex.test(inputString);\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\twindow.addEventListener('message', async (event) => {\r\n\t\t\tif (\r\n\t\t\t\t!['https://openwebui.com', 'https://www.openwebui.com', 'http://localhost:5173'].includes(\r\n\t\t\t\t\tevent.origin\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t\treturn;\r\n\t\t\tconst prompt = JSON.parse(event.data);\r\n\t\t\tconsole.log(prompt);\r\n\r\n\t\t\ttitle = prompt.title;\r\n\t\t\tawait tick();\r\n\t\t\tcontent = prompt.content;\r\n\t\t\tcommand = prompt.command;\r\n\t\t});\r\n\r\n\t\tif (window.opener ?? false) {\r\n\t\t\twindow.opener.postMessage('loaded', '*');\r\n\t\t}\r\n\r\n\t\tif (sessionStorage.prompt) {\r\n\t\t\tconst prompt = JSON.parse(sessionStorage.prompt);\r\n\r\n\t\t\tconsole.log(prompt);\r\n\t\t\ttitle = prompt.title;\r\n\t\t\tawait tick();\r\n\t\t\tcontent = prompt.content;\r\n\t\t\tcommand = prompt.command.at(0) === '/' ? prompt.command.slice(1) : prompt.command;\r\n\r\n\t\t\tsessionStorage.removeItem('prompt');\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<div class=\"w-full max-h-full\">\r\n\t<button\r\n\t\tclass=\"flex space-x-1\"\r\n\t\ton:click={() => {\r\n\t\t\thistory.back();\r\n\t\t}}\r\n\t>\r\n\t\t<div class=\" self-center\">\r\n\t\t\t<svg\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\td=\"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z\"\r\n\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t\t<div class=\" self-center font-medium text-sm\">{$i18n.t('Back')}</div>\r\n\t</button>\r\n\r\n\t<form\r\n\t\tclass=\"flex flex-col max-w-2xl mx-auto mt-4 mb-10\"\r\n\t\ton:submit|preventDefault={() => {\r\n\t\t\tsubmitHandler();\r\n\t\t}}\r\n\t>\r\n\t\t<div class=\"my-2\">\r\n\t\t\t<div class=\" text-sm font-semibold mb-2\">{$i18n.t('Title')}*</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclass=\"px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg\"\r\n\t\t\t\t\tplaceholder={$i18n.t('Add a short title for this prompt')}\r\n\t\t\t\t\tbind:value={title}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"my-2\">\r\n\t\t\t<div class=\" text-sm font-semibold mb-2\">{$i18n.t('Command')}*</div>\r\n\r\n\t\t\t<div class=\"flex items-center mb-1\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"bg-gray-200 dark:bg-gray-600 font-semibold px-3 py-1 border border-r-0 dark:border-gray-600 rounded-l-lg\"\r\n\t\t\t\t>\r\n\t\t\t\t\t/\r\n\t\t\t\t</div>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclass=\"px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-r-lg\"\r\n\t\t\t\t\tplaceholder={$i18n.t('short-summary')}\r\n\t\t\t\t\tbind:value={command}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t{$i18n.t('Only')}\r\n\t\t\t\t<span class=\" text-gray-600 dark:text-gray-300 font-medium\"\r\n\t\t\t\t\t>{$i18n.t('alphanumeric characters and hyphens')}</span\r\n\t\t\t\t>\r\n\t\t\t\t{$i18n.t('are allowed - Activate this command by typing')}&nbsp;\"<span\r\n\t\t\t\t\tclass=\" text-gray-600 dark:text-gray-300 font-medium\"\r\n\t\t\t\t>\r\n\t\t\t\t\t/{command}\r\n\t\t\t\t</span>\" &nbsp;\r\n\t\t\t\t{$i18n.t('to chat input.')}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"my-2\">\r\n\t\t\t<div class=\"flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-sm font-semibold\">{$i18n.t('Prompt Content')}*</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"mt-2\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tclass=\"px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg\"\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Write a summary in 50 words that summarizes [topic or keyword].')}\r\n\t\t\t\t\t\trows=\"6\"\r\n\t\t\t\t\t\tbind:value={content}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t\tâ“˜ {$i18n.t('Format your variables using square brackets like this:')}&nbsp;<span\r\n\t\t\t\t\t\tclass=\" text-gray-600 dark:text-gray-300 font-medium\">[{$i18n.t('variable')}]</span\r\n\t\t\t\t\t>.\r\n\t\t\t\t\t{$i18n.t('Make sure to enclose them with')}\r\n\t\t\t\t\t<span class=\" text-gray-600 dark:text-gray-300 font-medium\">'['</span>\r\n\t\t\t\t\t{$i18n.t('and')}\r\n\t\t\t\t\t<span class=\" text-gray-600 dark:text-gray-300 font-medium\">']'</span>.\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t\t{$i18n.t('Utilize')}<span class=\" text-gray-600 dark:text-gray-300 font-medium\">\r\n\t\t\t\t\t\t{` {{CLIPBOARD}}`}</span\r\n\t\t\t\t\t>\r\n\t\t\t\t\t{$i18n.t('variable to have them replaced with clipboard content.')}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"my-2 flex justify-end\">\r\n\t\t\t<button\r\n\t\t\t\tclass=\" text-sm px-3 py-2 transition rounded-xl {loading\r\n\t\t\t\t\t? ' cursor-not-allowed bg-gray-100 dark:bg-gray-800'\r\n\t\t\t\t\t: ' bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-800'} flex\"\r\n\t\t\t\ttype=\"submit\"\r\n\t\t\t\tdisabled={loading}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" self-center font-medium\">{$i18n.t('Save & Create')}</div>\r\n\r\n\t\t\t\t{#if loading}\r\n\t\t\t\t\t<div class=\"ml-1.5 self-center\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\tclass=\" w-4 h-4\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t><style>\r\n\t\t\t\t\t\t\t\t.spinner_ajPY {\r\n\t\t\t\t\t\t\t\t\ttransform-origin: center;\r\n\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\r\n\t\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</style><path\r\n\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\r\n\t\t\t\t\t\t\t\topacity=\".25\"\r\n\t\t\t\t\t\t\t/><path\r\n\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\r\n\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\r\n\t\t\t\t\t\t\t/></svg\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</form>\r\n</div>\r\n"],"names":["insert_hydration","target","div","anchor","ctx","create_if_block","div19","append_hydration","button0","div0","div1","form","div4","div2","div3","input0","div9","div5","div7","div6","input1","div8","span0","span1","div16","div11","div10","div15","div12","textarea","div13","span2","span3","span4","div14","span5","div18","button1","div17","set_data","t1","t1_value","t3","t3_value","t7","t7_value","t13","t13_value","t15","t15_value","t17","t17_value","t23","t23_value","t25","t25_value","t30","t30_value","t33","t33_value","t36","t36_value","t40","t40_value","t45","t45_value","t48","t48_value","t50","t50_value","i18n","getContext","loading","title","command","content","submitHandler","$$invalidate","validateCommandString","createNewPrompt","error","toast","prompts","getPrompts","goto","$i18n","inputString","onMount","event","prompt","tick"],"mappings":"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"}