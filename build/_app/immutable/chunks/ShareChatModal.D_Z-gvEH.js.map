{"version":3,"file":"ShareChatModal.D_Z-gvEH.js","sources":["../../../../../../src/lib/apis/memories/index.ts","../../../../../../src/lib/components/icons/ArchiveBox.svelte","../../../../../../src/lib/components/layout/Sidebar/UserMenu.svelte","../../../../../../src/lib/components/chat/Tags.svelte","../../../../../../src/lib/components/icons/Link.svelte","../../../../../../src/lib/components/chat/ShareChatModal.svelte"],"sourcesContent":["import { WEBUI_API_BASE_URL } from '$lib/constants';\r\n\r\nexport const getMemories = async (token: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/memories/`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tauthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\terror = err.detail;\r\n\t\t\tconsole.log(err);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const addNewMemory = async (token: string, content: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/memories/add`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tauthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tcontent: content\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\terror = err.detail;\r\n\t\t\tconsole.log(err);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const updateMemoryById = async (token: string, id: string, content: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/memories/${id}/update`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tauthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tcontent: content\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\terror = err.detail;\r\n\t\t\tconsole.log(err);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const queryMemory = async (token: string, content: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/memories/query`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tauthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tcontent: content\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\terror = err.detail;\r\n\t\t\tconsole.log(err);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const deleteMemoryById = async (token: string, id: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/memories/${id}`, {\r\n\t\tmethod: 'DELETE',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tauthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.then((json) => {\r\n\t\t\treturn json;\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\terror = err.detail;\r\n\r\n\t\t\tconsole.log(err);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const deleteMemoriesByUserId = async (token: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/memories/delete/user`, {\r\n\t\tmethod: 'DELETE',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tauthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.then((json) => {\r\n\t\t\treturn json;\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\terror = err.detail;\r\n\r\n\t\t\tconsole.log(err);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n","<script lang=\"ts\">\r\n\texport let className = 'size-3.5';\r\n\texport let strokeWidth = '2.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tstroke-linecap=\"round\"\r\n\t\tstroke-linejoin=\"round\"\r\n\t\td=\"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\timport { DropdownMenu } from 'bits-ui';\r\n\timport { createEventDispatcher, getContext, onMount } from 'svelte';\r\n\r\n\timport { flyAndScale } from '$lib/utils/transitions';\r\n\timport { goto } from '$app/navigation';\r\n\timport ArchiveBox from '$lib/components/icons/ArchiveBox.svelte';\r\n\timport { showSettings, activeUserCount, USAGE_POOL } from '$lib/stores';\r\n\timport { fade, slide } from 'svelte/transition';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n\texport let role = '';\r\n\texport let className = 'max-w-[240px]';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n</script>\r\n\r\n<DropdownMenu.Root\r\n\tbind:open={show}\r\n\tonOpenChange={(state) => {\r\n\t\tdispatch('change', state);\r\n\t}}\r\n>\r\n\t<DropdownMenu.Trigger>\r\n\t\t<slot />\r\n\t</DropdownMenu.Trigger>\r\n\r\n\t<slot name=\"content\">\r\n\t\t<DropdownMenu.Content\r\n\t\t\tclass=\"w-full {className} text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow font-primary\"\r\n\t\t\tsideOffset={8}\r\n\t\t\tside=\"bottom\"\r\n\t\t\talign=\"start\"\r\n\t\t\ttransition={(e) => fade(e, { duration: 100 })}\r\n\t\t>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\ton:click={async () => {\r\n\t\t\t\t\tawait showSettings.set(true);\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\td=\"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\td=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\" self-center font-medium\">{$i18n.t('Settings')}</div>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button\r\n\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tdispatch('show', 'archived-chat');\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t<ArchiveBox className=\"size-5\" strokeWidth=\"1.5\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\" self-center font-medium\">{$i18n.t('Archived Chats')}</div>\r\n\t\t\t</button>\r\n\r\n\t\t\t{#if role === 'admin'}\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tgoto('/playground');\r\n\t\t\t\t\t\tshow = false;\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"size-5\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\td=\"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center font-medium\">{$i18n.t('Playground')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tgoto('/admin');\r\n\t\t\t\t\t\tshow = false;\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\td=\"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center font-medium\">{$i18n.t('Admin Panel')}</div>\r\n\t\t\t\t</button>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<hr class=\" dark:border-gray-800 my-1.5 p-0\" />\r\n\r\n\t\t\t<button\r\n\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tlocalStorage.removeItem('token');\r\n\t\t\t\t\tlocation.href = '/auth';\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\td=\"M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z\"\r\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\td=\"M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z\"\r\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\" self-center font-medium\">{$i18n.t('Sign Out')}</div>\r\n\t\t\t</button>\r\n\r\n\t\t\t{#if $activeUserCount}\r\n\t\t\t\t<hr class=\" dark:border-gray-800 my-1.5 p-0\" />\r\n\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\tcontent={$USAGE_POOL && $USAGE_POOL.length > 0\r\n\t\t\t\t\t\t? `${$i18n.t('Running')}: ${$USAGE_POOL.join(', ')} âœ¨`\r\n\t\t\t\t\t\t: ''}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"flex rounded-md py-1.5 px-3 text-xs gap-2.5 items-center\">\r\n\t\t\t\t\t\t<div class=\" flex items-center\">\r\n\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclass=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-green-500\" />\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\" \">\r\n\t\t\t\t\t\t\t<span class=\" font-medium\">\r\n\t\t\t\t\t\t\t\t{$i18n.t('Active Users')}:\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span class=\" font-semibold\">\r\n\t\t\t\t\t\t\t\t{$activeUserCount}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<!-- <DropdownMenu.Item class=\"flex items-center px-3 py-2 text-sm  font-medium\">\r\n\t\t\t\t<div class=\"flex items-center\">Profile</div>\r\n\t\t\t</DropdownMenu.Item> -->\r\n\t\t</DropdownMenu.Content>\r\n\t</slot>\r\n</DropdownMenu.Root>\r\n","<script>\r\n\timport {\r\n\t\taddTagById,\r\n\t\tdeleteTagById,\r\n\t\tgetAllChatTags,\r\n\t\tgetChatList,\r\n\t\tgetChatListByTagName,\r\n\t\tgetTagsById,\r\n\t\tupdateChatById\r\n\t} from '$lib/apis/chats';\r\n\timport {\r\n\t\ttags as _tags,\r\n\t\tchats,\r\n\t\tpinnedChats,\r\n\t\tcurrentChatPage,\r\n\t\tscrollPaginationEnabled\r\n\t} from '$lib/stores';\r\n\timport { createEventDispatcher, onMount } from 'svelte';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport Tags from '../common/Tags.svelte';\r\n\r\n\texport let chatId = '';\r\n\tlet tags = [];\r\n\r\n\tconst getTags = async () => {\r\n\t\treturn (\r\n\t\t\tawait getTagsById(localStorage.token, chatId).catch(async (error) => {\r\n\t\t\t\treturn [];\r\n\t\t\t})\r\n\t\t).filter((tag) => tag.name !== 'pinned');\r\n\t};\r\n\r\n\tconst addTag = async (tagName) => {\r\n\t\tconst res = await addTagById(localStorage.token, chatId, tagName);\r\n\t\ttags = await getTags();\r\n\r\n\t\tawait updateChatById(localStorage.token, chatId, {\r\n\t\t\ttags: tags\r\n\t\t});\r\n\r\n\t\t_tags.set(await getAllChatTags(localStorage.token));\r\n\t\tawait pinnedChats.set(await getChatListByTagName(localStorage.token, 'pinned'));\r\n\t};\r\n\r\n\tconst deleteTag = async (tagName) => {\r\n\t\tconst res = await deleteTagById(localStorage.token, chatId, tagName);\r\n\t\ttags = await getTags();\r\n\r\n\t\tawait updateChatById(localStorage.token, chatId, {\r\n\t\t\ttags: tags\r\n\t\t});\r\n\r\n\t\tawait _tags.set(await getAllChatTags(localStorage.token));\r\n\t\tif ($_tags.map((t) => t.name).includes(tagName)) {\r\n\t\t\tif (tagName === 'pinned') {\r\n\t\t\t\tawait pinnedChats.set(await getChatListByTagName(localStorage.token, 'pinned'));\r\n\t\t\t} else {\r\n\t\t\t\tawait chats.set(await getChatListByTagName(localStorage.token, tagName));\r\n\t\t\t}\r\n\r\n\t\t\tif ($chats.find((chat) => chat.id === chatId)) {\r\n\t\t\t\tdispatch('close');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// if the tag we deleted is no longer a valid tag, return to main chat list view\r\n\t\t\tcurrentChatPage.set(1);\r\n\t\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\r\n\t\t\tawait pinnedChats.set(await getChatListByTagName(localStorage.token, 'pinned'));\r\n\t\t\tawait scrollPaginationEnabled.set(true);\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tif (chatId) {\r\n\t\t\ttags = await getTags();\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<Tags {tags} {deleteTag} {addTag} />\r\n","<script lang=\"ts\">\r\n\texport let className = 'w-4 h-4';\r\n</script>\r\n\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" fill=\"currentColor\" class={className}>\r\n\t<path\r\n\t\tfill-rule=\"evenodd\"\r\n\t\td=\"M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z\"\r\n\t\tclip-rule=\"evenodd\"\r\n\t/>\r\n\t<path\r\n\t\tfill-rule=\"evenodd\"\r\n\t\td=\"M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z\"\r\n\t\tclip-rule=\"evenodd\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\timport { getContext, onMount } from 'svelte';\r\n\timport { models, config } from '$lib/stores';\r\n\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { deleteSharedChatById, getChatById, shareChatById } from '$lib/apis/chats';\r\n\timport { copyToClipboard } from '$lib/utils';\r\n\r\n\timport Modal from '../common/Modal.svelte';\r\n\timport Link from '../icons/Link.svelte';\r\n\r\n\texport let chatId;\r\n\r\n\tlet chat = null;\r\n\tlet shareUrl = null;\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tconst shareLocalChat = async () => {\r\n\t\tconst _chat = chat;\r\n\r\n\t\tconst sharedChat = await shareChatById(localStorage.token, chatId);\r\n\t\tshareUrl = `${window.location.origin}/s/${sharedChat.id}`;\r\n\t\tconsole.log(shareUrl);\r\n\t\tchat = await getChatById(localStorage.token, chatId);\r\n\r\n\t\treturn shareUrl;\r\n\t};\r\n\r\n\tconst shareChat = async () => {\r\n\t\tconst _chat = chat.chat;\r\n\t\tconsole.log('share', _chat);\r\n\r\n\t\ttoast.success($i18n.t('Redirecting you to OpenWebUI Community'));\r\n\t\tconst url = 'https://openwebui.com';\r\n\t\t// const url = 'http://localhost:5173';\r\n\r\n\t\tconst tab = await window.open(`${url}/chats/upload`, '_blank');\r\n\t\twindow.addEventListener(\r\n\t\t\t'message',\r\n\t\t\t(event) => {\r\n\t\t\t\tif (event.origin !== url) return;\r\n\t\t\t\tif (event.data === 'loaded') {\r\n\t\t\t\t\ttab.postMessage(\r\n\t\t\t\t\t\tJSON.stringify({\r\n\t\t\t\t\t\t\tchat: _chat,\r\n\t\t\t\t\t\t\tmodels: $models.filter((m) => _chat.models.includes(m.id))\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t'*'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfalse\r\n\t\t);\r\n\t};\r\n\r\n\texport let show = false;\r\n\r\n\tconst isDifferentChat = (_chat) => {\r\n\t\tif (!chat) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!_chat) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn chat.id !== _chat.id || chat.share_id !== _chat.share_id;\r\n\t};\r\n\r\n\t$: if (show) {\r\n\t\t(async () => {\r\n\t\t\tif (chatId) {\r\n\t\t\t\tconst _chat = await getChatById(localStorage.token, chatId);\r\n\t\t\t\tif (isDifferentChat(_chat)) {\r\n\t\t\t\t\tchat = _chat;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tchat = null;\r\n\t\t\t\tconsole.log(chat);\r\n\t\t\t}\r\n\t\t})();\r\n\t}\r\n</script>\r\n\r\n<Modal bind:show size=\"sm\">\r\n\t<div>\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Share Chat')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t{#if chat}\r\n\t\t\t<div class=\"px-5 pt-4 pb-5 w-full flex flex-col justify-center\">\r\n\t\t\t\t<div class=\" text-sm dark:text-gray-300 mb-1\">\r\n\t\t\t\t\t{#if chat.share_id}\r\n\t\t\t\t\t\t<a href=\"/s/{chat.share_id}\" target=\"_blank\"\r\n\t\t\t\t\t\t\t>{$i18n.t('You have shared this chat')}\r\n\t\t\t\t\t\t\t<span class=\" underline\">{$i18n.t('before')}</span>.</a\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t{$i18n.t('Click here to')}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"underline\"\r\n\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\tconst res = await deleteSharedChatById(localStorage.token, chatId);\r\n\r\n\t\t\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\t\t\tchat = await getChatById(localStorage.token, chatId);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>{$i18n.t('delete this link')}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{$i18n.t('and create a new shared link.')}\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t{$i18n.t(\r\n\t\t\t\t\t\t\t\"Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.\"\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"flex justify-end\">\r\n\t\t\t\t\t<div class=\"flex flex-col items-end space-x-1 mt-1.5\">\r\n\t\t\t\t\t\t<div class=\"flex gap-1\">\r\n\t\t\t\t\t\t\t{#if $config?.features.enable_community_sharing}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\" self-center px-3.5 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white\"\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\tshareChat();\r\n\t\t\t\t\t\t\t\t\t\tshow = false;\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('Share to OpenWebUI Community')}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t{/if}\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\" self-center flex items-center gap-1 px-3.5 py-2 rounded-xl text-sm font-medium bg-emerald-600 hover:bg-emerald-500 text-white\"\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tid=\"copy-and-share-chat-button\"\r\n\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\tconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\n\t\t\t\t\t\t\t\t\tif (isSafari) {\r\n\t\t\t\t\t\t\t\t\t\t// Oh, Safari, you're so special, let's give you some extra love and attention\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('isSafari');\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst getUrlPromise = async () => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst url = await shareLocalChat();\r\n\t\t\t\t\t\t\t\t\t\t\treturn new Blob([url], { type: 'text/plain' });\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\t\tnavigator.clipboard\r\n\t\t\t\t\t\t\t\t\t\t\t.write([\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew ClipboardItem({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'text/plain': getUrlPromise()\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Async: Copying to clipboard was successful!');\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('Async: Could not copy text: ', error);\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tcopyToClipboard(await shareLocalChat());\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\ttoast.success($i18n.t('Copied shared chat URL to clipboard!'));\r\n\t\t\t\t\t\t\t\t\tshow = false;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Link />\r\n\r\n\t\t\t\t\t\t\t\t{#if chat.share_id}\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('Update and Copy Link')}\r\n\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('Copy Link')}\r\n\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n</Modal>\r\n"],"names":["getMemories","token","error","res","WEBUI_API_BASE_URL","err","addNewMemory","content","updateMemoryById","id","queryMemory","deleteMemoryById","json","deleteMemoriesByUserId","ctx","insert_hydration","target","svg","anchor","append_hydration","path","className","$$props","strokeWidth","button0","div0","div1","button1","div2","div3","set_data","t1","t1_value","t4","t4_value","hr","dirty","tooltip_changes","span3","span4","t2","t2_value","if_block0","create_if_block_1","create_if_block","button2","div4","div5","t9","t9_value","i18n","getContext","show","role","dispatch","createEventDispatcher","showSettings","$$invalidate","goto","func","e","fade","state","value","chatId","tags","getTags","getTagsById","tag","addTag","tagName","addTagById","updateChatById","_tags","getAllChatTags","pinnedChats","getChatListByTagName","deleteTag","deleteTagById","$_tags","t","chats","$chats","chat","currentChatPage","getChatList","$currentChatPage","scrollPaginationEnabled","onMount","path0","path1","create_if_block_3","_a","create_if_block_2","button","t_value","attr","a","a_href_value","span","t0","t0_value","t5","t5_value","t7","t7_value","shareUrl","shareLocalChat","sharedChat","shareChatById","getChatById","shareChat","_chat","toast","$i18n","url","tab","event","$models","m","isDifferentChat","deleteSharedChatById","getUrlPromise","copyToClipboard"],"mappings":"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"}