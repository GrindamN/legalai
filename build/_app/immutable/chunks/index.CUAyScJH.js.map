{"version":3,"file":"index.CUAyScJH.js","sources":["../../../../../../src/lib/apis/index.ts"],"sourcesContent":["import { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\r\n\r\nexport const getModels = async (token: string = '') => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/models`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\tlet models = res?.data ?? [];\r\n\r\n\tmodels = models\r\n\t\t.filter((models) => models)\r\n\t\t// Sort the models\r\n\t\t.sort((a, b) => {\r\n\t\t\t// Check if models have position property\r\n\t\t\tconst aHasPosition = a.info?.meta?.position !== undefined;\r\n\t\t\tconst bHasPosition = b.info?.meta?.position !== undefined;\r\n\r\n\t\t\t// If both a and b have the position property\r\n\t\t\tif (aHasPosition && bHasPosition) {\r\n\t\t\t\treturn a.info.meta.position - b.info.meta.position;\r\n\t\t\t}\r\n\r\n\t\t\t// If only a has the position property, it should come first\r\n\t\t\tif (aHasPosition) return -1;\r\n\r\n\t\t\t// If only b has the position property, it should come first\r\n\t\t\tif (bHasPosition) return 1;\r\n\r\n\t\t\t// Compare case-insensitively by name for models without position property\r\n\t\t\tconst lowerA = a.name.toLowerCase();\r\n\t\t\tconst lowerB = b.name.toLowerCase();\r\n\r\n\t\t\tif (lowerA < lowerB) return -1;\r\n\t\t\tif (lowerA > lowerB) return 1;\r\n\r\n\t\t\t// If same case-insensitively, sort by original strings,\r\n\t\t\t// lowercase will come before uppercase due to ASCII values\r\n\t\t\tif (a.name < b.name) return -1;\r\n\t\t\tif (a.name > b.name) return 1;\r\n\r\n\t\t\treturn 0; // They are equal\r\n\t\t});\r\n\r\n\tconsole.log(models);\r\n\treturn models;\r\n};\r\n\r\ntype ChatCompletedForm = {\r\n\tmodel: string;\r\n\tmessages: string[];\r\n\tchat_id: string;\r\n\tsession_id: string;\r\n};\r\n\r\nexport const chatCompleted = async (token: string, body: ChatCompletedForm) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/chat/completed`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t},\r\n\t\tbody: JSON.stringify(body)\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t} else {\r\n\t\t\t\terror = err;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\ntype ChatActionForm = {\r\n\tmodel: string;\r\n\tmessages: string[];\r\n\tchat_id: string;\r\n};\r\n\r\nexport const chatAction = async (token: string, action_id: string, body: ChatActionForm) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/chat/actions/${action_id}`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t},\r\n\t\tbody: JSON.stringify(body)\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t} else {\r\n\t\t\t\terror = err;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const getTaskConfig = async (token: string = '') => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/task/config`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const updateTaskConfig = async (token: string, config: object) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/task/config/update`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t},\r\n\t\tbody: JSON.stringify(config)\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t} else {\r\n\t\t\t\terror = err;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const generateTitle = async (\r\n\ttoken: string = '',\r\n\tmodel: string,\r\n\tprompt: string,\r\n\tchat_id?: string\r\n) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/task/title/completions`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tmodel: model,\r\n\t\t\tprompt: prompt,\r\n\t\t\t...(chat_id && { chat_id: chat_id })\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res?.choices[0]?.message?.content.replace(/[\"']/g, '') ?? 'New Chat';\r\n};\r\n\r\nexport const generateEmoji = async (\r\n\ttoken: string = '',\r\n\tmodel: string,\r\n\tprompt: string,\r\n\tchat_id?: string\r\n) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/task/emoji/completions`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tmodel: model,\r\n\t\t\tprompt: prompt,\r\n\t\t\t...(chat_id && { chat_id: chat_id })\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\tconst response = res?.choices[0]?.message?.content.replace(/[\"']/g, '') ?? null;\r\n\r\n\tif (response) {\r\n\t\tif (/\\p{Extended_Pictographic}/u.test(response)) {\r\n\t\t\treturn response.match(/\\p{Extended_Pictographic}/gu)[0];\r\n\t\t}\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nexport const generateSearchQuery = async (\r\n\ttoken: string = '',\r\n\tmodel: string,\r\n\tmessages: object[],\r\n\tprompt: string\r\n) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/task/query/completions`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tmodel: model,\r\n\t\t\tmessages: messages,\r\n\t\t\tprompt: prompt\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res?.choices[0]?.message?.content.replace(/[\"']/g, '') ?? prompt;\r\n};\r\n\r\nexport const generateMoACompletion = async (\r\n\ttoken: string = '',\r\n\tmodel: string,\r\n\tprompt: string,\r\n\tresponses: string[]\r\n) => {\r\n\tconst controller = new AbortController();\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/task/moa/completions`, {\r\n\t\tsignal: controller.signal,\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tmodel: model,\r\n\t\t\tprompt: prompt,\r\n\t\t\tresponses: responses,\r\n\t\t\tstream: true\r\n\t\t})\r\n\t}).catch((err) => {\r\n\t\tconsole.log(err);\r\n\t\terror = err;\r\n\t\treturn null;\r\n\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn [res, controller];\r\n};\r\n\r\nexport const getPipelinesList = async (token: string = '') => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/pipelines/list`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\tlet pipelines = res?.data ?? [];\r\n\treturn pipelines;\r\n};\r\n\r\nexport const uploadPipeline = async (token: string, file: File, urlIdx: string) => {\r\n\tlet error = null;\r\n\r\n\t// Create a new FormData object to handle the file upload\r\n\tconst formData = new FormData();\r\n\tformData.append('file', file);\r\n\tformData.append('urlIdx', urlIdx);\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/pipelines/upload`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t\t// 'Content-Type': 'multipart/form-data' is not needed as Fetch API will set it automatically\r\n\t\t},\r\n\t\tbody: formData\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t} else {\r\n\t\t\t\terror = err;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const downloadPipeline = async (token: string, url: string, urlIdx: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/pipelines/add`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\turl: url,\r\n\t\t\turlIdx: urlIdx\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t} else {\r\n\t\t\t\terror = err;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const deletePipeline = async (token: string, id: string, urlIdx: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/pipelines/delete`, {\r\n\t\tmethod: 'DELETE',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tid: id,\r\n\t\t\turlIdx: urlIdx\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t} else {\r\n\t\t\t\terror = err;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const getPipelines = async (token: string, urlIdx?: string) => {\r\n\tlet error = null;\r\n\r\n\tconst searchParams = new URLSearchParams();\r\n\tif (urlIdx !== undefined) {\r\n\t\tsearchParams.append('urlIdx', urlIdx);\r\n\t}\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/pipelines?${searchParams.toString()}`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\tlet pipelines = res?.data ?? [];\r\n\treturn pipelines;\r\n};\r\n\r\nexport const getPipelineValves = async (token: string, pipeline_id: string, urlIdx: string) => {\r\n\tlet error = null;\r\n\r\n\tconst searchParams = new URLSearchParams();\r\n\tif (urlIdx !== undefined) {\r\n\t\tsearchParams.append('urlIdx', urlIdx);\r\n\t}\r\n\r\n\tconst res = await fetch(\r\n\t\t`${WEBUI_BASE_URL}/api/pipelines/${pipeline_id}/valves?${searchParams.toString()}`,\r\n\t\t{\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const getPipelineValvesSpec = async (token: string, pipeline_id: string, urlIdx: string) => {\r\n\tlet error = null;\r\n\r\n\tconst searchParams = new URLSearchParams();\r\n\tif (urlIdx !== undefined) {\r\n\t\tsearchParams.append('urlIdx', urlIdx);\r\n\t}\r\n\r\n\tconst res = await fetch(\r\n\t\t`${WEBUI_BASE_URL}/api/pipelines/${pipeline_id}/valves/spec?${searchParams.toString()}`,\r\n\t\t{\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const updatePipelineValves = async (\r\n\ttoken: string = '',\r\n\tpipeline_id: string,\r\n\tvalves: object,\r\n\turlIdx: string\r\n) => {\r\n\tlet error = null;\r\n\r\n\tconst searchParams = new URLSearchParams();\r\n\tif (urlIdx !== undefined) {\r\n\t\tsearchParams.append('urlIdx', urlIdx);\r\n\t}\r\n\r\n\tconst res = await fetch(\r\n\t\t`${WEBUI_BASE_URL}/api/pipelines/${pipeline_id}/valves/update?${searchParams.toString()}`,\r\n\t\t{\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t...(token && { authorization: `Bearer ${token}` })\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(valves)\r\n\t\t}\r\n\t)\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\r\n\t\t\tif ('detail' in err) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t} else {\r\n\t\t\t\terror = err;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const getBackendConfig = async () => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config`, {\r\n\t\tmethod: 'GET',\r\n\t\tcredentials: 'include',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const getChangelog = async () => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/changelog`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const getVersionUpdates = async () => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/version/updates`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const getModelFilterConfig = async (token: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config/model/filter`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const updateModelFilterConfig = async (\r\n\ttoken: string,\r\n\tenabled: boolean,\r\n\tmodels: string[]\r\n) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config/model/filter`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tenabled: enabled,\r\n\t\t\tmodels: models\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const getWebhookUrl = async (token: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/webhook`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res.url;\r\n};\r\n\r\nexport const updateWebhookUrl = async (token: string, url: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/webhook`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\turl: url\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res.url;\r\n};\r\n\r\nexport const getCommunitySharingEnabledStatus = async (token: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/community_sharing`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const toggleCommunitySharingEnabledStatus = async (token: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/community_sharing/toggle`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err.detail;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const getModelConfig = async (token: string): Promise<GlobalModelConfig> => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config/models`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res.models;\r\n};\r\n\r\nexport interface ModelConfig {\r\n\tid: string;\r\n\tname: string;\r\n\tmeta: ModelMeta;\r\n\tbase_model_id?: string;\r\n\tparams: ModelParams;\r\n}\r\n\r\nexport interface ModelMeta {\r\n\tdescription?: string;\r\n\tcapabilities?: object;\r\n\tprofile_image_url?: string;\r\n}\r\n\r\nexport interface ModelParams {}\r\n\r\nexport type GlobalModelConfig = ModelConfig[];\r\n\r\nexport const updateModelConfig = async (token: string, config: GlobalModelConfig) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config/models`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tmodels: config\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n"],"names":["getModels","token","error","res","WEBUI_BASE_URL","err","models","a","b","aHasPosition","_b","_a","bHasPosition","_d","_c","lowerA","lowerB","chatCompleted","body","chatAction","action_id","getTaskConfig","updateTaskConfig","config","generateTitle","model","prompt","chat_id","generateEmoji","response","generateSearchQuery","messages","generateMoACompletion","responses","controller","getPipelinesList","uploadPipeline","file","urlIdx","formData","downloadPipeline","url","deletePipeline","id","getPipelines","searchParams","getPipelineValves","pipeline_id","getPipelineValvesSpec","updatePipelineValves","valves","getBackendConfig","getChangelog","getVersionUpdates","getModelFilterConfig","updateModelFilterConfig","enabled","getWebhookUrl","updateWebhookUrl"],"mappings":"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"}